[2022-09-22T21:55:37.331] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfQuality (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:136:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17",
    sql: 'select j.*, m.* from\n' +
      '      (SELECT\n' +
      '          furnace,\n' +
      '          SUM(coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(qualityOfA) AS qualityOfA,\n' +
      '          SUM(qualityOfB) AS qualityOfB,\n' +
      '          SUM(qualityOfC) AS qualityOfC,\n' +
      '          SUM(qualityOfD) AS qualityOfD,\n' +
      '          SUM(qualityOfE) AS qualityOfE,\n' +
      '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '          SUM(qualityOfGood) AS qualityOfGood,\n' +
      '          SUM(qualityOfFine) AS qualityOfFine,\n' +
      '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '      FROM cast c JOIN melt t\n' +
      '          ON c.furnace = t.furnace\n' +
      '      ) j ON m.furnace = j.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17",
    sql: 'select j.*, m.* from\n' +
      '      (SELECT\n' +
      '          furnace,\n' +
      '          SUM(coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(qualityOfA) AS qualityOfA,\n' +
      '          SUM(qualityOfB) AS qualityOfB,\n' +
      '          SUM(qualityOfC) AS qualityOfC,\n' +
      '          SUM(qualityOfD) AS qualityOfD,\n' +
      '          SUM(qualityOfE) AS qualityOfE,\n' +
      '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '          SUM(qualityOfGood) AS qualityOfGood,\n' +
      '          SUM(qualityOfFine) AS qualityOfFine,\n' +
      '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '      FROM cast c JOIN melt t\n' +
      '          ON c.furnace = t.furnace\n' +
      '      ) j ON m.furnace = j.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'select j.*, m.* from\n' +
    '      (SELECT\n' +
    '          furnace,\n' +
    '          SUM(coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(qualityOfA) AS qualityOfA,\n' +
    '          SUM(qualityOfB) AS qualityOfB,\n' +
    '          SUM(qualityOfC) AS qualityOfC,\n' +
    '          SUM(qualityOfD) AS qualityOfD,\n' +
    '          SUM(qualityOfE) AS qualityOfE,\n' +
    '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
    '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
    '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
    '          SUM(qualityOfGood) AS qualityOfGood,\n' +
    '          SUM(qualityOfFine) AS qualityOfFine,\n' +
    '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
    "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
    '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '      FROM cast c JOIN melt t\n' +
    '          ON c.furnace = t.furnace\n' +
    '      ) j ON m.furnace = j.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-09-22T21:55:37.436] [ERROR] statistics - 查询直通率统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'field list'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfRatio (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:263:32)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  sql: 'SELECT\n' +
    '          j.caster,\n' +
    '          m.totalHeatNum,\n' +
    '          j.nozzleNum,\n' +
    '          j.lowHeatNum,\n' +
    '          j.zeroHeatNum,\n' +
    '          j.alloyTotalWeight,\n' +
    '          j.rawWeight,\n' +
    '          m.coilNetWeight,\n' +
    '          m.inPlanStoredWeight,\n' +
    '          m.outPlanStoredWeight,\n' +
    '          m.totalStoredWeight,\n' +
    '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          j.uselessRibbonWeight,\n' +
    '          j.meltOutWeight,\n' +
    '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
    '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
    '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
    '          m.qualityOfA,\n' +
    '          m.qualityOfB,\n' +
    '          m.qualityOfC,\n' +
    '          m.qualityOfD,\n' +
    '          m.qualityOfE,\n' +
    '          m.qualityOfGood,\n' +
    '          m.qualityOfFine,\n' +
    '          m.qualityOfNormal\n' +
    '        FROM\n' +
    '          (\n' +
    '            SELECT\n' +
    '            caster,\n' +
    '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    '            FROM measure\n' +
    '            GROUP BY caster\n' +
    '          ) AS m\n' +
    '          LEFT JOIN\n' +
    '          (\n' +
    '            SELECT\n' +
    '            c.caster,\n' +
    '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
    '            SUM(c.nozzleNum) AS nozzleNum,\n' +
    '            SUM(c.rawWeight) AS rawWeight,\n' +
    '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
    '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
    '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
    '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
    '            ) AS lowHeatNum,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE rawWeight = 0\n' +
    '            ) AS zeroHeatNum\n' +
    '            FROM cast AS c\n' +
    '            JOIN melt AS t\n' +
    '            ON c.furnace = t.furnace\n' +
    '            GROUP BY c.caster\n' +
    '          ) AS j\n' +
    '          ON m.caster = j.caster;',
  parameters: undefined
}
[2022-09-22T21:55:39.669] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfQuality (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:136:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17",
    sql: 'select j.*, m.* from\n' +
      '      (SELECT\n' +
      '          furnace,\n' +
      '          SUM(coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(qualityOfA) AS qualityOfA,\n' +
      '          SUM(qualityOfB) AS qualityOfB,\n' +
      '          SUM(qualityOfC) AS qualityOfC,\n' +
      '          SUM(qualityOfD) AS qualityOfD,\n' +
      '          SUM(qualityOfE) AS qualityOfE,\n' +
      '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '          SUM(qualityOfGood) AS qualityOfGood,\n' +
      '          SUM(qualityOfFine) AS qualityOfFine,\n' +
      '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '      FROM cast c JOIN melt t\n' +
      '          ON c.furnace = t.furnace\n' +
      '      ) j ON m.furnace = j.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17",
    sql: 'select j.*, m.* from\n' +
      '      (SELECT\n' +
      '          furnace,\n' +
      '          SUM(coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(qualityOfA) AS qualityOfA,\n' +
      '          SUM(qualityOfB) AS qualityOfB,\n' +
      '          SUM(qualityOfC) AS qualityOfC,\n' +
      '          SUM(qualityOfD) AS qualityOfD,\n' +
      '          SUM(qualityOfE) AS qualityOfE,\n' +
      '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '          SUM(qualityOfGood) AS qualityOfGood,\n' +
      '          SUM(qualityOfFine) AS qualityOfFine,\n' +
      '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '      FROM cast c JOIN melt t\n' +
      '          ON c.furnace = t.furnace\n' +
      '      ) j ON m.furnace = j.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'select j.*, m.* from\n' +
    '      (SELECT\n' +
    '          furnace,\n' +
    '          SUM(coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(qualityOfA) AS qualityOfA,\n' +
    '          SUM(qualityOfB) AS qualityOfB,\n' +
    '          SUM(qualityOfC) AS qualityOfC,\n' +
    '          SUM(qualityOfD) AS qualityOfD,\n' +
    '          SUM(qualityOfE) AS qualityOfE,\n' +
    '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
    '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
    '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
    '          SUM(qualityOfGood) AS qualityOfGood,\n' +
    '          SUM(qualityOfFine) AS qualityOfFine,\n' +
    '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
    "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
    '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '      FROM cast c JOIN melt t\n' +
    '          ON c.furnace = t.furnace\n' +
    '      ) j ON m.furnace = j.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-10-05T17:04:56.428] [ERROR] statistics - 查询直通率统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'field list'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfRatio (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:263:32)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  sql: 'SELECT\n' +
    '          j.caster,\n' +
    '          m.totalHeatNum,\n' +
    '          j.nozzleNum,\n' +
    '          j.lowHeatNum,\n' +
    '          j.zeroHeatNum,\n' +
    '          j.alloyTotalWeight,\n' +
    '          j.rawWeight,\n' +
    '          m.coilNetWeight,\n' +
    '          m.inPlanStoredWeight,\n' +
    '          m.outPlanStoredWeight,\n' +
    '          m.totalStoredWeight,\n' +
    '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          j.uselessRibbonWeight,\n' +
    '          j.meltOutWeight,\n' +
    '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
    '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
    '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
    '          m.qualityOfA,\n' +
    '          m.qualityOfB,\n' +
    '          m.qualityOfC,\n' +
    '          m.qualityOfD,\n' +
    '          m.qualityOfE,\n' +
    '          m.qualityOfGood,\n' +
    '          m.qualityOfFine,\n' +
    '          m.qualityOfNormal\n' +
    '        FROM\n' +
    '          (\n' +
    '            SELECT\n' +
    '            caster,\n' +
    '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    '            FROM measure\n' +
    '            GROUP BY caster\n' +
    '          ) AS m\n' +
    '          LEFT JOIN\n' +
    '          (\n' +
    '            SELECT\n' +
    '            c.caster,\n' +
    '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
    '            SUM(c.nozzleNum) AS nozzleNum,\n' +
    '            SUM(c.rawWeight) AS rawWeight,\n' +
    '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
    '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
    '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
    '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
    '            ) AS lowHeatNum,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE rawWeight = 0\n' +
    '            ) AS zeroHeatNum\n' +
    '            FROM cast AS c\n' +
    '            JOIN melt AS t\n' +
    '            ON c.furnace = t.furnace\n' +
    '            GROUP BY c.caster\n' +
    '          ) AS j\n' +
    '          ON m.caster = j.caster;',
  parameters: undefined
}
[2022-10-05T17:04:58.762] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfQuality (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:136:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17",
    sql: 'select j.*, m.* from\n' +
      '      (SELECT\n' +
      '          furnace,\n' +
      '          SUM(coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(qualityOfA) AS qualityOfA,\n' +
      '          SUM(qualityOfB) AS qualityOfB,\n' +
      '          SUM(qualityOfC) AS qualityOfC,\n' +
      '          SUM(qualityOfD) AS qualityOfD,\n' +
      '          SUM(qualityOfE) AS qualityOfE,\n' +
      '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '          SUM(qualityOfGood) AS qualityOfGood,\n' +
      '          SUM(qualityOfFine) AS qualityOfFine,\n' +
      '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '      FROM cast c JOIN melt t\n' +
      '          ON c.furnace = t.furnace\n' +
      '      ) j ON m.furnace = j.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOI' at line 17",
    sql: 'select j.*, m.* from\n' +
      '      (SELECT\n' +
      '          furnace,\n' +
      '          SUM(coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(qualityOfA) AS qualityOfA,\n' +
      '          SUM(qualityOfB) AS qualityOfB,\n' +
      '          SUM(qualityOfC) AS qualityOfC,\n' +
      '          SUM(qualityOfD) AS qualityOfD,\n' +
      '          SUM(qualityOfE) AS qualityOfE,\n' +
      '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '          SUM(qualityOfGood) AS qualityOfGood,\n' +
      '          SUM(qualityOfFine) AS qualityOfFine,\n' +
      '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '      FROM cast c JOIN melt t\n' +
      '          ON c.furnace = t.furnace\n' +
      '      ) j ON m.furnace = j.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'select j.*, m.* from\n' +
    '      (SELECT\n' +
    '          furnace,\n' +
    '          SUM(coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(qualityOfA) AS qualityOfA,\n' +
    '          SUM(qualityOfB) AS qualityOfB,\n' +
    '          SUM(qualityOfC) AS qualityOfC,\n' +
    '          SUM(qualityOfD) AS qualityOfD,\n' +
    '          SUM(qualityOfE) AS qualityOfE,\n' +
    '          SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
    '          SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
    '          SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '          SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '          SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
    '          SUM(qualityOfGood) AS qualityOfGood,\n' +
    '          SUM(qualityOfFine) AS qualityOfFine,\n' +
    '          SUM(qualityOfNormal) AS qualityOfNormal\n' +
    "      FROM measure furnace='' AND caster=''WHERE furnace='' AND caster=''  GROUP BY furnace) AS m LEFT JOIN (\n" +
    '          SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '      FROM cast c JOIN melt t\n' +
    '          ON c.furnace = t.furnace\n' +
    '      ) j ON m.furnace = j.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-10-05T17:05:02.545] [ERROR] statistics - 查询直通率统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'field list'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfRatio (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:263:32)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  sql: 'SELECT\n' +
    '          j.caster,\n' +
    '          m.totalHeatNum,\n' +
    '          j.nozzleNum,\n' +
    '          j.lowHeatNum,\n' +
    '          j.zeroHeatNum,\n' +
    '          j.alloyTotalWeight,\n' +
    '          j.rawWeight,\n' +
    '          m.coilNetWeight,\n' +
    '          m.inPlanStoredWeight,\n' +
    '          m.outPlanStoredWeight,\n' +
    '          m.totalStoredWeight,\n' +
    '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          j.uselessRibbonWeight,\n' +
    '          j.meltOutWeight,\n' +
    '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
    '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
    '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
    '          m.qualityOfA,\n' +
    '          m.qualityOfB,\n' +
    '          m.qualityOfC,\n' +
    '          m.qualityOfD,\n' +
    '          m.qualityOfE,\n' +
    '          m.qualityOfGood,\n' +
    '          m.qualityOfFine,\n' +
    '          m.qualityOfNormal\n' +
    '        FROM\n' +
    '          (\n' +
    '            SELECT\n' +
    '            caster,\n' +
    '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    '            FROM measure\n' +
    '            GROUP BY caster\n' +
    '          ) AS m\n' +
    '          LEFT JOIN\n' +
    '          (\n' +
    '            SELECT\n' +
    '            c.caster,\n' +
    '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
    '            SUM(c.nozzleNum) AS nozzleNum,\n' +
    '            SUM(c.rawWeight) AS rawWeight,\n' +
    '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
    '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
    '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
    '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
    '            ) AS lowHeatNum,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE rawWeight = 0\n' +
    '            ) AS zeroHeatNum\n' +
    '            FROM cast AS c\n' +
    '            JOIN melt AS t\n' +
    '            ON c.furnace = t.furnace\n' +
    '            GROUP BY c.caster\n' +
    '          ) AS j\n' +
    '          ON m.caster = j.caster;',
  parameters: undefined
}
[2022-10-06T00:13:06.430] [ERROR] statistics - 查询直通率统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'field list'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfRatio (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:263:32)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'field list'",
    sql: 'SELECT\n' +
      '          j.caster,\n' +
      '          m.totalHeatNum,\n' +
      '          j.nozzleNum,\n' +
      '          j.lowHeatNum,\n' +
      '          j.zeroHeatNum,\n' +
      '          j.alloyTotalWeight,\n' +
      '          j.rawWeight,\n' +
      '          m.coilNetWeight,\n' +
      '          m.inPlanStoredWeight,\n' +
      '          m.outPlanStoredWeight,\n' +
      '          m.totalStoredWeight,\n' +
      '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          j.uselessRibbonWeight,\n' +
      '          j.meltOutWeight,\n' +
      '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
      '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
      '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
      '          m.qualityOfA,\n' +
      '          m.qualityOfB,\n' +
      '          m.qualityOfC,\n' +
      '          m.qualityOfD,\n' +
      '          m.qualityOfE,\n' +
      '          m.qualityOfGood,\n' +
      '          m.qualityOfFine,\n' +
      '          m.qualityOfNormal\n' +
      '        FROM\n' +
      '          (\n' +
      '            SELECT\n' +
      '            caster,\n' +
      '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      '            FROM measure\n' +
      '            GROUP BY caster\n' +
      '          ) AS m\n' +
      '          LEFT JOIN\n' +
      '          (\n' +
      '            SELECT\n' +
      '            c.caster,\n' +
      '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
      '            SUM(c.nozzleNum) AS nozzleNum,\n' +
      '            SUM(c.rawWeight) AS rawWeight,\n' +
      '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
      '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
      '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
      '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
      '            ) AS lowHeatNum,\n' +
      '            (\n' +
      '                SELECT COUNT(*)\n' +
      '                FROM cast\n' +
      '                WHERE rawWeight = 0\n' +
      '            ) AS zeroHeatNum\n' +
      '            FROM cast AS c\n' +
      '            JOIN melt AS t\n' +
      '            ON c.furnace = t.furnace\n' +
      '            GROUP BY c.caster\n' +
      '          ) AS j\n' +
      '          ON m.caster = j.caster;',
    parameters: undefined
  },
  sql: 'SELECT\n' +
    '          j.caster,\n' +
    '          m.totalHeatNum,\n' +
    '          j.nozzleNum,\n' +
    '          j.lowHeatNum,\n' +
    '          j.zeroHeatNum,\n' +
    '          j.alloyTotalWeight,\n' +
    '          j.rawWeight,\n' +
    '          m.coilNetWeight,\n' +
    '          m.inPlanStoredWeight,\n' +
    '          m.outPlanStoredWeight,\n' +
    '          m.totalStoredWeight,\n' +
    '          (m.coilNetWeight-m.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          j.uselessRibbonWeight,\n' +
    '          j.meltOutWeight,\n' +
    '          (j.rawWeight+j.uselessRibbonWeight)/j.alloyTotalWeight AS effectiveMeltRatio,\n' +
    '          j.rawWeight/(j.rawWeight+j.uselessRibbonWeight) AS rollRatio,\n' +
    '          m.totalStoredWeight/j.rawWeight AS qualifiedRatio,\n' +
    '          m.qualityOfA,\n' +
    '          m.qualityOfB,\n' +
    '          m.qualityOfC,\n' +
    '          m.qualityOfD,\n' +
    '          m.qualityOfE,\n' +
    '          m.qualityOfGood,\n' +
    '          m.qualityOfFine,\n' +
    '          m.qualityOfNormal\n' +
    '        FROM\n' +
    '          (\n' +
    '            SELECT\n' +
    '            caster,\n' +
    '            COUNT(DISTINCT furnace) AS totalHeatNum,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    '            FROM measure\n' +
    '            GROUP BY caster\n' +
    '          ) AS m\n' +
    '          LEFT JOIN\n' +
    '          (\n' +
    '            SELECT\n' +
    '            c.caster,\n' +
    '            SUM(t.alloyTotalWeight) AS alloyTotalWeight,\n' +
    '            SUM(c.nozzleNum) AS nozzleNum,\n' +
    '            SUM(c.rawWeight) AS rawWeight,\n' +
    '            SUM(c.uselessRibbonWeight) AS uselessRibbonWeight,\n' +
    '            SUM(c.meltOutWeight) AS meltOutWeight,\n' +
    '            SUM(c.rawWeight+c.uselessRibbonWeight)/SUM(t.alloyTotalWeight) AS effectiveMeltRatio,\n' +
    '            SUM(c.rawWeight)/SUM(c.rawWeight+c.uselessRibbonWeight) AS rollRatio,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE (rawWeight <= 50 AND castId = 7) OR (rawWeight <= 80 AND castId IN (6,8,9))\n' +
    '            ) AS lowHeatNum,\n' +
    '            (\n' +
    '                SELECT COUNT(*)\n' +
    '                FROM cast\n' +
    '                WHERE rawWeight = 0\n' +
    '            ) AS zeroHeatNum\n' +
    '            FROM cast AS c\n' +
    '            JOIN melt AS t\n' +
    '            ON c.furnace = t.furnace\n' +
    '            GROUP BY c.caster\n' +
    '          ) AS j\n' +
    '          ON m.caster = j.caster;',
  parameters: undefined
}
[2022-10-29T12:25:57.685] [ERROR] measure - 查询检测记录失败 Error: 机组：06，日期：2020-10-09， 缺少生产计划，请联系生产计划管理员添加计划
    at queryMeasureData (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/measure.js:403:17)
[2022-10-29T12:28:00.052] [ERROR] measure - 查询检测记录失败 Error: 机组：06，日期：2020-10-09， 缺少生产计划，请联系生产计划管理员添加计划
    at queryMeasureData (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/measure.js:403:17)
[2022-10-30T23:41:23.905] [ERROR] measure - 查询检测记录失败 Error: 机组：06，日期：2020-10-09， 缺少生产计划，请联系生产计划管理员添加计划
    at queryMeasureData (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/measure.js:403:17)
[2022-11-14T21:58:24.528] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'where clause'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:472:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-08 00:00:00' AND '2022-11-14 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-08 00:00:00' AND '2022-11-14 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'select j.*, m.* from\n' +
    '        (SELECT\n' +
    '            furnace,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
    '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-08 00:00:00' AND '2022-11-14 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
    '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '            ON c.furnace = t.furnace\n' +
    '        ) j ON m.furnace = j.furnace\n' +
    '        LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-15T23:37:31.818] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'where clause'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:472:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-09 00:00:00' AND '2022-11-15 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-09 00:00:00' AND '2022-11-15 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'select j.*, m.* from\n' +
    '        (SELECT\n' +
    '            furnace,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
    '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-09 00:00:00' AND '2022-11-15 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
    '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '            ON c.furnace = t.furnace\n' +
    '        ) j ON m.furnace = j.furnace\n' +
    '        LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-15T23:46:48.279] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'where clause'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:472:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-09 00:00:00' AND '2022-11-15 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-09 00:00:00' AND '2022-11-15 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'select j.*, m.* from\n' +
    '        (SELECT\n' +
    '            furnace,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
    '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-09 00:00:00' AND '2022-11-15 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
    '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '            ON c.furnace = t.furnace\n' +
    '        ) j ON m.furnace = j.furnace\n' +
    '        LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-16T20:22:03.782] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'caster' in 'where clause'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:472:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-10 00:00:00' AND '2022-11-16 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Unknown column 'caster' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'caster' in 'where clause'",
    sql: 'select j.*, m.* from\n' +
      '        (SELECT\n' +
      '            furnace,\n' +
      '            SUM(coilNetWeight) AS coilNetWeight,\n' +
      '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
      '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
      '            SUM(qualityOfA) AS qualityOfA,\n' +
      '            SUM(qualityOfB) AS qualityOfB,\n' +
      '            SUM(qualityOfC) AS qualityOfC,\n' +
      '            SUM(qualityOfD) AS qualityOfD,\n' +
      '            SUM(qualityOfE) AS qualityOfE,\n' +
      '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
      '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
      '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
      '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
      '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
      '            SUM(qualityOfGood) AS qualityOfGood,\n' +
      '            SUM(qualityOfFine) AS qualityOfFine,\n' +
      '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
      "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-10 00:00:00' AND '2022-11-16 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
      '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '            ON c.furnace = t.furnace\n' +
      '        ) j ON m.furnace = j.furnace\n' +
      '        LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'select j.*, m.* from\n' +
    '        (SELECT\n' +
    '            furnace,\n' +
    '            SUM(coilNetWeight) AS coilNetWeight,\n' +
    '            SUM(totalStoredWeight) AS totalStoredWeight,\n' +
    '            SUM(coilNetWeight-totalStoredWeight) AS unqualifiedWeight,\n' +
    '            SUM(qualityOfA) AS qualityOfA,\n' +
    '            SUM(qualityOfB) AS qualityOfB,\n' +
    '            SUM(qualityOfC) AS qualityOfC,\n' +
    '            SUM(qualityOfD) AS qualityOfD,\n' +
    '            SUM(qualityOfE) AS qualityOfE,\n' +
    '            SUM(thinRibbonWeight) AS thinRibbonWeight,\n' +
    '            SUM(highFactorThinRibbonWeight) AS highFactorThinRibbonWeight,\n' +
    '            SUM(inPlanStoredWeight) AS inPlanStoredWeight,\n' +
    '            SUM(outPlanStoredWeight) AS outPlanStoredWeight,\n' +
    '            SUM(inPlanThickRibbonWeight) AS inPlanThickRibbonWeight,\n' +
    '            SUM(qualityOfGood) AS qualityOfGood,\n' +
    '            SUM(qualityOfFine) AS qualityOfFine,\n' +
    '            SUM(qualityOfNormal) AS qualityOfNormal\n' +
    "        FROM measure WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-10 00:00:00' AND '2022-11-16 23:59:59'  GROUP BY furnace) AS m LEFT JOIN (\n" +
    '            SELECT c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '            ON c.furnace = t.furnace\n' +
    '        ) j ON m.furnace = j.furnace\n' +
    '        LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:06:59.634] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
          /* 低端带材 */
          SUM(IF(storag' at line 11
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:519:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            /* 低端带材 */
            SUM(IF(storag' at line 11
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      '          /* 低端带材 */\n' +
      "          SUM(IF(storag' at line 11",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          /* 倒卷净重 */\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          /* 检测的合格重量，理论合格重量 */\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          /* 检测的不合格重量，理论不合格重量 */\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          /* 库房的入库，实际合格重量 */\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          /* 低端带材 */\n' +
      '          SUM(IF(storage.isLowQualified > 0, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            /* 低端带材 */
            SUM(IF(storag' at line 11
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      '          /* 低端带材 */\n' +
      "          SUM(IF(storag' at line 11",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          /* 倒卷净重 */\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          /* 检测的合格重量，理论合格重量 */\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          /* 检测的不合格重量，理论不合格重量 */\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          /* 库房的入库，实际合格重量 */\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          /* 低端带材 */\n' +
      '          SUM(IF(storage.isLowQualified > 0, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          furnace,\n' +
    '          /* 倒卷净重 */\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          /* 检测的合格重量，理论合格重量 */\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          /* 检测的不合格重量，理论不合格重量 */\n' +
    '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          /* 库房的入库，实际合格重量 */\n' +
    '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
    '          /* 低端带材 */\n' +
    '          SUM(IF(storage.isLowQualified > 0, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:08:57.190] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
          SUM(IF(storage.isLowQualified > 0, storage' at line 7
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(IF(storage.isLowQualified > 0, storage' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(IF(storage.isLowQualified > 0, storage' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(IF(storage.isLowQualified > 0, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(IF(storage.isLowQualified > 0, storage' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(IF(storage.isLowQualified > 0, storage' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(IF(storage.isLowQualified > 0, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
    '          SUM(IF(storage.isLowQualified > 0, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:15:26.968] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
          SUM(IF(storage.isLowQualified=1, storage.c' at line 7
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(IF(storage.isLowQualified=1, storage.c' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(IF(storage.isLowQualified=1, storage.c' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(IF(storage.isLowQualified=1, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(IF(storage.isLowQualified=1, storage.c' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(IF(storage.isLowQualified=1, storage.c' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(IF(storage.isLowQualified=1, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
    '          SUM(IF(storage.isLowQualified=1, storage.coilNetWeight, 0)) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:38:36.141] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
          SUM(CASE WHEN torage.isLowQualified=1 THEN' at line 7
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(CASE WHEN torage.isLowQualified=1 THEN' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(CASE WHEN torage.isLowQualified=1 THEN' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN torage.isLowQualified=1 THEN orage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(CASE WHEN torage.isLowQualified=1 THEN' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(CASE WHEN torage.isLowQualified=1 THEN' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN torage.isLowQualified=1 THEN orage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
    '          SUM(CASE WHEN torage.isLowQualified=1 THEN orage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:39:42.550] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
          SUM(CASE WHEN storage.isLowQualified=1 THE' at line 7
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(CASE WHEN storage.isLowQualified=1 THE' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(CASE WHEN storage.isLowQualified=1 THE' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,
            SUM(CASE WHEN storage.isLowQualified=1 THE' at line 7
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_PARSE_ERROR',
    errno: 1064,
    sqlState: '42000',
    sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS actualTotalStoredWeight,\n" +
      "          SUM(CASE WHEN storage.isLowQualified=1 THE' at line 7",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight AS actualTotalStoredWeight,\n' +
    '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:40:37.100] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Column 'furnace' in field list is ambiguous
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Column 'furnace' in field list is ambiguous
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_NON_UNIQ_ERROR',
    errno: 1052,
    sqlState: '23000',
    sqlMessage: "Column 'furnace' in field list is ambiguous",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Column 'furnace' in field list is ambiguous
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_NON_UNIQ_ERROR',
    errno: 1052,
    sqlState: '23000',
    sqlMessage: "Column 'furnace' in field list is ambiguous",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
    '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:42:11.225] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'mmeasure.totalStoredWeight' in 'field list'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'mmeasure.totalStoredWeight' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'mmeasure.totalStoredWeight' in 'field list'",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          measure.furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Unknown column 'mmeasure.totalStoredWeight' in 'field list'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'mmeasure.totalStoredWeight' in 'field list'",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          measure.furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          measure.furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-mmeasure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
    '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:42:44.504] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Column 'furnace' in where clause is ambiguous
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Column 'furnace' in where clause is ambiguous
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_NON_UNIQ_ERROR',
    errno: 1052,
    sqlState: '23000',
    sqlMessage: "Column 'furnace' in where clause is ambiguous",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          measure.furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-measure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Column 'furnace' in where clause is ambiguous
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_NON_UNIQ_ERROR',
    errno: 1052,
    sqlState: '23000',
    sqlMessage: "Column 'furnace' in where clause is ambiguous",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          measure.furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-measure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          measure.furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-measure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
    '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    "        WHERE furnace='' AND caster='' AND castId in (6) AND createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-19T23:51:54.045] [ERROR] statistics - 查询带材质量统计失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'a.castId' in 'where clause'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfInputOuput (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:514:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'a.castId' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'a.castId' in 'where clause'",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          measure.furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-measure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.createTime, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      "      WHERE a.furnace='' AND b.caster='' AND a.castId in (6) AND b.createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  original: Error: Unknown column 'a.castId' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'a.castId' in 'where clause'",
    sql: 'SELECT a.*, b.* \n' +
      '      FROM \n' +
      '      (\n' +
      '        SELECT \n' +
      '          measure.furnace,\n' +
      '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
      '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
      '          SUM(measure.coilNetWeight-measure.totalStoredWeight) AS unqualifiedWeight,\n' +
      '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
      '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
      '        FROM measure\n' +
      '        LEFT JOIN storage\n' +
      '        ON measure.furnace=storage.furnace\n' +
      '        GROUP BY measure.furnace\n' +
      '      ) AS a\n' +
      '      LEFT JOIN\n' +
      '      (\n' +
      '        SELECT \n' +
      '          c.castId, c.createTime, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
      '        FROM cast c JOIN melt t\n' +
      '        ON c.furnace = t.furnace\n' +
      '      ) AS b\n' +
      '      ON a.furnace=b.furnace\n' +
      "      WHERE a.furnace='' AND b.caster='' AND a.castId in (6) AND b.createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
      '      LIMIT 20 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT a.*, b.* \n' +
    '      FROM \n' +
    '      (\n' +
    '        SELECT \n' +
    '          measure.furnace,\n' +
    '          SUM(measure.coilNetWeight) AS coilNetWeight,\n' +
    '          SUM(measure.totalStoredWeight) AS totalStoredWeight,\n' +
    '          SUM(measure.coilNetWeight-measure.totalStoredWeight) AS unqualifiedWeight,\n' +
    '          SUM(storage.totalStoredWeight) AS actualTotalStoredWeight,\n' +
    '          SUM(CASE WHEN storage.isLowQualified=1 THEN storage.isLowQualified ELSE 0 END) AS lowQualifiedWeight\n' +
    '        FROM measure\n' +
    '        LEFT JOIN storage\n' +
    '        ON measure.furnace=storage.furnace\n' +
    '        GROUP BY measure.furnace\n' +
    '      ) AS a\n' +
    '      LEFT JOIN\n' +
    '      (\n' +
    '        SELECT \n' +
    '          c.castId, c.createTime, c.furnace, c.ribbonTypeName, c.ribbonWidth, c.caster, c.rawWeight, c.meltOutWeight, c.uselessRibbonWeight, t.alloyTotalWeight\n' +
    '        FROM cast c JOIN melt t\n' +
    '        ON c.furnace = t.furnace\n' +
    '      ) AS b\n' +
    '      ON a.furnace=b.furnace\n' +
    "      WHERE a.furnace='' AND b.caster='' AND a.castId in (6) AND b.createTime BETWEEN '2022-11-13 00:00:00' AND '2022-11-19 23:59:59'\n" +
    '      LIMIT 20 OFFSET 0',
  parameters: undefined
}
[2022-11-27T22:42:17.262] [ERROR] statistics - 查询重卷重量失败 DatabaseError [SequelizeDatabaseError]: Unknown column 'b.createTime' in 'where clause'
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfRollWeightByRoller (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:572:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Unknown column 'b.createTime' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'b.createTime' in 'where clause'",
    sql: 'SELECT m.rollerName, SUM(m.coilNetWeight) AS netWeight \n' +
      '      FROM measure m\n' +
      '      LEFT JOIN cast c \n' +
      '      ON m.furnace=c.furnace\n' +
      "      WHERE b.createTime BETWEEN '2020-11-08T16:00:00.000Z' AND '2020-11-16T15:59:59.000Z'\n" +
      '      GROUP BY m.rollerName',
    parameters: undefined
  },
  original: Error: Unknown column 'b.createTime' in 'where clause'
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'b.createTime' in 'where clause'",
    sql: 'SELECT m.rollerName, SUM(m.coilNetWeight) AS netWeight \n' +
      '      FROM measure m\n' +
      '      LEFT JOIN cast c \n' +
      '      ON m.furnace=c.furnace\n' +
      "      WHERE b.createTime BETWEEN '2020-11-08T16:00:00.000Z' AND '2020-11-16T15:59:59.000Z'\n" +
      '      GROUP BY m.rollerName',
    parameters: undefined
  },
  sql: 'SELECT m.rollerName, SUM(m.coilNetWeight) AS netWeight \n' +
    '      FROM measure m\n' +
    '      LEFT JOIN cast c \n' +
    '      ON m.furnace=c.furnace\n' +
    "      WHERE b.createTime BETWEEN '2020-11-08T16:00:00.000Z' AND '2020-11-16T15:59:59.000Z'\n" +
    '      GROUP BY m.rollerName',
  parameters: undefined
}
[2022-11-27T22:55:52.278] [ERROR] statistics - 查询重卷重量失败 ReferenceError: current is not defined
    at queryDataOfRollWeightByRoller (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:578:30)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7
[2022-11-27T22:56:32.140] [ERROR] statistics - 查询重卷重量失败 DatabaseError [SequelizeDatabaseError]: Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'daicai.m.rollerName' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by
    at Query.formatError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:244:16)
    at Query.handler [as onResult] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:51:23)
    at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:30:14)
    at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
    at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
    at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
    at Socket.emit (events.js:314:20)
    at addChunk (_stream_readable.js:297:12)
    at readableAddChunk (_stream_readable.js:272:9)
    at Socket.Readable.push (_stream_readable.js:213:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)
From previous event:
    at Query.run (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/dialects/mysql/query.js:39:12)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:29
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:655:12
    at processImmediate (internal/timers.js:461:21)
From previous event:
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:651:10
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:70:21
    at new Promise (<anonymous>)
    at retryAsPromised (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/retry-as-promised/index.js:60:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:641:30
From previous event:
    at Sequelize.query (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/sequelize/lib/sequelize.js:590:23)
    at queryDataOfRollWeightByRoller (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:580:34)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:174:3)
    at router (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:47:12)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at checkLogin (/Users/zhanghaiquan/Documents/my/amorphous_node/middleware/checkLogin.js:9:5)
    at Layer.handle [as handle_request] (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:317:13)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:284:7
    at Function.process_params (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:335:12)
    at next (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express/lib/router/index.js:275:10)
    at /Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/express-session/index.js:502:7 {
  parent: Error: Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'daicai.m.rollerName' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_WRONG_FIELD_WITH_GROUP',
    errno: 1055,
    sqlState: '42000',
    sqlMessage: "Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'daicai.m.rollerName' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by",
    sql: 'SELECT m.furnace, m.rollerName, SUM(m.coilNetWeight) AS totalCoilNetWeight \n' +
      '      FROM measure m\n' +
      '      LEFT JOIN cast c \n' +
      '      ON m.furnace=c.furnace\n' +
      "      WHERE c.createTime BETWEEN '2021-06-06 00:00:00' AND '2021-06-07 23:59:59' \n" +
      '      GROUP BY m.furnace\n' +
      '      LIMIT 100 OFFSET 0',
    parameters: undefined
  },
  original: Error: Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'daicai.m.rollerName' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by
      at Packet.asError (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packets/packet.js:708:17)
      at Query.execute (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/commands/command.js:28:26)
      at Connection.handlePacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:408:32)
      at PacketParser.onPacket (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:70:12)
      at PacketParser.executeStart (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/Users/zhanghaiquan/Documents/my/amorphous_node/node_modules/mysql2/lib/connection.js:77:25)
      at Socket.emit (events.js:314:20)
      at addChunk (_stream_readable.js:297:12)
      at readableAddChunk (_stream_readable.js:272:9)
      at Socket.Readable.push (_stream_readable.js:213:10)
      at TCP.onStreamRead (internal/stream_base_commons.js:188:23) {
    code: 'ER_WRONG_FIELD_WITH_GROUP',
    errno: 1055,
    sqlState: '42000',
    sqlMessage: "Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'daicai.m.rollerName' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by",
    sql: 'SELECT m.furnace, m.rollerName, SUM(m.coilNetWeight) AS totalCoilNetWeight \n' +
      '      FROM measure m\n' +
      '      LEFT JOIN cast c \n' +
      '      ON m.furnace=c.furnace\n' +
      "      WHERE c.createTime BETWEEN '2021-06-06 00:00:00' AND '2021-06-07 23:59:59' \n" +
      '      GROUP BY m.furnace\n' +
      '      LIMIT 100 OFFSET 0',
    parameters: undefined
  },
  sql: 'SELECT m.furnace, m.rollerName, SUM(m.coilNetWeight) AS totalCoilNetWeight \n' +
    '      FROM measure m\n' +
    '      LEFT JOIN cast c \n' +
    '      ON m.furnace=c.furnace\n' +
    "      WHERE c.createTime BETWEEN '2021-06-06 00:00:00' AND '2021-06-07 23:59:59' \n" +
    '      GROUP BY m.furnace\n' +
    '      LIMIT 100 OFFSET 0',
  parameters: undefined
}
[2022-11-27T23:20:27.823] [ERROR] user - 密码错误 Error: 密码错误
    at login (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/user.js:244:15)
[2022-11-27T23:20:35.585] [ERROR] user - 密码错误 Error: 密码错误
    at login (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/user.js:244:15)
[2022-11-27T23:24:03.086] [ERROR] statistics - 查询重卷重量失败 ReferenceError: key is not defined
    at /Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:579:20
    at Array.map (<anonymous>)
    at queryDataOfRollWeightByRoller (/Users/zhanghaiquan/Documents/my/amorphous_node/controller/statistics.js:576:19)
