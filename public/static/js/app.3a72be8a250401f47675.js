webpackJsonp([1],{"1EWY":function(e,t){},"37Hs":function(e,t){},"57G3":function(e,t){},"8j6j":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALwklEQVR4Xu2dzctdVxXGnyeGjCqOHIjgKJhYRcHiwLyS1450UgcORDAESURB82aiTvxImjpxUIWEBD+goDQpCAUHzhwE2nw5SaA4aIWO8hcUEhwodcnWG3wtSe9Z65x9ztpnP3eatfde+7fWj/vmcu86hF4iIAJPJECxEQEReDIBCaLuEIH3ISBB1B4iIEHUAyIQI6B3kBg3reqEgATppNC6ZoyABIlx06pOCEiQTgqta8YISJAYN63qhIAE6aTQumaMwChBzOxjAL4DYAfAMwCeiqWhVSIwKYEHAO4BuAXgNyTvR3cPC2JmJwC8BOBQ9HCtE4EZCPwDwCmS1yJnhQQxs10A1wEciByqNSIwM4F/AThOsryjuF5uQczsAwDeAnDYdZKCRWBZAm8DOEKyyDL4FRHkCwBuDD5BgSKQh8AOyduedCKCnAVw0XOIYkUgCYE9kpc9uUQEeR7Aec8hihWBJASeJ3nBk0tEkHLAOc8hihWBJAQkSJJCKI2cBCRIzrooqyQEJEiSQiiNnAQkSM66KKskBCRIkkIojZwEJEjOuiirJAQkSJJCKI2cBCRIzrooqyQEJEiSQiiNnAQkSM66KKskBCRIkkIojZwEJEjOuiirJAQkSJJCKI2cBGYRRF93z1l8ZbWdwHmSL2wP+19E5OvuewAueQ5RrAgkIXCG5BVPLhFByoifm55DFCsCSQgcI3nHk0tEEA1t8BBWbBYCZWjDUZLvehJyC1I2N7MyuOE1jf3xoFbsggTKJJNdku6/fEKCbCQ5uRkcd3DBi+toEdhGoAyOO03y6rbAx/17WJCNJBo9GqGuNbUJPARwd9HRo7VvqP1FIAOBUe8gGS6gHESgJgEJUpOu9m6egARpvoS6QE0CEqQmXe3dPAEJ0nwJdYGaBCRITbrau3kCEqT5EuoCNQlIkJp0tXfzBCRI8yXUBWoSkCA16Wrv5glIkOZLqAvUJCBBatLV3s0TkCDNl1AXqElAgtSkq72bJyBBmi+hLlCTgASpSVd7N09AgjRfwvkvYGZfBvAcgKc3p78B4NXIb77nz953ogTx8eo62sw+B+B3+8R4L4+fA/gxyTIkYRUvCbKKMta/hJl9GsDrAD605bRXAXzdO16n/g1iJ0iQGLfuVpnZdQDPDrz4aiSRIAMr3nOYmR0F8KaTwSokGSWImWnsj7NrRoQ/AHBvilE23hzM7ASAl73ryn/cW/9zKyzIBtpLAA4FwGnJOAJlGNopktfGbTNstZn9FIBrKvq+nZuWJCSIme0CKH+THhiGWFEVCJRPio6TvFVh7//b0swuADg34pxmJXELYmYaXj2iUyZeWgYyH6n9seoEgpRrNylJRJAyuPrGxIXWdnECOyRvx5dvXzmRIE1KEhHkLICL27EqYiYCeyQv1zxrQkGakyQiiB7BVrMb/Xu7n7vnPWJiQZqSJCLI2P+weeuj+Pcn0KIgzUgiQdrXr1VBmpBEgkiQrQQq/Im1/8zUn25JkK3tkT6g5XeQR3DTSiJB0vf/1gTXIEjaP7ckyNb+Sx+wFkFSSiJB0vf/1gTXJEg6SSTI1v5LH7A2QVJJIkHS9//WBNcoSBpJJMjW/ksfsFZBUkgiQdL3/9YE1yzI4pJIkK39lz5g7YIsKokESd//WxPsQZDFJJEgW/svfUAvgiwiSUQQfd09lzPnSUZ/Lz7oJpW/izUoh31Bs34tJSLIHoBL3lspvhqBMySvVNsdQDJBZn0niQiyA+BmzYJobxeBYyTvuFY4gxMKMpskEUE0tMHZYBXDy9CGo7XHfCYVZBZJ3IKUrMysDG54TWN/Krb+9q3L2J/dOSaqJxakuiQhQTaSnARQBscd3F5LRUxMoAyOO03y6sT7Pna75IJUlSQsyEYSjR6do0P/e8ZDAHcXGj3awhyCKp9ujRJkvt7QSUsSaOAd5BGeySWRIEt2XiNnNyTI5H9uSZBGmnTJNBsTZFJJJMiSndfI2Q0KMpkkEqSRJl0yzUYFmUQSCbJk5zVydsOCjJZEgjTSpEum2bggBd3vSX4zwlCCRKh1tmYFgpSKfYXkn7ylkyBeYh3Gr0SQ+wAOk/ynp4QSxEOr09iVCFKq90WS5TuEg18SZDCqfgNXJMgPSP7CU0kJ4qHVaeyKBPkhyRc9ZZQgHlqdxq5IkK+S/KOnjBLEQ6vT2JUI8ncAHyX5jqeMEsRDq9PYlQjyfZK/9JZQgniJdRi/AkFeIfmNSOkkSIRaZ2saF2TUb0QkSGfNHrluw4KMkqOwkiCRjulsTaOCjJZDgnTW6NHrNijIJHJIkGjHdLauMUEmk0OCdNbo0es2JMikcowWxMw09ifadf51DwDc09ifJ4KbXI5RgpjZic3guEP+WmvFSAJlcNwpktdG7jNoeQPvIFXkCAtiZrsArmv06KD+qhVURo8eJ3mr1gGP9k0uSDU5QoKYmYZX1+7I4fuX4dVHSBZZqr0SC1JVjqggZXD1jWrV0MZeAjskb3sXeeKTClJdjqggZwFc9ABWbFUCeyQv1zwhoSCzyBEVRI9gq9mN/r17ekZhoTObHFFBWpj07W+zdlf0JMisckiQdqXYn3kvgswuhwSRIIMIJPg/yCJySJBB7ZE+aO3vIIvJIUHS9/6gBNcsyKJySJBB/Zc+aK2CLC6HBEnf+4MSXKMgKeSQIIP6L33Q2gRJI4cESd/7gxJckyCp5JAgg/ovfdBaBEknhwRJ3/uDElyDICnlkCCD+i99UOuCpJVDgqTv/UEJtixIajkkyKD+Sx/UqiDp5YgKoq+753LmPMkXaqZU4btYTcgRFWQPwKWaBdHeLgJnSF5xrXAGTyxIM3JEBdkBcNPJWOH1CBwjeafe9sCEgjQlR1QQDW2o2Y2+vcvQhqMk3/Ut80VPJEhzcoQEKYvMrAxuKE8LPeBDregJCZRJJrskq7+bTyBIk3KEBdlIcnIzOO7ghEXXVsMIlMFxp0leHRY+LsrMfgLgZ8FdmpVjlCAbSTR6NNg1gWUPAdxdaPRoeTpTRMam5RgtSKDIWtIgATM7AuAtZ+rNyyFBnBXvOdzM/gDgawMZrEIOCTKw2gr7zwczHwbwBoCPbOGxGjkkiDrfRcDMPgPgFQBPP2ZheTzDjwBcIWmujRMH6xmFiYuTNTUz+xKA5wB8snzqD+DPAH5N8p2sOUfzkiBRclrXBQEJ0kWZdckoAQkSJad1XRCQIF2UWZeMEpAgUXJa1wUBCdJFmXXJKAEJEiWndV0QkCBdlFmXjBKQIFFyWtcFAQnSRZl1ySgBCRIlp3VdEJAgXZRZl4wSkCBRclrXBQEJ0kWZdckoAQkSJad1XRCQIF2UWZeMEpAgUXJa1wWBUYKYWRn7820AZZDcMwCe6oKaLpmdQPn5773NiNzfkrwfTTgsiJmd2AyOOxQ9XOtEYAYCZcjet0i+HDkrJIiZlQHWr2v0aAS51ixAoIxpPU7ylvdstyBmVoZX/xXAJ7yHKV4EFiTwJoBPkSyyDH5FBDm2GX85+BAFikASAp8n+RdPLhFB9AAdD2HFZiLgfthQRBA9gi1TyZWLh4D7cXURQS4AOOfJSrEikISA+4GnEiRJ5ZTGLAQkyCyYdUirBCRIq5VT3rMQkCCzYNYhrRKQIK1WTnnPQkCCzIJZh7RKQIK0WjnlPQsBCTILZh3SKgEJ0mrllPcsBCTILJh1SKsEJEirlVPesxCQILNg1iGtEpAgrVZOec9CYBZB9HX3WWqpQyoQmOXr7t8DcLlC8tpSBGoT+C7JX3kOiXzdXT+59RBWbCYCs/zk9gCAvwE4nOnmykUEthB4G8DHSZqHlPsdpGyusT8exIpNQGC+sT+PLqvBcQnKrhSGECiD406RvDYk+L0xoXeQfZLsHz36WQAfjCShNSIwMYHlR49OfCFtJwIpCYx6B0l5IyUlAhMSkCATwtRW6yMgQdZXU91oQgISZEKY2mp9BCTI+mqqG01IQIJMCFNbrY+ABFlfTXWjCQlIkAlhaqv1EZAg66upbjQhAQkyIUxttT4C/wZF72sFzhXJEAAAAABJRU5ErkJggg=="},"8mCT":function(e,t){},AjiZ:function(e,t){},CdUV:function(e,t){},DKwE:function(e,t){},F7Js:function(e,t){},Ffd9:function(e,t){},HZ6f:function(e,t){},HyE9:function(e,t){},IZkC:function(e,t){},"L+Pg":function(e,t){},LKNU:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),l=(a("uMhA"),a("zL8q")),r=a.n(l),n=(a("L+Pg"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var o=a("VU/8")({name:"App"},n,!1,function(e){a("WLiy")},null,null).exports,s=a("/ocq"),c="/user/login",b="/user/signout",u="/plan",d="/plan",m="/plan",p="/plan",h="/plan/export",g="/ribbonType",v="/ribbonType",f="/ribbonType",_="/ribbonType",T="/user",k="/user",w="/user",y="/user",x="/melt",L="/melt",D="/melt",F="/melt",C="/melt/export",S="/cast",I="/cast",N="/cast",W="/cast",E="/measure",A="/measure",R="/measure",$="/measure",O="/measure/exportmeasure",B="/measure/exportroll",q="/storage",z="/storage",j="/storage",J="/storage/exportstorage",H="/storage/uploadstorage",V="/returnGoods",M="/returnGoods",Q="/ribbonWidth",P="/ribbonWidth",U="/ribbonWidth",K="/ribbonWidth",Z="/ribbonThicknessLevel",X="/ribbonThicknessLevel",G="/ribbonThicknessLevel",Y="/ribbonThicknessLevel",ee="/ribbonToughnessLevel",te="/ribbonToughnessLevel",ae="/ribbonToughnessLevel",ie="/ribbonToughnessLevel",le="/laminationLevel",re="/laminationLevel",ne="/laminationLevel",oe="/laminationLevel",se="/clients",ce="/clients",be="/clients",ue="/clients",de="/appearenceLevel",me="/appearenceLevel",pe="/appearenceLevel",he="/appearenceLevel",ge="/statistics/quality",ve="/statistics/ratio",fe={name:"layout",data:function(){var e=this;return{isCollapse:!1,mgleft:"180px",isDisabled:!1,username:"",adminname:"",roleId:null,loading:!1,dialogVisible:!1,formData:{password:"",newPassword:"",newPasswordVerify:""},rules:{password:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],newPasswordVerify:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"},{validator:function(t,a,i){if(a!==e.formData.newPassword)return i(new Error("两次输入的密码不一致"));i()},trigger:"blur"}]}}},created:function(){var e=JSON.parse(localStorage.getItem("userinfo"));this.username=e.username,this.adminname=e.adminname,this.roleId=e.roleId},methods:{collapseHandler:function(){this.isCollapse=!this.isCollapse,this.mgleft=this.isCollapse?"72px":"180px"},signout:function(){var e=this;this.isDisabled=!0,this.$http("POST",b,{}).then(function(t){localStorage.removeItem("userinfo"),e.$router.push({path:"/login"})}).catch(function(e){console.log(e)}).finally(function(){e.isDisabled=!1})},modifyPwd:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a={username:e.username,password:e.formData.password,newPassword:e.formData.newPassword};e.$http("PUT",w,a).then(function(t){e.dialogVisible=!1}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},_e={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-aside",{staticStyle:{"background-color":"#304156"},attrs:{width:"auto"}},[i("div",{staticClass:"aside_title",on:{click:e.collapseHandler}},[i("img",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],attrs:{src:a("8j6j"),alt:""}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:e.isCollapse,expression:"isCollapse"}],attrs:{src:a("yJIb"),alt:""}})]),e._v(" "),i("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":e.$route.path,mode:"vertical","unique-opened":!0,"text-color":"#fff","active-text-color":"#ffd04b","background-color":"#304156",collapse:e.isCollapse}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("生产计划")])]),e._v(" "),i("router-link",{attrs:{to:"/plan/6"}},[i("el-menu-item",{attrs:{index:"/plan/6"}},[e._v("6号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/plan/7"}},[i("el-menu-item",{attrs:{index:"/plan/7"}},[e._v("7号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/plan/8"}},[i("el-menu-item",{attrs:{index:"/plan/8"}},[e._v("8号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/plan/9"}},[i("el-menu-item",{attrs:{index:"/plan/9"}},[e._v("9号机组")])],1)],2),e._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("冶炼记录")])]),e._v(" "),i("router-link",{attrs:{to:"/melt/6"}},[i("el-menu-item",{attrs:{index:"/melt/6"}},[e._v("6号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/melt/7"}},[i("el-menu-item",{attrs:{index:"/melt/7"}},[e._v("7号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/melt/8"}},[i("el-menu-item",{attrs:{index:"/melt/8"}},[e._v("8号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/melt/9"}},[i("el-menu-item",{attrs:{index:"/melt/9"}},[e._v("9号机组")])],1)],2),e._v(" "),i("el-submenu",{attrs:{index:"3"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("喷带记录")])]),e._v(" "),i("router-link",{attrs:{to:"/cast/6"}},[i("el-menu-item",{attrs:{index:"/cast/6"}},[e._v("6号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/cast/7"}},[i("el-menu-item",{attrs:{index:"/cast/7"}},[e._v("7号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/cast/8"}},[i("el-menu-item",{attrs:{index:"/cast/8"}},[e._v("8号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/cast/9"}},[i("el-menu-item",{attrs:{index:"/cast/9"}},[e._v("9号机组")])],1)],2),e._v(" "),i("el-submenu",{attrs:{index:"4"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("重卷记录")])]),e._v(" "),i("router-link",{attrs:{to:"/roll/6"}},[i("el-menu-item",{attrs:{index:"/roll/6"}},[e._v("6号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/roll/7"}},[i("el-menu-item",{attrs:{index:"/roll/7"}},[e._v("7号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/roll/8"}},[i("el-menu-item",{attrs:{index:"/roll/8"}},[e._v("8号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/roll/9"}},[i("el-menu-item",{attrs:{index:"/roll/9"}},[e._v("9号机组")])],1)],2),e._v(" "),i("el-submenu",{attrs:{index:"5"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("检测记录")])]),e._v(" "),i("router-link",{attrs:{to:"/measure/6"}},[i("el-menu-item",{attrs:{index:"/measure/6"}},[e._v("6号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/measure/7"}},[i("el-menu-item",{attrs:{index:"/measure/7"}},[e._v("7号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/measure/8"}},[i("el-menu-item",{attrs:{index:"/measure/8"}},[e._v("8号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/measure/9"}},[i("el-menu-item",{attrs:{index:"/measure/9"}},[e._v("9号机组")])],1)],2),e._v(" "),1===e.roleId||2===e.roleId||3===e.roleId||6===e.roleId?i("el-submenu",{attrs:{index:"6"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("库房记录")])]),e._v(" "),i("router-link",{attrs:{to:"/storage/6"}},[i("el-menu-item",{attrs:{index:"/storage/6"}},[e._v("6号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/storage/7"}},[i("el-menu-item",{attrs:{index:"/storage/7"}},[e._v("7号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/storage/8"}},[i("el-menu-item",{attrs:{index:"/storage/8"}},[e._v("8号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/storage/9"}},[i("el-menu-item",{attrs:{index:"/storage/9"}},[e._v("9号机组")])],1),e._v(" "),i("router-link",{attrs:{to:"/storageTotal"}},[i("el-menu-item",{attrs:{index:"/storageTotal"}},[e._v("库存总表")])],1)],2):e._e(),e._v(" "),1===e.roleId||2===e.roleId||3===e.roleId||5===e.roleId||6===e.roleId?i("el-submenu",{attrs:{index:"7"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("退货处理")])]),e._v(" "),i("router-link",{attrs:{to:"/returnTreatment"}},[i("el-menu-item",{attrs:{index:"/returnTreatment"}},[e._v("退货操作")])],1),e._v(" "),i("router-link",{attrs:{to:"/returnRecord"}},[i("el-menu-item",{attrs:{index:"/returnRecord"}},[e._v("退货记录")])],1)],2):e._e(),e._v(" "),1===e.roleId||2===e.roleId||3===e.roleId?i("el-submenu",{attrs:{index:"8"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("数据统计")])]),e._v(" "),i("router-link",{attrs:{to:"/statisticsOfRatio"}},[i("el-menu-item",{attrs:{index:"/statisticsOfRatio"}},[e._v("直通率统计表")])],1),e._v(" "),i("router-link",{attrs:{to:"/statisticsQuality"}},[i("el-menu-item",{attrs:{index:"/statisticsQuality"}},[e._v("带材质量统计")])],1),e._v(" "),i("router-link",{attrs:{to:"/statisticsOder"}},[i("el-menu-item",{attrs:{index:"/statisticsOder"}},[e._v("订单统计表")])],1)],2):e._e(),e._v(" "),1===e.roleId||2===e.roleId||3===e.roleId?i("el-submenu",{attrs:{index:"9"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("带材管理")])]),e._v(" "),i("router-link",{attrs:{to:"/ribbonType"}},[i("el-menu-item",{attrs:{index:"/ribbonType"}},[e._v("牌号列表")])],1),e._v(" "),i("router-link",{attrs:{to:"/ribbonWidth"}},[i("el-menu-item",{attrs:{index:"/ribbonWidth"}},[e._v("规格列表")])],1),e._v(" "),i("router-link",{attrs:{to:"/ribbonThicknessLevel"}},[i("el-menu-item",{attrs:{index:"/ribbonThicknessLevel"}},[e._v("厚度等级列表")])],1),e._v(" "),i("router-link",{attrs:{to:"/laminationLevel"}},[i("el-menu-item",{attrs:{index:"/laminationLevel"}},[e._v("叠片等级列表")])],1),e._v(" "),i("router-link",{attrs:{to:"/ribbonToughnessLevel"}},[i("el-menu-item",{attrs:{index:"/ribbonToughnessLevel"}},[e._v("韧性等级列表")])],1),e._v(" "),i("router-link",{attrs:{to:"/appearenceLevel"}},[i("el-menu-item",{attrs:{index:"/appearenceLevel"}},[e._v("外观等级列表")])],1),e._v(" "),i("router-link",{attrs:{to:"/clients"}},[i("el-menu-item",{attrs:{index:"/clients"}},[e._v("客户列表")])],1)],2):e._e(),e._v(" "),1===e.roleId||2===e.roleId||3===e.roleId?i("el-submenu",{attrs:{index:"10"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("账号管理")])]),e._v(" "),i("router-link",{attrs:{to:"/user"}},[i("el-menu-item",{attrs:{index:"/user"}},[e._v("用户列表")])],1)],2):e._e()],1)],1),e._v(" "),i("el-container",{style:{marginLeft:e.mgleft}},[i("el-header",{staticStyle:{height:"50px"}},[i("div",{staticClass:"logo"}),e._v(" "),i("div",{staticClass:"signout"},[i("label",[e._v("\n          当前用户：\n          "),i("span",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(e.adminname))])]),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:e.isDisabled,size:"small"},on:{click:e.modifyPwd}},[e._v("修改密码")]),e._v(" "),i("el-button",{attrs:{type:"danger",disabled:e.isDisabled,size:"small"},on:{click:e.signout}},[e._v("退出登录")])],1)]),e._v(" "),i("el-main",{staticClass:"main"},[i("router-view")],1)],1),e._v(" "),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"修改密码",visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"30%","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[i("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"110px"},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"旧密码：",prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入旧密码"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[i("el-input",{attrs:{placeholder:"请输入新密码"},model:{value:e.formData.newPassword,callback:function(t){e.$set(e.formData,"newPassword",t)},expression:"formData.newPassword"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"确认新密码：",prop:"newPasswordVerify"}},[i("el-input",{attrs:{placeholder:"请再次输入新密码"},model:{value:e.formData.newPasswordVerify,callback:function(t){e.$set(e.formData,"newPasswordVerify",t)},expression:"formData.newPasswordVerify"}})],1)],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var Te=a("VU/8")(fe,_e,!1,function(e){a("fdtJ")},"data-v-624e09ad",null).exports,ke=a("mvHQ"),we=a.n(ke),ye={data:function(){return{form:{username:"",password:"",disabled:!1},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:0,max:20,message:"长度在 0 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&(e.disabled=!0,e.$http("POST",c,e.form).then(function(t){var a=we()({username:e.form.username,roleId:t.roleId,adminname:t.adminname});localStorage.setItem("userinfo",a),e.$router.push({path:"/plan/6"})}).catch(function(e){console.log(e)}).finally(function(){e.disabled=!1}))})}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login_bg"},[a("div",{staticClass:"login_form"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"top"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}}},[a("el-row",{staticClass:"login_hd"},[a("h3",[e._v("生产数据管理系统")])]),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var Le=a("VU/8")(ye,xe,!1,function(e){a("LKNU")},null,null).exports,De=a("PJh5"),Fe=a.n(De);function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return Fe()(e).format("YYYY-MM-DD")}function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return Fe()(e).format("YYYY-MM-DD HH:mm:ss")}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=null;return function(){var i=this,l=Array.prototype.slice.call(arguments);clearTimeout(a),a=setTimeout(function(){e.apply(i,l)},t)}}var Ne=a("woOf"),We=a.n(Ne),Ee=a("Dd8w"),Ae=a.n(Ee),Re=function(e,t,a){/^(0|-?[1-9]\d*)$/.test(t)?a():a(new Error("请输入整数, 如 -2,-1,0,1,2,..."))},$e=function(e,t,a){/^[1-9]\d*$/.test(t)?a():a(new Error("请输入正整数, 如 1,2,3,..."))},Oe=function(e,t,a){/^(0|[1-9]\d*)$/.test(t)?a():a(new Error("请输入自然数, 如 0,1,2,3,..."))},Be=function(e,t,a){/^(\-?)\d+(?:\.\d{1,2})?$/.test(t)?a():a(new Error("最多保留两位小数, 如 15, 15.7, 15.75,..."))},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99999999;return function(t,a,i){"number"!=typeof a&&(a=Number(a)),a<=e?i():i(new Error("请输入不大于"+e+"的数值"))}},ze=function(e,t,a){if(!t)return a(new Error("炉号不能为空"));/^0[1-9]-[0-9]{8}-[0-9]{2}\/[0-9]{2}$/.test(t)?a():a(new Error("炉号格式错误"))},je=a("NYxO"),Je=a("M4fF"),He={date:"",castId:null,team:"",taskOrder:"",ribbonTypeName:"",ribbonWidth:null,client:"",furnace:"",theBeginfurnace:"",heatNum:null,alloyWeight:null,castTime:"",rawWeight:null,remark:"计划喷带12炉，如果有富余时间喷带按照当天最后一炉规定的要求生产。",fileNumber:"",orderThickness:"",orderLaminationFactor:"",orderRibbonToughnessLevels:[],orderAppearenceLevels:[],qualifiedDemands:[{qualifiedThickness:"",qualifiedLaminationFactor:"",qualifiedRibbonToughnessLevels:[],qualifiedAppearenceLevels:[]}]},Ve={props:{dialogData:{type:Object,required:!0}},data:function(){var e=function(e,t,a){if(!t)return a(new Error("炉号不能为空"));/^0[1-9]-[0-9]{8}-[0-9]{2}$/.test(t)?a():a(new Error("炉号格式错误"))};return{roleId:null,visible:!1,loading:!1,formData:{date:"",castId:null,team:"",taskOrder:"",ribbonTypeName:"",ribbonWidth:null,client:"",furnace:"",theBeginfurnace:"",heatNum:null,alloyWeight:null,castTime:"",rawWeight:null,remark:"",fileNumber:"",orderThickness:"",orderLaminationFactor:"",orderRibbonToughnessLevels:[],orderAppearenceLevels:[],qualifiedDemands:[{qualifiedThickness:"",qualifiedLaminationFactor:"",qualifiedRibbonToughnessLevels:[],qualifiedAppearenceLevels:[]}]},rules:{date:[{required:!0,message:"请选择日期",trigger:"blur"}],castId:[{required:!0,message:"请选择机组",trigger:"blur"}],team:[{required:!0,message:"请选择班次",trigger:"blur"}],ribbonTypeName:[{required:!0,message:"请选择材质",trigger:"blur"}],ribbonWidth:[{required:!0,message:"请填写带宽",trigger:"blur"},{validator:$e,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],client:[{max:50,message:"最多50位字符",trigger:"blur"}],furnace:[{required:!0,message:"请填写炉号",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"},{validator:e,trigger:"blur"}],theBeginfurnace:[{required:!0,message:"请填写开始炉号",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"},{validator:e,trigger:"blur"}],heatNum:[{required:!0,message:"请填写计划炉次",trigger:"blur"},{validator:$e,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],alloyWeight:[{required:!0,message:"请填写单炉投入重量",trigger:"blur"},{validator:$e,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],castTime:[{max:50,message:"最多50位字符",trigger:"blur"}],remark:[{max:100,message:"最多100位字符",trigger:"blur"}],fileNumber:[{max:50,message:"最多50位字符",trigger:"blur"}],orderThickness:[{required:!0,message:"请填写带厚",trigger:"blur"},{max:50,message:"最多50位字符",trigger:"blur"},{pattern:/^([1-3]\d-[1-3]\d|≤[1-3]\d)$/,message:"格式错误，20-23或者≤23",trigger:"blur"}],orderLaminationFactor:[{required:!0,message:"请选择叠片系数",trigger:"blur"}],orderRibbonToughnessLevels:[{required:!0,message:"请选择韧性等级",trigger:"blur"}],orderAppearenceLevels:[{required:!0,message:"请选择外观等级",trigger:"blur"}]}}},computed:Ae()({},Object(je.c)(["ribbonTypeList","ribbonWidthList"])),created:function(){"create"===this.dialogData.formType?this.formData=We()({},He,{castId:Number(this.$route.params.castId)}):this.formData=We()(this.formData,this.dialogData.rowData),this.roleId=JSON.parse(localStorage.getItem("userinfo")).roleId,this.getRibbonTypeList(),this.getRibbonWidthList()},methods:Ae()({pick:function(){var e=this.formData.date.replace(/-/g,"");this.formData.theBeginfurnace="0"+this.formData.castId+"-"+e+"-01"}},Object(je.b)(["getRibbonTypeList","getRibbonWidthList"]),{closeDialog:function(){this.$emit("close")},addRequirement:function(){this.formData.qualifiedDemands.length<2&&this.formData.qualifiedDemands.push({qualifiedThickness:"",qualifiedLaminationFactor:"",qualifiedRibbonToughnessLevels:[],qualifiedAppearenceLevels:[]})},delRequirement:function(){2===this.formData.qualifiedDemands.length&&this.formData.qualifiedDemands.pop()},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="",i="",l=null;if("create"===e.dialogData.formType){a="post",i=d;for(var r=[],n=e.formData.heatNum,o=e.formData.theBeginfurnace.substring(0,12),s=e.formData.theBeginfurnace.substring(12,14);n>0;){n--;var c=Object(Je.cloneDeep)(e.formData);c.furnace=o+s,c.castTime=e.setCastTime(s),c.roleId=e.roleId,c.orderRibbonToughnessLevels=c.orderRibbonToughnessLevels.join(),c.orderAppearenceLevels=c.orderAppearenceLevels.join(),c.qualifiedDemands=we()(c.qualifiedDemands),r.push(c),s=Number(s)+1<10?"0"+(Number(s)+1):Number(s)+1}l={formDataJson:we()(r)}}else{a="put",i=m;var b=Object(Je.cloneDeep)(e.formData);b.roleId=e.roleId,b.orderRibbonToughnessLevels=b.orderRibbonToughnessLevels.join(),b.orderAppearenceLevels=b.orderAppearenceLevels.join(),b.qualifiedRibbonToughnessLevels=b.qualifiedRibbonToughnessLevels.join(),b.qualifiedAppearenceLevels=b.qualifiedAppearenceLevels.join(),l=b}e.$http(a,i,l).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})},setCastTime:function(e){var t="";switch(Number(e)){case 1:t="08:00-10:00";break;case 2:t="10:00-12:00";break;case 3:t="12:00-14:00";break;case 4:t="14:00-16:00";break;case 5:t="16:00-18:00";break;case 6:t="18:00-20:00";break;case 7:t="20:00-22:00";break;case 8:t="22:00-24:00";break;case 9:t="00:00-02:00";break;case 10:t="02:00-04:00";break;case 11:t="04:00-06:00";break;case 12:t="06:00-08:00"}return t}})},Me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增生产计划-"+e.$route.params.castId+"号机组":"修改生产计划-"+e.$route.params.castId+"号机组",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"1200px","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"日期",prop:"date"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",editable:!1,clearable:!1},on:{change:e.pick},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"客户",prop:"client"}},[a("el-input",{model:{value:e.formData.client,callback:function(t){e.$set(e.formData,"client",t)},expression:"formData.client"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"班次",prop:"team"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.team,callback:function(t){e.$set(e.formData,"team",t)},expression:"formData.team"}},[a("el-option",{attrs:{label:"早班",value:"早"}}),e._v(" "),a("el-option",{attrs:{label:"中班",value:"中"}}),e._v(" "),a("el-option",{attrs:{label:"夜班",value:"夜"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"任务单号",prop:"taskOrder"}},[a("el-input",{model:{value:e.formData.taskOrder,callback:function(t){e.$set(e.formData,"taskOrder",t)},expression:"formData.taskOrder"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"材质",prop:"ribbonTypeName"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.ribbonTypeName,callback:function(t){e.$set(e.formData,"ribbonTypeName",t)},expression:"formData.ribbonTypeName"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{label:e.ribbonTypeName,value:e.ribbonTypeName}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"规格",prop:"ribbonWidth"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.ribbonWidth,callback:function(t){e.$set(e.formData,"ribbonWidth",t)},expression:"formData.ribbonWidth"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1)],1),e._v(" "),"create"===e.dialogData.formType?a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"开始炉号",prop:"theBeginfurnace"}},[a("el-input",{model:{value:e.formData.theBeginfurnace,callback:function(t){e.$set(e.formData,"theBeginfurnace",t)},expression:"formData.theBeginfurnace"}})],1)],1):e._e(),e._v(" "),"create"===e.dialogData.formType?a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"计划炉次",prop:"heatNum"}},[a("el-input",{model:{value:e.formData.heatNum,callback:function(t){e.$set(e.formData,"heatNum",t)},expression:"formData.heatNum"}})],1)],1):e._e(),e._v(" "),"edit"===e.dialogData.formType?a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"制带炉号",prop:"furnace"}},[a("el-input",{model:{value:e.formData.furnace,callback:function(t){e.$set(e.formData,"furnace",t)},expression:"formData.furnace"}})],1)],1):e._e(),e._v(" "),"edit"===e.dialogData.formType?a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带时间",prop:"castTime"}},[a("el-input",{model:{value:e.formData.castTime,callback:function(t){e.$set(e.formData,"castTime",t)},expression:"formData.castTime"}})],1)],1):e._e()],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"单炉投入",prop:"alloyWeight"}},[a("el-input",{model:{value:e.formData.alloyWeight,callback:function(t){e.$set(e.formData,"alloyWeight",t)},expression:"formData.alloyWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"文件编号",prop:"fileNumber"}},[a("el-input",{model:{value:e.formData.fileNumber,callback:function(t){e.$set(e.formData,"fileNumber",t)},expression:"formData.fileNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"dialog_field orign_field",attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),a("section",{staticClass:"requirement_detail"},[a("h3",{staticClass:"requirement_hd"},[e._v("订单要求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"带厚(μm)",prop:"orderThickness"}},[a("el-input",{model:{value:e.formData.orderThickness,callback:function(t){e.$set(e.formData,"orderThickness",t)},expression:"formData.orderThickness"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"叠片系数",prop:"orderLaminationFactor"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.formData.orderLaminationFactor,callback:function(t){e.$set(e.formData,"orderLaminationFactor",t)},expression:"formData.orderLaminationFactor"}},[a("el-option",{attrs:{label:"≥0.75",value:"≥0.75"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.78",value:"≥0.78"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.80",value:"≥0.80"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.82",value:"≥0.82"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.84",value:"≥0.84"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"韧性",prop:"orderRibbonToughnessLevels"}},[a("el-select",{attrs:{placeholder:"",multiple:"","collapse-tags":""},model:{value:e.formData.orderRibbonToughnessLevels,callback:function(t){e.$set(e.formData,"orderRibbonToughnessLevels",t)},expression:"formData.orderRibbonToughnessLevels"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}}),e._v(" "),a("el-option",{attrs:{label:"D",value:"D"}}),e._v(" "),a("el-option",{attrs:{label:"E",value:"E"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"外观",prop:"orderAppearenceLevels"}},[a("el-select",{attrs:{placeholder:"",multiple:"","collapse-tags":""},model:{value:e.formData.orderAppearenceLevels,callback:function(t){e.$set(e.formData,"orderAppearenceLevels",t)},expression:"formData.orderAppearenceLevels"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}})],1)],1)],1)],1)],1),e._v(" "),a("section",{staticClass:"requirement_detail"},[a("h3",{staticClass:"requirement_hd"},[e._v("此类带材入库规范"),a("i",{staticClass:"el-icon-circle-plus",on:{click:e.addRequirement}})]),e._v(" "),e._l(e.formData.qualifiedDemands,function(t,i){return a("el-row",{key:i,staticClass:"requirement_row",attrs:{gutter:20}},[a("i",{staticClass:"el-icon-remove",on:{click:e.delRequirement}}),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"带厚(μm)",prop:"qualifiedDemands."+i+".qualifiedThickness",rules:[{required:!0,message:"请填写带厚",trigger:"blur"},{max:50,message:"最多50位字符",trigger:"blur"},{pattern:/^([1-3]\d-[1-3]\d|≤[1-3]\d)$/,message:"格式错误，20-23或者≤23",trigger:"blur"}]}},[a("el-input",{model:{value:t.qualifiedThickness,callback:function(a){e.$set(t,"qualifiedThickness",a)},expression:"item.qualifiedThickness"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"叠片系数",prop:"qualifiedDemands."+i+".qualifiedLaminationFactor",rules:[{required:!0,message:"请选择叠片系数",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:""},model:{value:t.qualifiedLaminationFactor,callback:function(a){e.$set(t,"qualifiedLaminationFactor",a)},expression:"item.qualifiedLaminationFactor"}},[a("el-option",{attrs:{label:"≥0.75",value:"≥0.75"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.78",value:"≥0.78"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.80",value:"≥0.80"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.82",value:"≥0.82"}}),e._v(" "),a("el-option",{attrs:{label:"≥0.84",value:"≥0.84"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"韧性",prop:"qualifiedDemands."+i+".qualifiedRibbonToughnessLevels",rules:[{required:!0,message:"请选择韧性",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"",multiple:"","collapse-tags":""},model:{value:t.qualifiedRibbonToughnessLevels,callback:function(a){e.$set(t,"qualifiedRibbonToughnessLevels",a)},expression:"item.qualifiedRibbonToughnessLevels"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}}),e._v(" "),a("el-option",{attrs:{label:"D",value:"D"}}),e._v(" "),a("el-option",{attrs:{label:"E",value:"E"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"外观",prop:"qualifiedDemands."+i+".qualifiedAppearenceLevels",rules:[{required:!0,message:"请选择外观",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"",multiple:"","collapse-tags":""},model:{value:t.qualifiedAppearenceLevels,callback:function(a){e.$set(t,"qualifiedAppearenceLevels",a)},expression:"item.qualifiedAppearenceLevels"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}})],1)],1)],1)],1)})],2)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Qe=a("VU/8")(Ve,Me,!1,function(e){a("RNH8")},"data-v-050dab06",null).exports,Pe=a("mw3O"),Ue=a.n(Pe),Ke={props:{exportData:{type:Object,required:!0}},data:function(){return{visible:!1,formData:{date:null},rules:{date:[{required:!0,message:"请选择日期",trigger:"blur"}]}}},methods:{closeDialog:function(){this.$emit("closeExport")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var a={castId:e.exportData.castId,startTime:e.formData.date[0],endTime:e.formData.date[1]},i=h+"?"+Ue.a.stringify(a);window.open(i),e.$emit("submitExport")})}}},Ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"导出生产计划",visible:e.exportData.exportVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"550px"},on:{"update:visible":function(t){e.$set(e.exportData,"exportVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"日期范围：",prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]},Xe={name:"plan",components:{dialogForm:Qe,excelForm:a("VU/8")(Ke,Ze,!1,null,null,null).exports},data:function(){return{searchForm:{date:Ce(new Date)},isApproved:!1,isExportable:!1,dialogVisible:!1,exportVisible:!1,formType:"create",rowData:{},tableData:[],loading:!0,castId:6,roleId:null}},beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isExportable=this.setExportable(),a()},created:function(){this.castId=this.$route.params.castId,this.getTableData(),this.roleId=JSON.parse(localStorage.getItem("userinfo")).roleId,this.isExportable=this.setExportable()},computed:{pickerOptions:function(){var e=this;return{disabledDate:function(t){var a=new Date;return a.setDate(a.getDate()+1),![1,2,3].includes(Number(e.roleId))&&t.getTime()>=a.getTime()}}}},methods:{closeHandler:function(){this.dialogVisible=!1},submitHandler:function(e){"edit"===this.formType&&(this.dialogVisible=!1),this.getTableData()},clickSearch:function(){this.getTableData()},setExportable:function(){return!![1,2,3].includes(this.roleId)},getTableData:function(){var e=this,t={castId:this.castId,date:this.searchForm.date};this.$http("get",u,t).then(function(t){var a=t.list;a.forEach(function(e){e.orderRibbonToughnessLevels=e.orderRibbonToughnessLevels.split(","),e.orderAppearenceLevels=e.orderAppearenceLevels.split(","),e.qualifiedDemands=JSON.parse(e.qualifiedDemands)}),e.isApproved=a.every(function(e){return 1===e.approved}),e.isApproved?e.tableData=a:1===e.roleId||2===e.roleId?e.tableData=a:e.tableData=[]}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},createPlan:function(){this.formType="create",this.dialogVisible=!0},editPlan:function(e){this.dialogVisible=!0,this.rowData=e,this.formType="edit"},delPlan:function(e){var t=this,a=e.planId,i=e.furnace;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",p,{planId:a}).then(function(e){t.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},approve:function(){var e=this;this.$confirm("确定要审批吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={date:e.searchForm.date,castId:e.castId,roleId:e.roleId};e.$http("PUT",m,t).then(function(t){e.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})}}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("生产计划")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"排产日期："}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",editable:!1,clearable:!1,"picker-options":e.pickerOptions},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[1===e.roleId||2===e.roleId?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createPlan}},[e._v("新增生产计划")]):e._e(),e._v(" "),(1===e.roleId||2===e.roleId)&&e.tableData.length>0&&!e.isApproved?a("el-button",{attrs:{type:"primary",icon:"el-icon-check",disabled:2===e.roleId&&e.tableData.length>0&&!e.isApproved},on:{click:e.approve}},[e._v("待审批")]):e._e(),e._v(" "),(1===e.roleId||2===e.roleId)&&e.tableData.length>0&&e.isApproved?a("el-button",{attrs:{type:"primary",icon:"el-icon-check",disabled:""}},[e._v("已审批")]):e._e(),e._v(" "),e.isExportable?a("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){e.exportVisible=!0}}},[e._v("导出")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castId",label:"机组",align:"center",width:"60px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"team",label:"班组",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格(mm)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"制带炉号",align:"center",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单要求"}},[a("el-table-column",{attrs:{label:"带厚(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text_danger"},[e._v(e._s(t.row.orderThickness))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"叠片",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text_danger"},[e._v(e._s(t.row.orderLaminationFactor))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"韧性",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text_danger"},[e._v(e._s(t.row.orderRibbonToughnessLevels.toString()))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"外观",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text_danger"},[e._v(e._s(t.row.orderAppearenceLevels.toString()))])]}}])})],1),e._v(" "),1==e.roleId||2==e.roleId||3==e.roleId?a("el-table-column",{attrs:{label:"计划外入库要求"}},[a("el-table-column",{attrs:{label:"带厚(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[0].qualifiedThickness))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"叠片",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[0].qualifiedLaminationFactor))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"韧性",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[0].qualifiedRibbonToughnessLevels.toString()))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"外观",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[0].qualifiedAppearenceLevels.toString()))])]}}])})],1):e._e(),e._v(" "),1==e.roleId||2==e.roleId||3==e.roleId?a("el-table-column",{attrs:{label:"计划外入库要求"}},[a("el-table-column",{attrs:{label:"带厚(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[1]&&t.row.qualifiedDemands[1].qualifiedThickness))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"叠片",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[1]&&t.row.qualifiedDemands[1].qualifiedLaminationFactor))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"韧性",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[1]&&t.row.qualifiedDemands[1].qualifiedRibbonToughnessLevels.toString()))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"外观",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.qualifiedDemands&&t.row.qualifiedDemands[1]&&t.row.qualifiedDemands[1].qualifiedAppearenceLevels.toString()))])]}}])})],1):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"taskOrder",label:"任务单号",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"client",label:"客户",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyWeight",label:"单炉投入",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castTime",label:"制带时间",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rawWeight",label:"大盘毛重",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"实际规格(mm)",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{text_danger:t.row.realRibbonWidth!==t.row.ribbonWidth}},[e._v(e._s(t.row.realRibbonWidth))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return 2===e.roleId?[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.editPlan(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.delPlan(t.row)}}},[e._v("删除")])]:void 0}}])})],1),e._v(" "),a("div",{staticClass:"table_tip"},[a("p",[e._v("1. 文件编号："+e._s(e.tableData[0]&&e.tableData[0].fileNumber))]),e._v(" "),a("p",[e._v("2. "+e._s(e.tableData[0]&&e.tableData[0].remark))])])],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e(),e._v(" "),e.exportVisible?a("excel-form",{attrs:{exportData:{exportVisible:e.exportVisible,castId:e.castId}},on:{closeExport:function(t){e.exportVisible=!1},submitExport:function(t){e.exportVisible=!1}}}):e._e()],1)},staticRenderFns:[]};var Ye=a("VU/8")(Xe,Ge,!1,function(e){a("Ffd9")},"data-v-03b7a230",null).exports,et={date:"",castId:6,furnace:"",ribbonTypeName:"",bucket:"",melter:"",meltFurnace:"",newAlloyNumber:"",newAlloyWeight:0,oldAlloyNumber:"",oldAlloyWeight:0,mixAlloyNumber:"",mixAlloyWeight:0,highNbNumber:"",highNbWeight:0,Si:0,Ni:0,Cu:0,BFe:0,NbFe:0,alloyTotalWeight:0,alloyOutWeight:0,alloyFixWeight:0,remark:"",createdAt:"",updatedAt:""},tt={data:function(){return{userinfo:{},visible:!1,loading:!1,formData:{date:"",castId:6,furnace:"",ribbonTypeName:"",bucket:"",melter:"",meltFurnace:"",newAlloyNumber:"",newAlloyWeight:0,oldAlloyNumber:"",oldAlloyWeight:0,mixAlloyNumber:"",mixAlloyWeight:0,highNbNumber:"",highNbWeight:0,Si:0,Ni:0,Cu:0,BFe:0,NbFe:0,alloyTotalWeight:0,alloyOutWeight:0,alloyFixWeight:0,remark:"",createdAt:"",updatedAt:""},rules:{ribbonTypeName:[{required:!0,message:"请选择材质",trigger:"blur"}],furnace:[{required:!0,message:"请填写炉号",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"},{validator:ze,trigger:"blur"}],bucket:[{required:!0,message:"请填写桶号",trigger:"blur"},{max:2,message:"最多2位字符",trigger:"blur"}],melter:[{required:!0,message:"请填写熔炼人姓名",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}],meltFurnace:[{required:!0,message:"请选择冶炼炉",trigger:"blur"}],newAlloyNumber:[{max:20,message:"最多20位字符",trigger:"blur"}],newAlloyWeight:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],oldAlloyNumber:[{max:20,message:"最多20位字符",trigger:"blur"}],oldAlloyWeight:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],mixAlloyNumber:[{max:20,message:"最多20位字符",trigger:"blur"}],mixAlloyWeight:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],highNbNumber:[{max:20,message:"最多20位字符",trigger:"blur"}],highNbWeight:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],Si:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],Ni:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],Cu:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],BFe:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],NbFe:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],alloyOutWeight:[{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],alloyFixWeight:[{validator:Re,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],remark:[{max:100,message:"最多100位字符",trigger:"blur"}]}}},props:{dialogData:{type:Object,required:!0}},created:function(){this.userinfo=JSON.parse(localStorage.getItem("userinfo")),"create"===this.dialogData.formType?this.formData=We()({},et,{castId:Number(this.$route.params.castId),melter:this.userinfo.adminname}):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{setBucket:function(e){e.target.value&&(this.formData.bucket=e.target.value.split("/")[1])},closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,e.formData.alloyTotalWeight=parseInt(e.formData.newAlloyWeight)+parseInt(e.formData.oldAlloyWeight)+parseInt(e.formData.mixAlloyWeight)+parseInt(e.formData.highNbWeight)+parseInt(e.formData.alloyFixWeight),e.formData.roleId=e.userinfo.roleId,e.formData.adminname=e.userinfo.adminname;var a="create"===e.dialogData.formType?{method:"POST",url:L}:{method:"PUT",url:D},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},at={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增冶炼记录-"+e.$route.params.castId+"号机组":"修改冶炼记录-"+e.$route.params.castId+"号机组",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"950px","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px",inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"材质:",prop:"ribbonTypeName"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.ribbonTypeName,callback:function(t){e.$set(e.formData,"ribbonTypeName",t)},expression:"formData.ribbonTypeName"}},e._l(e.dialogData.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeName,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"制带炉号:",prop:"furnace"}},[a("el-input",{on:{blur:e.setBucket},model:{value:e.formData.furnace,callback:function(t){e.$set(e.formData,"furnace",t)},expression:"formData.furnace"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"桶号:",prop:"bucket"}},[a("span",[e._v(e._s(e.formData.bucket))])])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"熔炼人:",prop:"melter"}},[a("span",[e._v(e._s(e.formData.melter))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"冶炼炉炉号",prop:"meltFurnace"}},[a("el-select",{model:{value:e.formData.meltFurnace,callback:function(t){e.$set(e.formData,"meltFurnace",t)},expression:"formData.meltFurnace"}},[a("el-option",{attrs:{label:"A炉",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B炉",value:"B"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"新料批号:",prop:"newAlloyNumber"}},[a("el-input",{model:{value:e.formData.newAlloyNumber,callback:function(t){e.$set(e.formData,"newAlloyNumber",t)},expression:"formData.newAlloyNumber"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"新料重量:",prop:"newAlloyWeight"}},[a("el-input",{model:{value:e.formData.newAlloyWeight,callback:function(t){e.$set(e.formData,"newAlloyWeight",t)},expression:"formData.newAlloyWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"加工料批号:",prop:"oldAlloyNumber"}},[a("el-input",{model:{value:e.formData.oldAlloyNumber,callback:function(t){e.$set(e.formData,"oldAlloyNumber",t)},expression:"formData.oldAlloyNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"加工料重量:",prop:"oldAlloyWeight"}},[a("el-input",{model:{value:e.formData.oldAlloyWeight,callback:function(t){e.$set(e.formData,"oldAlloyWeight",t)},expression:"formData.oldAlloyWeight"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"回炉锭批号:",prop:"mixAlloyNumber"}},[a("el-input",{model:{value:e.formData.mixAlloyNumber,callback:function(t){e.$set(e.formData,"mixAlloyNumber",t)},expression:"formData.mixAlloyNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"回炉锭重量:",prop:"mixAlloyWeight"}},[a("el-input",{model:{value:e.formData.mixAlloyWeight,callback:function(t){e.$set(e.formData,"mixAlloyWeight",t)},expression:"formData.mixAlloyWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"高铌料批号:",prop:"highNbNumber"}},[a("el-input",{model:{value:e.formData.highNbNumber,callback:function(t){e.$set(e.formData,"highNbNumber",t)},expression:"formData.highNbNumber"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"高铌料重量:",prop:"highNbWeight"}},[a("el-input",{model:{value:e.formData.highNbWeight,callback:function(t){e.$set(e.formData,"highNbWeight",t)},expression:"formData.highNbWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"硅:",prop:"Si"}},[a("el-input",{model:{value:e.formData.Si,callback:function(t){e.$set(e.formData,"Si",t)},expression:"formData.Si"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"镍:",prop:"Ni"}},[a("el-input",{model:{value:e.formData.Ni,callback:function(t){e.$set(e.formData,"Ni",t)},expression:"formData.Ni"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"铜:",prop:"Cu"}},[a("el-input",{model:{value:e.formData.Cu,callback:function(t){e.$set(e.formData,"Cu",t)},expression:"formData.Cu"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"硼铁:",prop:"BFe"}},[a("el-input",{model:{value:e.formData.BFe,callback:function(t){e.$set(e.formData,"BFe",t)},expression:"formData.BFe"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"铌铁:",prop:"NbFe"}},[a("el-input",{model:{value:e.formData.NbFe,callback:function(t){e.$set(e.formData,"NbFe",t)},expression:"formData.NbFe"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"放钢重量:",prop:"alloyOutWeight"}},[a("el-input",{model:{value:e.formData.alloyOutWeight,callback:function(t){e.$set(e.formData,"alloyOutWeight",t)},expression:"formData.alloyOutWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"修正重量:",prop:"alloyFixWeight"}},[a("el-input",{model:{value:e.formData.alloyFixWeight,callback:function(t){e.$set(e.formData,"alloyFixWeight",t)},expression:"formData.alloyFixWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"备注:",prop:"remark"}},[a("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]},it=a("VU/8")(tt,at,!1,null,null,null).exports,lt={name:"Collapse",data:function(){return{activeNames:["1"]}},methods:{handleChange:function(e){console.log(e)}}},rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collapse"},[a("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:"1",title:"筛选条件"}},[e._t("default")],2)],1)],1)},staticRenderFns:[]};var nt=a("VU/8")(lt,rt,!1,function(e){a("HZ6f")},"data-v-a301a556",null).exports,ot={name:"melt",components:{dialogForm:it,Collapse:nt},data:function(){return{userinfo:{},isAble:!1,castId:6,searchForm:{melter:"",ribbonTypeName:"",bucket:"",newAlloyNumber:"",oldAlloyNumber:"",date:[]},loading:!1,tableData:[],dialogVisible:!1,formType:"create",rowData:{},pageConfig:{total:1,current:1,pageSize:10},tableHeight:100}},computed:Ae()({},Object(je.c)(["ribbonTypeList"])),beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isAble=this.setIsAble(),a()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isAble=this.setIsAble(),this.getTableData(),this.getRibbonTypeList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:Ae()({},Object(je.b)(["getRibbonTypeList"]),{dateFormat:function(e,t){return Ce(e.createTime)},dateTimeFormat:function(e,t){return Se(e.updatedAt)},setIsAble:function(){return 8==this.userinfo.roleId||10==this.userinfo.roleId||12==this.userinfo.roleId||14==this.userinfo.roleId},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={melter:"",ribbonTypeName:"",bucket:"",newAlloyNumber:"",oldAlloyNumber:"",date:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],melter:this.searchForm.melter,ribbonTypeName:this.searchForm.ribbonTypeName,bucket:this.searchForm.bucket,newAlloyNumber:this.searchForm.newAlloyNumber,oldAlloyNumber:this.searchForm.oldAlloyNumber};We()(t,a),this.$http("get",x,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},createMelt:function(){this.dialogVisible=!0,this.formType="create"},edit:function(e){this.rowData=e,this.dialogVisible=!0,this.formType="edit"},del:function(e){var t=this,a=e.meltId,i=e.furnace;this.$confirm("删除后数据无法恢复，确定删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",F,{meltId:a}).then(function(e){t.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){"edit"===this.formType&&(this.dialogVisible=!1),this.pageConfig.current=1,this.getTableData()},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},exportExcel:function(){var e={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],melter:this.searchForm.melter,ribbonTypeName:this.searchForm.ribbonTypeName,bucket:this.searchForm.bucket,newAlloyNumber:this.searchForm.newAlloyNumber,oldAlloyNumber:this.searchForm.oldAlloyNumber},t=C+"?"+Ue.a.stringify(e);window.open(t)}})},st={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("冶炼记录")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"冶炼日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"冶炼人："}},[a("el-input",{attrs:{placeholder:"请输入冶炼人姓名"},model:{value:e.searchForm.melter,callback:function(t){e.$set(e.searchForm,"melter",t)},expression:"searchForm.melter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.ribbonTypeName,callback:function(t){e.$set(e.searchForm,"ribbonTypeName",t)},expression:"searchForm.ribbonTypeName"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"桶号："}},[a("el-input",{attrs:{placeholder:"请输入桶号"},model:{value:e.searchForm.bucket,callback:function(t){e.$set(e.searchForm,"bucket",t)},expression:"searchForm.bucket"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新料："}},[a("el-input",{attrs:{placeholder:"请输入新料炉号"},model:{value:e.searchForm.newAlloyNumber,callback:function(t){e.$set(e.searchForm,"newAlloyNumber",t)},expression:"searchForm.newAlloyNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加工料："}},[a("el-input",{attrs:{placeholder:"请输入加工料炉号"},model:{value:e.searchForm.oldAlloyNumber,callback:function(t){e.$set(e.searchForm,"oldAlloyNumber",t)},expression:"searchForm.oldAlloyNumber"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isAble?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createMelt}},[e._v("创建冶炼记录")]):e._e(),e._v(" "),1===e.userinfo.roleId||2===e.userinfo.roleId||3===e.userinfo.roleId?a("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight}},[a("el-table-column",{attrs:{prop:"createTime",label:"冶炼日期",align:"center",width:"110px",formatter:e.dateFormat,fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"80px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"bucket",label:"桶号",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"melter",label:"冶炼人",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"meltFurnace",label:"冶炼炉",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newAlloyNumber",label:"新料炉号",align:"center",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newAlloyWeight",label:"新料重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"oldAlloyNumber",label:"加工料炉号",align:"center",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"oldAlloyWeight",label:"加工料重量(kg)",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mixAlloyNumber",label:"回炉锭炉号",align:"center",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mixAlloyWeight",label:"回炉锭重量(kg)",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"highNbNumber",label:"高铌料炉号",align:"center",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"highNbWeight",label:"高铌料重量(kg)",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Si",label:"硅(g)",align:"center",width:"60px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Ni",label:"镍(g)",align:"center",width:"60px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Cu",label:"铜(g)",align:"center",width:"60px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"BFe",label:"硼铁(g)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"NbFe",label:"铌铁(g)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyTotalWeight",label:"总重量(kg)",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyOutWeight",label:"放钢重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyFixWeight",label:"修正重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center",width:"100px","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",align:"center",width:"170px",formatter:e.dateTimeFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatePerson",label:"更新者",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",disabled:1!==e.userinfo.roleId&&3!==e.userinfo.roleId&&e.userinfo.adminname!==t.row.melter},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),1===e.userinfo.roleId||3===e.userinfo.roleId?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData,ribbonTypeList:e.ribbonTypeList}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var ct=a("VU/8")(ot,st,!1,function(e){a("1EWY")},"data-v-0722db0c",null).exports,bt={nozzleSize:"",nozzleNum:1,heatCupNum:1,treatCoolRoller:"",coolRollerThickness:null,ReceiveMeltTime:"",tundishTemperatureWithoutMelt:null,tundishTemperatureWithMelt:null,installNozzleTime:"",castTimeStart:"",pressure:null,tundishTemperatureCasting:null,coolRollerTemperatureBeforeCast:"",coolRollerTemperatureAfterCast:"",castLocation:"",coilTimes:null,castTimeEnd:"",describe:""},ut={castTimes:1,castId:6,team:"",furnace:"",caster:"",ribbonWidth:null,ribbonTypeId:"",ribbonTypeName:"",nozzleNum:1,heatCupNum:0,tundishCar:"",tundish:"",isChangeTundish:"",meltOutWeight:0,rawWeight:null,remark:"",createdAt:"",updatedAt:"",uselessRibbonWeight:null,record:[bt]},dt={data:function(){return{userinfo:{},visible:!1,loading:!1,formData:{castTimes:1,castId:6,team:"",furnace:"",caster:"",ribbonWidth:null,ribbonTypeId:"",ribbonTypeName:"",nozzleNum:1,heatCupNum:1,tundishCar:"",tundish:"",isChangeTundish:"",meltOutWeight:0,rawWeight:null,remark:"",createdAt:"",updatedAt:"",uselessRibbonWeight:null,record:[{nozzleSize:"",nozzleNum:1,heatCupNum:1,treatCoolRoller:"",coolRollerThickness:null,ReceiveMeltTime:"",tundishTemperatureWithoutMelt:null,tundishTemperatureWithMelt:null,installNozzleTime:"",castTimeStart:"",pressure:null,tundishTemperatureCasting:null,coolRollerTemperatureBeforeCast:"",coolRollerTemperatureAfterCast:"",castLocation:"",coilTimes:null,castTimeEnd:"",describe:""}]},rules:{ribbonTypeName:[{required:!0,message:"请选择材质",trigger:"blur"}],ribbonWidth:[{required:!0,message:"请填写带宽",trigger:"blur"},{validator:$e,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],furnace:[{required:!0,message:"请填写炉号",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"},{validator:ze,trigger:"blur"}],caster:[{required:!0,message:"请填写熔炼人姓名",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}],tundish:[{required:!0,message:"请填写在线包号",trigger:"blur"},{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],tundishCar:[{required:!0,message:"请选择包车编号",trigger:"blur"}],isChangeTundish:[{required:!0,message:"请选择是否换包",trigger:"blur"}],nozzleNum:[{required:!0,message:"请填写喷嘴杯个数",trigger:"blur"},{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],heatCupNum:[{required:!0,message:"请填写加热杯个数",trigger:"blur"},{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],meltOutWeight:[{required:!0,message:"请填写放钢重量",trigger:"blur"},{validator:Oe,trigger:"blur"},{validator:qe(500),trigger:"blur"}],rawWeight:[{required:!0,message:"请填写大盘毛重",trigger:"blur"},{validator:Oe,trigger:"blur"},{validator:qe(500),trigger:"blur"}],remark:[{max:50,message:"最多50位字符",trigger:"blur"}],castTimes:[{required:!0,message:"请选择开包次数",trigger:"blur"}],uselessRibbonWeight:[{required:!0,message:"请填写废带重量",trigger:"blur"},{validator:Oe,trigger:"blur"},{validator:qe(500),trigger:"blur"}],team:[{required:!0,message:"请选择所在班组",trigger:"blur"}]}}},props:{dialogData:{type:Object,required:!0}},created:function(){if(this.userinfo=JSON.parse(localStorage.getItem("userinfo")),"add"===this.dialogData.formType){var e=Object(Je.cloneDeep)(ut);this.formData=We()({},e,{castId:Number(this.$route.params.castId),caster:this.userinfo.adminname})}else this.formData=We()(this.formData,this.dialogData.rowData),this.formData.castTimes=this.formData.record.length},mounted:function(){},methods:{closeDialog:function(){this.$emit("close")},castTimesChangeHandler:function(e){this.formData.nozzleNum=e;var t=this.formData.record.length;if(e>t)for(var a=0;a<e-t;a++){var i=Object(Je.cloneDeep)(bt);this.formData.record.push(i)}else if(e<t)for(var l=0;l<t-e;l++)this.formData.record.pop()},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,e.formData.recordJson=we()(e.formData.record),e.formData.roleId=e.userinfo.roleId,e.formData.adminname=e.userinfo.adminname;var a="add"===e.dialogData.formType?{method:"POST",url:I}:{method:"PUT",url:N},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"add"===e.dialogData.formType?"新增喷带记录-"+e.$route.params.castId+"号机组":"修改喷带记录-"+e.$route.params.castId+"号机组",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"1200px","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"材质",prop:"ribbonTypeName"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.ribbonTypeName,callback:function(t){e.$set(e.formData,"ribbonTypeName",t)},expression:"formData.ribbonTypeName"}},e._l(e.dialogData.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"规格",prop:"ribbonWidth"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.ribbonWidth,callback:function(t){e.$set(e.formData,"ribbonWidth",t)},expression:"formData.ribbonWidth"}},e._l(e.dialogData.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"制带炉号",prop:"furnace"}},[a("el-input",{model:{value:e.formData.furnace,callback:function(t){e.$set(e.formData,"furnace",t)},expression:"formData.furnace"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带手:",prop:"caster"}},[a("span",[e._v(e._s(e.formData.caster))])])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"在线包号",prop:"tundish"}},[a("el-input",{attrs:{placeholder:"请输入包体编号数字"},model:{value:e.formData.tundish,callback:function(t){e.$set(e.formData,"tundish",t)},expression:"formData.tundish"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"包车编号",prop:"tundishCar"}},[a("el-select",{model:{value:e.formData.tundishCar,callback:function(t){e.$set(e.formData,"tundishCar",t)},expression:"formData.tundishCar"}},[a("el-option",{attrs:{label:"#1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"#2",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"是否换包",prop:"isChangeTundish"}},[a("el-select",{model:{value:e.formData.isChangeTundish,callback:function(t){e.$set(e.formData,"isChangeTundish",t)},expression:"formData.isChangeTundish"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷嘴杯个数:",prop:"nozzleNum"}},[a("span",[e._v(e._s(e.formData.nozzleNum))])])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"加热杯个数",prop:"heatCupNum"}},[a("el-input",{model:{value:e.formData.heatCupNum,callback:function(t){e.$set(e.formData,"heatCupNum",t)},expression:"formData.heatCupNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"放钢重量",prop:"meltOutWeight"}},[a("el-input",{model:{value:e.formData.meltOutWeight,callback:function(t){e.$set(e.formData,"meltOutWeight",t)},expression:"formData.meltOutWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"大盘毛重",prop:"rawWeight"}},[a("el-input",{model:{value:e.formData.rawWeight,callback:function(t){e.$set(e.formData,"rawWeight",t)},expression:"formData.rawWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"废带重量",prop:"uselessRibbonWeight"}},[a("el-input",{model:{value:e.formData.uselessRibbonWeight,callback:function(t){e.$set(e.formData,"uselessRibbonWeight",t)},expression:"formData.uselessRibbonWeight"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所在班组",prop:"team"}},[a("el-select",{model:{value:e.formData.team,callback:function(t){e.$set(e.formData,"team",t)},expression:"formData.team"}},[a("el-option",{attrs:{label:e.formData.castId+"#-甲",value:e.formData.castId+"#-甲"}}),e._v(" "),a("el-option",{attrs:{label:e.formData.castId+"#-乙",value:e.formData.castId+"#-乙"}}),e._v(" "),a("el-option",{attrs:{label:e.formData.castId+"#-丙",value:e.formData.castId+"#-丙"}}),e._v(" "),a("el-option",{attrs:{label:e.formData.castId+"#-丁",value:e.formData.castId+"#-丁"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开包次数",prop:"castTimes"}},[a("el-select",{on:{change:e.castTimesChangeHandler},model:{value:e.formData.castTimes,callback:function(t){e.$set(e.formData,"castTimes",t)},expression:"formData.castTimes"}},[a("el-option",{attrs:{label:"0",value:0}}),e._v(" "),a("el-option",{attrs:{label:"1",value:1}}),e._v(" "),a("el-option",{attrs:{label:"2",value:2}}),e._v(" "),a("el-option",{attrs:{label:"3",value:3}}),e._v(" "),a("el-option",{attrs:{label:"4",value:4}}),e._v(" "),a("el-option",{attrs:{label:"5",value:5}}),e._v(" "),a("el-option",{attrs:{label:"6",value:6}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),e._l(e.formData.record,function(t,i){return a("section",{key:i,staticClass:"cast_detail"},[a("h3",{staticClass:"cast_hd"},[e._v("第"+e._s(i+1)+"次开包")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷嘴规格",prop:"record."+i+".nozzleSize",rules:[{required:!0,message:"请填写喷嘴规格，格式 30*0.25",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：30*0.25"},model:{value:t.nozzleSize,callback:function(a){e.$set(t,"nozzleSize",a)},expression:"item.nozzleSize"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"车修铜辊",prop:"record."+i+".treatCoolRoller",rules:[{required:!0,message:"请选择车修方式",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.treatCoolRoller,callback:function(a){e.$set(t,"treatCoolRoller",a)},expression:"item.treatCoolRoller"}},[a("el-option",{attrs:{label:"车",value:"车"}}),e._v(" "),a("el-option",{attrs:{label:"修",value:"修"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"铜套厚度",prop:"record."+i+".coolRollerThickness",rules:[{required:!0,message:"请填写铜套厚度，单位 mm",trigger:"blur"},{pattern:/^(0|[1-9]\d{0,8})$/,message:"请输入9位以内自然数, 如 0,1,2,3,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.coolRollerThickness,callback:function(a){e.$set(t,"coolRollerThickness",a)},expression:"item.coolRollerThickness"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"接钢时间",prop:"record."+i+".ReceiveMeltTime",rules:[{required:!0,message:"请填写接钢时间，格式 08:30",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：08:30"},model:{value:t.ReceiveMeltTime,callback:function(a){e.$set(t,"ReceiveMeltTime",a)},expression:"item.ReceiveMeltTime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"接钢前包温",prop:"record."+i+".tundishTemperatureWithoutMelt",rules:[{required:!0,message:"请填写接钢前包温",trigger:"blur"},{pattern:/^[1-9\/]\d{0,8}$/,message:"请输入9位以内正整数, 如 1350,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.tundishTemperatureWithoutMelt,callback:function(a){e.$set(t,"tundishTemperatureWithoutMelt",a)},expression:"item.tundishTemperatureWithoutMelt"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"接钢后包温",prop:"record."+i+".tundishTemperatureWithMelt",rules:[{required:!0,message:"请填写接钢后包温",trigger:"blur"},{pattern:/^[1-9\/]\d{0,8}$/,message:"请输入9位以内正整数, 如 1350,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.tundishTemperatureWithMelt,callback:function(a){e.$set(t,"tundishTemperatureWithMelt",a)},expression:"item.tundishTemperatureWithMelt"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"装杯时间",prop:"record."+i+".installNozzleTime",rules:[{required:!0,message:"请填写装杯时间，格式 08:40",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：08:40"},model:{value:t.installNozzleTime,callback:function(a){e.$set(t,"installNozzleTime",a)},expression:"item.installNozzleTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"开包时间",prop:"record."+i+".castTimeStart",rules:[{required:!0,message:"请填写开包时间，格式 08:40",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：09:20"},model:{value:t.castTimeStart,callback:function(a){e.$set(t,"castTimeStart",a)},expression:"item.castTimeStart"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"开包压力",prop:"record."+i+".pressure",rules:[{required:!0,message:"请填写开包压力",trigger:"blur"},{pattern:/^[1-9]\d{0,8}$/,message:"请输入9位以内正整数, 如 18,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.pressure,callback:function(a){e.$set(t,"pressure",a)},expression:"item.pressure"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"开包温度",prop:"record."+i+".tundishTemperatureCasting",rules:[{required:!0,message:"请填写开包温度",trigger:"blur"},{pattern:/^[1-9]\d{0,8}$/,message:"请输入9位以内正整数, 如 1350,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.tundishTemperatureCasting,callback:function(a){e.$set(t,"tundishTemperatureCasting",a)},expression:"item.tundishTemperatureCasting"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带前水温",prop:"record."+i+".coolRollerTemperatureBeforeCast",rules:[{required:!0,message:"请填写水温",trigger:"blur"},{pattern:/^(\d+|\d+\.\d{1,2})-(\d+|\d+\.\d{1,2})$/,message:"格式错误, 如 32.50-32.50",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：32-32"},model:{value:t.coolRollerTemperatureBeforeCast,callback:function(a){e.$set(t,"coolRollerTemperatureBeforeCast",a)},expression:"item.coolRollerTemperatureBeforeCast"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带后水温",prop:"record."+i+".coolRollerTemperatureAfterCast",rules:[{required:!0,message:"请填写水温",trigger:"blur"},{pattern:/^(\d+|\d+\.\d{1,2})-(\d+|\d+\.\d{1,2})$/,message:"格式错误, 如 32.50-33.80",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：32-35"},model:{value:t.coolRollerTemperatureAfterCast,callback:function(a){e.$set(t,"coolRollerTemperatureAfterCast",a)},expression:"item.coolRollerTemperatureAfterCast"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带位置",prop:"record."+i+".castLocation",rules:[{required:!0,message:"请选择喷带位置",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:""},model:{value:t.castLocation,callback:function(a){e.$set(t,"castLocation",a)},expression:"item.castLocation"}},[a("el-option",{attrs:{label:"左",value:"左"}}),e._v(" "),a("el-option",{attrs:{label:"中",value:"中"}}),e._v(" "),a("el-option",{attrs:{label:"右",value:"右"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"抓取次数",prop:"record."+i+".coilTimes",rules:[{required:!0,message:"请填写抓取次数",trigger:"blur"}]}},[a("el-select",{model:{value:t.coilTimes,callback:function(a){e.$set(t,"coilTimes",a)},expression:"item.coilTimes"}},[a("el-option",{attrs:{label:"0",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:">3",value:">3"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"完成时间",prop:"record."+i+".castTimeEnd",rules:[{required:!0,message:"请填写完成时间，格式 08:40",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：10:30"},model:{value:t.castTimeEnd,callback:function(a){e.$set(t,"castTimeEnd",a)},expression:"item.castTimeEnd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"结果描述",prop:"record."+i+".describe",rules:[{required:!0,message:"请填写结果描述",trigger:"blur"},{max:100,message:"最多100位字符",trigger:"blur"}]}},[a("el-input",{model:{value:t.describe,callback:function(a){e.$set(t,"describe",a)},expression:"item.describe"}})],1)],1)],1)],1)})],2),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var pt={name:"cast",components:{dialogForm:a("VU/8")(dt,mt,!1,function(e){a("REF4")},"data-v-b11df92c",null).exports,Collapse:nt},data:function(){return{userinfo:{},castId:6,searchForm:{caster:"",team:"",furnace:"",ribbonTypeName:"",date:[],ribbonWidths:[]},loading:!1,tableData:[],dialogVisible:!1,formType:"create",rowData:{},pageConfig:{total:1,current:1,pageSize:10},isAddAble:!1,isDelAble:!1,tableHeight:500}},computed:Ae()({},Object(je.c)(["ribbonTypeList","ribbonWidthList"])),beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isAddAble=this.setIsAddAble(),this.isDelAble=this.setIsDelAble(),a()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isAddAble=this.setIsAddAble(),this.isDelAble=this.setIsDelAble(),this.getTableData(),this.getRibbonTypeList(),this.getRibbonWidthList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:Ae()({},Object(je.b)(["getRibbonTypeList","getRibbonWidthList"]),{dateFormat:function(e,t){return Ce(e.createTime)},dateTimeFormat:function(e,t){return Se(e.updatedAt)},setIsAddAble:function(){return 7==this.userinfo.roleId||9==this.userinfo.roleId||11==this.userinfo.roleId||13==this.userinfo.roleId},setIsDelAble:function(){if(1===this.userinfo.roleId&&3===this.userinfo.roleId)return!0},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",team:"",furnace:"",ribbonTypeName:"",date:[],ribbonWidths:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castId:this.castId,team:this.searchForm.team,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeName:this.searchForm.ribbonTypeName,ribbonWidthJson:we()(this.searchForm.ribbonWidths)};We()(t,a),this.$http("get",S,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,t.list.forEach(function(e){e.record=JSON.parse(e.record)}),e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},add:function(){this.dialogVisible=!0,this.formType="add"},edit:function(e){this.rowData=e,this.dialogVisible=!0,this.formType="edit"},del:function(e){var t=this,a=e._id,i=e.furnace;this.$confirm("删除后数据无法恢复，确定删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",W,{_id:a}).then(function(e){t.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){"edit"===this.formType&&(this.dialogVisible=!1),this.pageConfig.current=1,this.getTableData()},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)}})},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("喷带记录")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"喷带日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班组："}},[a("el-select",{attrs:{placeholder:"请选择班组"},model:{value:e.searchForm.team,callback:function(t){e.$set(e.searchForm,"team",t)},expression:"searchForm.team"}},[a("el-option",{attrs:{label:e.castId+"#-甲",value:e.castId+"#-甲"}}),e._v(" "),a("el-option",{attrs:{label:e.castId+"#-乙",value:e.castId+"#-乙"}}),e._v(" "),a("el-option",{attrs:{label:e.castId+"#-丙",value:e.castId+"#-丙"}}),e._v(" "),a("el-option",{attrs:{label:e.castId+"#-丁",value:e.castId+"#-丁"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"喷带手："}},[a("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:e.searchForm.caster,callback:function(t){e.$set(e.searchForm,"caster",t)},expression:"searchForm.caster"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.ribbonTypeName,callback:function(t){e.$set(e.searchForm,"ribbonTypeName",t)},expression:"searchForm.ribbonTypeName"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isAddAble?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.add}},[e._v("创建喷带记录")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight}},[a("el-table-column",{attrs:{type:"expand",label:"展开",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.record,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"开包",type:"index",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nozzleSize",label:"喷嘴规格",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"treatCoolRoller",label:"车修铜辊",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coolRollerThickness",label:"铜套厚度",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceiveMeltTime",label:"接钢时间",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishTemperatureWithoutMelt",label:"接钢前包温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishTemperatureWithMelt",label:"接钢后包温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"installNozzleTime",label:"装杯时间",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castTimeStart",label:"开包时间",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pressure",label:"开包压力",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishTemperatureCasting",label:"开包温度/℃",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coolRollerTemperatureBeforeCast",label:"喷带前水温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coolRollerTemperatureAfterCast",label:"喷带后水温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castLocation",label:"喷带位置",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilTimes",label:"抓取次数",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castTimeEnd",label:"喷带完成时间",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"喷带结果描述",align:"center",width:"110px","show-overflow-tooltip":!0}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"喷带日期",align:"center",width:"110px",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"team",label:"班组",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castTimes",label:"开包次数",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.castTimes>1?"text_danger":""},[e._v(e._s(t.row.castTimes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tundish",label:"在线包号",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishCar",label:"包车编号",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isChangeTundish",label:"是否换包",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isChangeTundish?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nozzleNum",label:"喷嘴杯个数",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"heatCupNum",label:"加热杯个数",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"meltOutWeight",label:"放钢重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rawWeight",label:"大盘毛重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uselessRibbonWeight",label:"废带重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",align:"center",width:"170px",formatter:e.dateTimeFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatePerson",label:"更新者",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",disabled:1!==e.userinfo.roleId&&3!==e.userinfo.roleId&&e.userinfo.adminname!==t.row.caster},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),1===e.userinfo.roleId||3===e.userinfo.roleId?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData,ribbonTypeList:e.ribbonTypeList,ribbonWidthList:e.ribbonWidthList}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]},gt=a("VU/8")(pt,ht,!1,null,null,null).exports,vt={ribbonTypeId:"",ribbonTypeName:"",NCode:""},ft={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{ribbonTypeId:"",ribbonTypeName:"",NCode:""},rules:{ribbonTypeName:[{required:!0,message:"请填写带材牌号",trigger:"blur"},{max:50,message:"长度不能超过50位",trigger:"blur"}],NCode:[{required:!0,message:"请填写NC编码",trigger:"blur"},{max:50,message:"长度不能超过50位",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},vt):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="create"===e.dialogData.formType?{method:"post",url:v}:{method:"put",url:f},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},_t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增带材牌号":"修改带材牌号",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"带材牌号：",prop:"ribbonTypeName"}},[a("el-input",{model:{value:e.formData.ribbonTypeName,callback:function(t){e.$set(e.formData,"ribbonTypeName",t)},expression:"formData.ribbonTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"NC编码：",prop:"NCode"}},[a("el-input",{model:{value:e.formData.NCode,callback:function(t){e.$set(e.formData,"NCode",t)},expression:"formData.NCode"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Tt={name:"ribbon",components:{dialogForm:a("VU/8")(ft,_t,!1,function(e){a("ZtRW")},"data-v-c48f1b62",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!1}},computed:Ae()({},Object(je.c)(["ribbonTypeList"])),created:function(){this.getRibbonTypeList()},methods:Ae()({},Object(je.b)(["getRibbonTypeList"]),{createRibbon:function(){this.dialogVisible=!0,this.formType="create"},editRibbon:function(e){this.dialogVisible=!0,this.formType="edit",this.rowData=e},delRibbon:function(e){var t=this,a=e.ribbonTypeId,i=e.ribbonTypeName;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",_,{ribbonTypeId:a}).then(function(e){t.getRibbonTypeList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getRibbonTypeList()}})},kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("带材牌号管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createRibbon}},[e._v("新增带材牌号")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.ribbonTypeList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"带材牌号名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"NCode",label:"NC编码",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.editRibbon(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.delRibbon(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var wt=a("VU/8")(Tt,kt,!1,function(e){a("37Hs")},"data-v-10e5a968",null).exports,yt={ribbonWidthId:"",ribbonWidth:""},xt={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{ribbonWidthId:"",ribbonWidth:""},rules:{ribbonWidth:[{required:!0,message:"请填写带材规格",trigger:"blur"},{validator:$e,trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},yt):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="create"===e.dialogData.formType?{method:"post",url:P}:{method:"put",url:U},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},Lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增带材规格":"修改带材规格",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"带材规格：",prop:"ribbonWidth"}},[a("el-input",{model:{value:e.formData.ribbonWidth,callback:function(t){e.$set(e.formData,"ribbonWidth",t)},expression:"formData.ribbonWidth"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Dt={name:"ribbon",components:{dialogForm:a("VU/8")(xt,Lt,!1,function(e){a("57G3")},"data-v-0b02e9c6",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!1}},computed:Ae()({},Object(je.c)(["ribbonWidthList"])),created:function(){this.getRibbonWidthList()},methods:Ae()({},Object(je.b)(["getRibbonWidthList"]),{add:function(){this.dialogVisible=!0,this.formType="create"},edit:function(e){this.dialogVisible=!0,this.formType="edit",this.rowData=e},del:function(e){var t=this,a=e.ribbonWidthId,i=e.ribbonWidth;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",K,{ribbonWidthId:a}).then(function(e){t.getRibbonWidthList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getRibbonWidthList()}})},Ft={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("带材规格管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增带材规格")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.ribbonWidthList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"带材规格(mm)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var Ct=a("VU/8")(Dt,Ft,!1,function(e){a("DKwE")},"data-v-de1f9282",null).exports,St={ribbonThicknessId:"",ribbonThicknessLevel:"",ribbonThicknessRange:""},It={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{ribbonThicknessId:"",ribbonThicknessLevel:"",ribbonThicknessRange:""},rules:{ribbonThicknessLevel:[{required:!0,message:"请填写带材厚度等级",trigger:"blur"},{validator:Oe,trigger:"blur"}],ribbonThicknessRange:[{required:!0,message:"请填写对应厚度范围",trigger:"blur"},{max:50,message:"长度不能超过50位",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},St):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="create"===e.dialogData.formType?{method:"post",url:X}:{method:"put",url:G},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},Nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增带材厚度等级":"修改带材厚度等级",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"150px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"带材厚度等级：",prop:"ribbonThicknessLevel"}},[a("el-input",{model:{value:e.formData.ribbonThicknessLevel,callback:function(t){e.$set(e.formData,"ribbonThicknessLevel",t)},expression:"formData.ribbonThicknessLevel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"对应厚度范围：",prop:"ribbonThicknessRange"}},[a("el-input",{model:{value:e.formData.ribbonThicknessRange,callback:function(t){e.$set(e.formData,"ribbonThicknessRange",t)},expression:"formData.ribbonThicknessRange"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Wt={name:"ribbon",components:{dialogForm:a("VU/8")(It,Nt,!1,function(e){a("fniu")},"data-v-70d83b78",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!1}},computed:Ae()({},Object(je.c)(["ribbonThicknessLevelList"])),created:function(){this.getRibbonThicknessLevelList()},methods:Ae()({},Object(je.b)(["getRibbonThicknessLevelList"]),{add:function(){this.dialogVisible=!0,this.formType="create"},edit:function(e){this.dialogVisible=!0,this.formType="edit",this.rowData=e},del:function(e){var t=this,a=e.ribbonThicknessLevelId,i=e.ribbonThicknessLevel;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",Y,{ribbonThicknessLevelId:a}).then(function(e){t.getRibbonThicknessLevelList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getRibbonThicknessLevelList()}})},Et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("带材厚度等级管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增带材厚度等级")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.ribbonThicknessLevelList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"带材厚度等级名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessRange",label:"对应厚度范围",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var At=a("VU/8")(Wt,Et,!1,function(e){a("Q30H")},"data-v-66d83152",null).exports,Rt={ribbonToughnessLevelId:"",ribbonToughness:"",ribbonToughnessLevel:""},$t={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{ribbonToughnessLevelId:"",ribbonToughness:"",ribbonToughnessLevel:""},rules:{ribbonToughness:[{required:!0,message:"请填写带材韧性",trigger:"blur"},{maxlength:10,message:"不能超过10个字",trigger:"blur"}],ribbonToughnessLevel:[{required:!0,message:"请填写带材韧性等级",trigger:"blur"},{maxlength:1,message:"不能超过1个字母",trigger:"blur"},{pattern:/^[A-Z]$/,message:"只能填写大写字母",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},Rt):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="create"===e.dialogData.formType?{method:"post",url:te}:{method:"put",url:ae},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},Ot={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增带材韧性":"修改带材韧性",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"韧性等级：",prop:"ribbonToughnessLevel"}},[a("el-input",{model:{value:e.formData.ribbonToughnessLevel,callback:function(t){e.$set(e.formData,"ribbonToughnessLevel",t)},expression:"formData.ribbonToughnessLevel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"带材韧性：",prop:"ribbonToughness"}},[a("el-input",{model:{value:e.formData.ribbonToughness,callback:function(t){e.$set(e.formData,"ribbonToughness",t)},expression:"formData.ribbonToughness"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Bt={name:"ribbon",components:{dialogForm:a("VU/8")($t,Ot,!1,function(e){a("HyE9")},"data-v-cb561996",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!1}},computed:Ae()({},Object(je.c)(["ribbonToughnessLevelList"])),created:function(){this.getRibbonToughnessLevelList()},methods:Ae()({},Object(je.b)(["getRibbonToughnessLevelList"]),{add:function(){this.dialogVisible=!0,this.formType="create"},edit:function(e){this.dialogVisible=!0,this.formType="edit",this.rowData=e},del:function(e){var t=this,a=e.ribbonToughnessLevelId,i=e.ribbonToughness;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",ie,{ribbonToughnessLevelId:a}).then(function(e){t.getRibbonToughnessLevelList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getRibbonToughnessLevelList()}})},qt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("带材韧性管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增带材韧性")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.ribbonToughnessLevelList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughness",label:"带材韧性",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughnessLevel",label:"带材韧性级别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var zt=a("VU/8")(Bt,qt,!1,function(e){a("jjwR")},"data-v-04ed8350",null).exports,jt={laminationLevelId:"",laminationLevel:"",laminationFactorRange:""},Jt={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{laminationLevelId:"",laminationLevel:"",laminationFactorRange:""},rules:{laminationLevel:[{required:!0,message:"请填写带材叠片等级",trigger:"blur"},{validator:Oe,trigger:"blur"}],laminationFactorRange:[{required:!0,message:"请填写对应叠片系数范围",trigger:"blur"},{max:50,message:"长度不能超过50位",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},jt):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="create"===e.dialogData.formType?{method:"post",url:re}:{method:"put",url:ne},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},Ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增带材叠片等级":"修改带材叠片等级",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"150px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"带材叠片等级：",prop:"laminationLevel"}},[a("el-input",{model:{value:e.formData.laminationLevel,callback:function(t){e.$set(e.formData,"laminationLevel",t)},expression:"formData.laminationLevel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"对应叠片系数范围：",prop:"laminationFactorRange"}},[a("el-input",{model:{value:e.formData.laminationFactorRange,callback:function(t){e.$set(e.formData,"laminationFactorRange",t)},expression:"formData.laminationFactorRange"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Vt={name:"ribbon",components:{dialogForm:a("VU/8")(Jt,Ht,!1,function(e){a("xuvX")},"data-v-13c9109d",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!1}},computed:Ae()({},Object(je.c)(["laminationLevelList"])),created:function(){this.getLaminationLevelList()},methods:Ae()({},Object(je.b)(["getLaminationLevelList"]),{add:function(){this.dialogVisible=!0,this.formType="create"},edit:function(e){this.dialogVisible=!0,this.formType="edit",this.rowData=e},del:function(e){var t=this,a=e.laminationLevelId,i=e.laminationLevel;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",oe,{laminationLevelId:a}).then(function(e){t.getLaminationLevelList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getLaminationLevelList()}})},Mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("带材叠片等级管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增带材叠片等级")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.laminationLevelList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationLevel",label:"带材叠片等级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationFactorRange",label:"对应叠片系数范围",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var Qt=a("VU/8")(Vt,Mt,!1,function(e){a("iRPG")},"data-v-080a36af",null).exports,Pt={roleId:"",username:"",adminname:""},Ut=[{id:2,name:"生产计划"},{id:3,name:"普通管理员"},{id:15,name:"重卷组长"},{id:4,name:"重卷"},{id:5,name:"检测"},{id:6,name:"库房"},{id:7,name:"6号机组-喷带"},{id:8,name:"6号机组-化钢"},{id:9,name:"7号机组-喷带"},{id:10,name:"7号机组-化钢"},{id:11,name:"8号机组-喷带"},{id:12,name:"8号机组-化钢"},{id:13,name:"9号机组-喷带"},{id:14,name:"9号机组-化钢"}],Kt={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{roleId:"",username:"",adminname:""},roleList:Ut,rules:{roleId:[{required:!0,message:"请选择角色",trigger:"blur"}],username:[{required:!0,message:"请填写账号",trigger:"blur"},{max:20,message:"账号长度在6-20位之间",trigger:"blur"},{min:6,message:"账号长度在6-20位之间",trigger:"blur"}],adminname:[{required:!0,message:"请填写姓名",trigger:"blur"},{max:10,message:"姓名长度在2-10位之间",trigger:"blur"},{min:2,message:"姓名长度在2-10位之间",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]+$/,message:"只能输入中文汉字",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},Pt):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,e.$http("POST",k,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},Zt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增用户":"修改用户",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"30%","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"角色：",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.roleId,callback:function(t){e.$set(e.formData,"roleId",t)},expression:"formData.roleId"}},e._l(e.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账号：",prop:"username"}},[a("el-input",{model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名：",prop:"adminname"}},[a("el-input",{model:{value:e.formData.adminname,callback:function(t){e.$set(e.formData,"adminname",t)},expression:"formData.adminname"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Xt={name:"user",components:{dialogForm:a("VU/8")(Kt,Zt,!1,function(e){a("8mCT")},"data-v-51dbf877",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!0}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;this.$http("GET",T,{roleId:1}).then(function(t){e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},createUser:function(){this.dialogVisible=!0,this.formType="create"},delUser:function(e){var t=this,a=e.username,i=e.adminname;this.$confirm("删除后数据无法恢复，确定要删除 "+i+"-"+a+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",y,{username:a}).then(function(e){t.getUserList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getUserList()}}},Gt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("账号管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createUser}},[e._v("新增用户")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"password",label:"密码",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleId",label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.roleId?a("span",[e._v("厂长")]):e._e(),e._v(" "),2===t.row.roleId?a("span",[e._v("生产计划")]):e._e(),e._v(" "),3===t.row.roleId?a("span",[e._v("普通管理员")]):e._e(),e._v(" "),15===t.row.roleId?a("span",[e._v("重卷组长")]):e._e(),e._v(" "),4===t.row.roleId?a("span",[e._v("重卷")]):e._e(),e._v(" "),5===t.row.roleId?a("span",[e._v("检测")]):e._e(),e._v(" "),6===t.row.roleId?a("span",[e._v("库房")]):e._e(),e._v(" "),7===t.row.roleId?a("span",[e._v("6号机组-喷带")]):e._e(),e._v(" "),8===t.row.roleId?a("span",[e._v("6号机组-化钢")]):e._e(),e._v(" "),9===t.row.roleId?a("span",[e._v("7号机组-喷带")]):e._e(),e._v(" "),10===t.row.roleId?a("span",[e._v("7号机组-化钢")]):e._e(),e._v(" "),11===t.row.roleId?a("span",[e._v("8号机组-喷带")]):e._e(),e._v(" "),12===t.row.roleId?a("span",[e._v("8号机组-化钢")]):e._e(),e._v(" "),13===t.row.roleId?a("span",[e._v("9号机组-喷带")]):e._e(),e._v(" "),14===t.row.roleId?a("span",[e._v("9号机组-化钢")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"adminname",label:"姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"注册时间",align:"center",width:"170px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"最后登录时间",align:"center",width:"170px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.delUser(t.row)}}},[e._v("删除账户")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var Yt=a("VU/8")(Xt,Gt,!1,function(e){a("veqG")},"data-v-7007559d",null).exports,ea=a("fZjL"),ta=a.n(ea),aa={castId:6,roller:"",rollMachine:null,isFlat:"是",furnace:"",coilNumber:"",diameter:"",coilWeight:""},ia={data:function(){return{userinfo:{},visible:!1,loading:!1,formData:{castId:6,roller:"",rollMachine:null,isFlat:"是",furnace:"",coilNumber:"",diameter:"",coilWeight:""},rules:{rollMachine:[{required:!0,message:"请选择重卷机编号",trigger:"blur"}],furnace:[{required:!0,message:"请填写炉号",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"},{validator:ze,trigger:"blur"}],coilNumber:[{required:!0,message:"请填写盘号",trigger:"blur"},{validator:$e,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],diameter:[{required:!0,message:"请填写外径",trigger:"blur"},{validator:Oe,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],coilWeight:[{required:!0,message:"请填写重量",trigger:"blur"},{validator:Be,trigger:"blur"},{validator:qe(99999),trigger:"blur"}],isFlat:[{required:!0,message:"请选择是否平整",trigger:"blur"}]}}},props:{dialogData:{type:Object,required:!0}},created:function(){this.userinfo=JSON.parse(localStorage.getItem("userinfo")),"add"===this.dialogData.formType?this.formData=We()({},aa,{castId:Number(this.$route.params.castId),roller:this.userinfo.adminname}):this.formData=We()(this.formData,this.dialogData.rowData)},mounted:function(){},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,e.$http("GET",S,{castId:e.formData.castId,furnace:e.formData.furnace}).then(function(t){if(0===t.list.length)return e.loading=!1,e.$message({type:"error",message:"炉号有误，获取带材信息失败"});var a=t.list[0],i=a.ribbonTypeName,l=a.ribbonWidth,r=a.createTime,n=a.caster,o=Ae()({ribbonTypeName:i,ribbonWidth:l,castDate:r,caster:n,roleId:e.userinfo.roleId,adminname:e.userinfo.adminname},e.formData),s="add"===e.dialogData.formType?{method:"POST",url:A}:{method:"PUT",url:R},c=s.method,b=s.url;ta()(o).forEach(function(e){null==o[e]&&delete o[e]}),e.$http(c,b,o).then(function(t){-1!==t.status&&(e.formData.coilNumber++,e.formData.coilWeight=null,e.formData.diameter=null,e.$emit("submit"))}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})}).catch(function(t){e.loading=!1,console.log(t)})})}}},la={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"add"===e.dialogData.formType?"新增重卷记录-"+e.$route.params.castId+"号机组":"修改重卷记录-"+e.$route.params.castId+"号机组",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"30%","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"重卷人员：",prop:"roller"}},[a("span",[e._v(e._s(e.formData.roller))])]),e._v(" "),a("el-form-item",{attrs:{label:"重卷机器：",prop:"rollMachine"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.formData.rollMachine,callback:function(t){e.$set(e.formData,"rollMachine",t)},expression:"formData.rollMachine"}},[a("el-option",{attrs:{label:"#1",value:1}}),e._v(" "),a("el-option",{attrs:{label:"#2",value:2}}),e._v(" "),a("el-option",{attrs:{label:"#3",value:3}}),e._v(" "),a("el-option",{attrs:{label:"#4",value:4}}),e._v(" "),a("el-option",{attrs:{label:"#5",value:5}}),e._v(" "),a("el-option",{attrs:{label:"#6",value:6}}),e._v(" "),a("el-option",{attrs:{label:"#7",value:7}}),e._v(" "),a("el-option",{attrs:{label:"#8",value:8}}),e._v(" "),a("el-option",{attrs:{label:"#9",value:9}}),e._v(" "),a("el-option",{attrs:{label:"#10",value:10}}),e._v(" "),a("el-option",{attrs:{label:"#11",value:11}}),e._v(" "),a("el-option",{attrs:{label:"#12",value:12}}),e._v(" "),a("el-option",{attrs:{label:"#13",value:13}}),e._v(" "),a("el-option",{attrs:{label:"#14",value:14}}),e._v(" "),a("el-option",{attrs:{label:"#15",value:15}}),e._v(" "),a("el-option",{attrs:{label:"#16",value:16}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号：",prop:"furnace"}},[a("el-input",{model:{value:e.formData.furnace,callback:function(t){e.$set(e.formData,"furnace",t)},expression:"formData.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"盘号：",prop:"coilNumber"}},[a("el-input",{model:{value:e.formData.coilNumber,callback:function(t){e.$set(e.formData,"coilNumber",t)},expression:"formData.coilNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外径：",prop:"diameter"}},[a("el-input",{model:{value:e.formData.diameter,callback:function(t){e.$set(e.formData,"diameter",t)},expression:"formData.diameter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重量：",prop:"coilWeight"}},[a("el-input",{model:{value:e.formData.coilWeight,callback:function(t){e.$set(e.formData,"coilWeight",t)},expression:"formData.coilWeight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否平整：",prop:"isFlat"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.formData.isFlat,callback:function(t){e.$set(e.formData,"isFlat",t)},expression:"formData.isFlat"}},[a("el-option",{attrs:{value:"是",label:"是"}}),e._v(" "),a("el-option",{attrs:{value:"否",label:"否"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]},ra={name:"melt",components:{dialogForm:a("VU/8")(ia,la,!1,null,null,null).exports,Collapse:nt},data:function(){return{userinfo:{},isAddable:!1,isEditable:!1,castId:6,searchForm:{caster:"",furnace:"",roller:"",date:[]},loading:!1,tableData:[],dialogVisible:!1,formType:"add",rowData:{},pageConfig:{total:1,current:1,pageSize:10},tableHeight:200}},beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isAddable=this.setIsAddable(),this.isEditable=this.setIsEditable(),a()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isAddable=this.setIsAddable(),this.isEditable=this.setIsEditable(),this.getTableData()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:{dateFormat:function(e,t){return Ce(e.castDate)},rollDateFormat:function(e,t){return Ce(e.createdAt)},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",furnace:"",roller:"",date:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,roller:this.searchForm.roller};We()(t,a),this.$http("get",E,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},add:function(){this.dialogVisible=!0,this.formType="add"},edit:function(e){this.rowData=e,this.dialogVisible=!0,this.formType="edit"},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){"edit"===this.formType&&(this.dialogVisible=!1),this.pageConfig.current=1,this.getTableData()},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},setIsAddable:function(){return 4==this.userinfo.roleId||15==this.userinfo.roleId},setIsEditable:function(){return 4==this.userinfo.roleId||15==this.userinfo.roleId||1==this.userinfo.roleId},exportExcel:function(){var e={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,roller:this.searchForm.roller},t=B+"?"+Ue.a.stringify(e);window.open(t)}}},na={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("重卷记录")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"生产日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"喷带手："}},[a("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:e.searchForm.caster,callback:function(t){e.$set(e.searchForm,"caster",t)},expression:"searchForm.caster"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重卷："}},[a("el-input",{attrs:{placeholder:"请输入重卷人姓名"},model:{value:e.searchForm.roller,callback:function(t){e.$set(e.searchForm,"roller",t)},expression:"searchForm.roller"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isAddable?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("创建重卷记录")]):e._e(),e._v(" "),1===e.userinfo.roleId||2===e.userinfo.roleId||3===e.userinfo.roleId?a("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight}},[a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center","min-width":"170px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center","min-width":"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castDate",label:"生产日期",align:"center",formatter:e.dateFormat,"min-width":"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center","min-width":"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"diameter",label:"外径(mm)",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilWeight",label:"重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rollMachine",label:"机器编号",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roller",label:"重卷人员",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdAt",label:"重卷日期",align:"center",formatter:e.rollDateFormat,"min-width":"110px"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否平整",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{text_danger:"否"===t.row.isFlat}},[e._v(e._s(t.row.isFlat))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditable?a("el-button",{attrs:{size:"mini",type:"primary",disabled:t.row.roller!==e.userinfo.adminname&&1!==e.userinfo.roleId},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]},oa=a("VU/8")(ra,na,!1,null,null,null).exports,sa={name:"melt",components:{Collapse:nt},data:function(){return{userinfo:{},castId:6,searchForm:{caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[],thicknessDivation:""},loading:!1,tableData:[],pageConfig:{total:1,current:1,pageSize:10},isExportable:!1,isEditable:!1,isDeleteable:!1,tableHeight:550,multipleSelection:[],isBatchInStored:!1,uniqueAppearenceLevelList:[]}},computed:Ae()({},Object(je.c)(["ribbonToughnessLevelList","ribbonTypeList","ribbonWidthList","ribbonThicknessLevelList","laminationLevelList","clientsList","appearenceList"])),beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isBatchInStored=this.setBatchInStored(),a()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isBatchInStored=this.setBatchInStored(),this.getTableData(),this.getRibbonToughnessLevelList(),this.getRibbonTypeList(),this.getRibbonWidthList(),this.getRibbonThicknessLevelList(),this.getLaminationLevelList(),this.getClientsList(),this.getAppearenceLevelList(),this.uniqueAppearenceLevelList=this.appearenceList.reduce(function(e,t){return e.includes(t.appearenceLevel)||e.push(t.appearenceLevel),e},[])},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-80}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-80},1e3)},methods:Ae()({thicknessChangeHandler:function(e,t){var a=[t.ribbonThickness1,t.ribbonThickness2,t.ribbonThickness3,t.ribbonThickness4,t.ribbonThickness5,t.ribbonThickness6,t.ribbonThickness7,t.ribbonThickness8,t.ribbonThickness9];a=a.map(function(e){if(""!==e)return Number(e)}).filter(function(e){return void 0!==e}),t.ribbonThicknessDeviation=this.calcMaxDeviation(a),t.ribbonThickness=a.length>0?(a.reduce(function(e,t){return e+t},0)/a.length).toFixed(2):0,t.ribbonThicknessLevel=this.calcribbonThicknessLevel(t.ribbonThickness)}},Object(je.b)(["getRibbonToughnessLevelList","getRibbonTypeList","getRibbonWidthList","getRibbonThicknessLevelList","getLaminationLevelList","getClientsList","getAppearenceLevelList"]),{dateFormat:function(e,t){return Ce(e.castDate)},dateTimeFormat:function(e,t){return e.measureDate?Se(e.measureDate):""},setEditable:function(){return 5==this.userinfo.roleId},setDeleteable:function(){return 1==this.userinfo.roleId},setExportable:function(){return!![1,2,3,5].includes(this.userinfo.roleId)},setBatchInStored:function(){return 5==this.userinfo.roleId},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:we()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:we()(this.searchForm.appearenceLevels),thicknessDivation:this.searchForm.thicknessDivation};We()(t,a),this.$http("get",E,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,t.list&&t.list.forEach(function(t){5==e.userinfo.roleId?t.isEditing=!0:t.isEditing=!1,t.storageRule={orderThickness:t.orderThickness,orderLaminationFactor:t.orderLaminationFactor,orderRibbonToughnessLevels:t.orderRibbonToughnessLevels,orderAppearenceLevels:t.orderAppearenceLevels,qualifiedDemands:[1,2,3,5,6,15].includes(Number(e.userinfo.roleId))?JSON.parse(t.qualifiedDemands):[]},t.clients=t.clients?t.clients.split(","):[]}),e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},edit:function(e){if((1==e.isStored||2==e.isStored)&&1==e.isMeasureConfirmed)return this.$message({message:"该带材已经入库，您无权限操作，请联系库房主管人员！",type:"error"})},del:function(e){var t=this,a=e.measureId,i=e.furnace,l=e.coilNumber;this.$confirm("删除后数据无法恢复，确定删除 "+i+" 的第 "+l+" 盘吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",$,{measureId:a}).then(function(e){t.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},save:function(e){if(e.laminationFactor=((e.coilWeight-.09)/(Math.PI*(e.diameter*e.diameter/4-9025/4)*7.2)*Math.pow(10,6)/e.realRibbonWidth).toFixed(2),e.laminationLevel=this.calcLaminationLevel(e.laminationFactor),e.ribbonToughnessLevel=this.ribbonToughnessLevelList.reduce(function(e,t){return e[t.ribbonToughness]=t.ribbonToughnessLevel,e},{})[e.ribbonToughness],e.appearenceLevel=this.appearenceList.reduce(function(e,t){return e[t.appearence]=t.appearenceLevel,e},{})[e.appearence],e.ribbonThickness1="string"==typeof e.ribbonThickness1?Number(e.ribbonThickness1.trim()):e.ribbonThickness1,e.ribbonThickness2="string"==typeof e.ribbonThickness2?Number(e.ribbonThickness2.trim()):e.ribbonThickness2,e.ribbonThickness3="string"==typeof e.ribbonThickness3?Number(e.ribbonThickness3.trim()):e.ribbonThickness3,e.ribbonThickness4="string"==typeof e.ribbonThickness4?Number(e.ribbonThickness4.trim()):e.ribbonThickness4,e.ribbonThickness5="string"==typeof e.ribbonThickness5?Number(e.ribbonThickness5.trim()):e.ribbonThickness5,e.ribbonThickness6="string"==typeof e.ribbonThickness6?Number(e.ribbonThickness6.trim()):e.ribbonThickness6,e.ribbonThickness7="string"==typeof e.ribbonThickness7?Number(e.ribbonThickness7.trim()):e.ribbonThickness7,e.ribbonThickness8="string"==typeof e.ribbonThickness8?Number(e.ribbonThickness8.trim()):e.ribbonThickness8,e.ribbonThickness9="string"==typeof e.ribbonThickness9?Number(e.ribbonThickness9.trim()):e.ribbonThickness9,e.ribbonThicknessDeviation=this.calcMaxDeviation([e.ribbonThickness1,e.ribbonThickness2,e.ribbonThickness3,e.ribbonThickness4,e.ribbonThickness5,e.ribbonThickness6,e.ribbonThickness7,e.ribbonThickness8,e.ribbonThickness9]),e.ribbonThickness=((e.ribbonThickness1+e.ribbonThickness2+e.ribbonThickness3+e.ribbonThickness4+e.ribbonThickness5+e.ribbonThickness6+e.ribbonThickness7+e.ribbonThickness8+e.ribbonThickness9)/9).toFixed(2),e.ribbonThicknessLevel=this.calcribbonThicknessLevel(e.ribbonThickness),e.ribbonTotalLevel="不合格"===e.laminationLevel||"不合格"===e.appearenceLevel?"不合格":e.ribbonThicknessLevel+e.laminationLevel+e.ribbonToughnessLevel+e.appearenceLevel,e.ribbonThicknessDeviation>3&&["D","E"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel="不合格"),e.ribbonWidth<50?["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.2&&(e.ribbonTotalLevel="不合格"):e.ribbonWidth>=50&&["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.3&&(e.ribbonTotalLevel="不合格"),["AD25","ND25"].includes(e.ribbonTypeName)){var t=e.realRibbonWidth-e.ribbonWidth;((t=t.toFixed(1))>=.1||t<=-.2)&&(e.ribbonTotalLevel="不合格")}if("不合格"!==e.ribbonTotalLevel){e.ribbonThickness>=20&&e.ribbonThickness<22&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"G"),e.ribbonThickness>=23&&e.ribbonThickness<24&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"L"),e.ribbonThicknessDeviation>3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"F");var a=e.realRibbonWidth-e.ribbonWidth;a=a.toFixed(1),e.ribbonWidth<50?Math.abs(a)>.2&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(a<-.2?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":a>.2&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E")):e.ribbonWidth>=50&&Math.abs(a)>.3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(a<-.3?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":a>.3&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E"))}(["",void 0,null].includes(e.ribbonThicknessLevel)||["",void 0,null].includes(e.laminationLevel)||["",void 0,null].includes(e.ribbonToughnessLevel)||["",void 0,null].includes(e.appearenceLevel))&&(e.ribbonTotalLevel=""),"不合格"===e.ribbonTotalLevel?(e.isStored=3,e.isMeasureConfirmed=1):(e.isStored=this.setStoredType(e),1===e.isStored?(e.inPlanStoredWeight=e.coilNetWeight,2===e.ribbonThicknessLevel&&(e.inPlanThickRibbonWeight=e.coilNetWeight)):2===e.isStored&&(e.outPlanStoredWeight=e.coilNetWeight),e.totalStoredWeight=(e.inPlanStoredWeight+e.outPlanStoredWeight).toFixed(2),this.calcQualityOfABCDE(e),this.calcThinRibbonWeight(e),e.qualityOfGood=e.inPlanStoredWeight,2===e.isStored&&(/^[3-8][1-4][A-E][A-C]G?([+-]E)?F?$/.test(e.ribbonTotalLevel)||/^2[2-3][A-C]BL?([+-]E)?F?$/.test(e.ribbonTotalLevel)?e.qualityOfFine=e.coilNetWeight:e.qualityOfNormal=e.coilNetWeight));var i=Object(Je.cloneDeep)(e);i.clients=i.clients.join(),ta()(i).forEach(function(e){null==i[e]&&delete i[e]}),this.$http("PUT",R,i).then(function(e){}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},calcThinRibbonWeight:function(e){if(!(e.ribbonThickness>23))return e.laminationFactor>=.78?e.highFactorThinRibbonWeight=e.coilNetWeight:void(e.laminationFactor>=.75&&(e.thinRibbonWeight=e.coilNetWeight))},calcQualityOfABCDE:function(e){var t=e.ribbonTotalLevel;/^[3-8][2-4][A-E][A-C]G?([+-]E)?F?$/.test(t)?e.qualityOfA=e.coilNetWeight:/^[3-8]1[A-E][A-C]G?([+-]E)?F?$/.test(t)?e.qualityOfB=e.coilNetWeight:/^[3-8]0[A-E][A-C]G?([+-]E)?F?$/.test(t)?e.qualityOfC=e.coilNetWeight:/^2[1-4][A-E][A-C]L?([+-]E)?F?$/.test(t)?e.qualityOfD=e.coilNetWeight:/^1[1-4][A-E][A-C]([+-]E)?F?$/.test(t)&&(e.qualityOfE=e.coilNetWeight)},calcLaminationLevel:function(e){return e?e>=.84?"4":e>=.82&&e<.84?"3":e>=.8&&e<.82?"2":e>=.78&&e<.8?"1":e>=.75&&e<.78?"0":e>=.72&&e<.75?"8":"不合格":""},calcMaxDeviation:function(e){return e.sort(function(e,t){return e-t}),e[e.length-1]-e[0]},calcribbonThicknessLevel:function(e){if(e)return e>26?1:e>23&&e<=26?2:e>20&&e<=23?3:e>18&&e<=20?4:e>16&&e<=18?5:e>14&&e<=16?6:e>12&&e<=14?7:e<=12?8:void 0},setStoredType:function(e){var t=!0,a=!0,i=e.ribbonThickness,l=e.orderThickness;if(l.indexOf("≤")>-1){var r=parseInt(l.substr(1));i>r&&(t=!1)}else if(l.indexOf("-")>-1){var n=l.split("-")[1],o=l.split("-")[0];(i<o||i>n)&&(t=!1)}var s=e.laminationFactor,c=e.orderLaminationFactor;if(c.indexOf("≥")>-1){var b=parseInt(c.substr(1));s<b&&(t=!1)}else if(c.indexOf("-")>-1){var u=c.split("-")[1],d=c.split("-")[0];(s<d||s>u)&&(t=!1)}var m=e.ribbonToughnessLevel;e.orderRibbonToughnessLevels.split(",").includes(m)||(t=!1);var p=e.appearenceLevel;return e.orderAppearenceLevels.split(",").includes(p)||(t=!1),t?1:((JSON.parse(e.qualifiedDemands)||[]).forEach(function(e){var t=e.qualifiedThickness;if(t.indexOf("≤")>-1){var l=parseInt(t.substr(1));i>l&&(a=!1)}else if(t.indexOf("-")>-1){var r=t.split("-")[1],n=t.split("-")[0];(i<n||i>r)&&(a=!1)}var o=e.qualifiedLaminationFactor;if(o.indexOf("≥")>-1){var c=parseInt(o.substr(1));s<c&&(a=!1)}else if(o.indexOf("-")>-1){var b=o.split("-")[1],u=o.split("-")[0];(s<u||s>b)&&(a=!1)}if(e.qualifiedRibbonToughnessLevels.includes(m)||(a=!1),e.qualifiedAppearenceLevels.includes(p)||(a=!1),a)return 2}),3)},exportExcel:function(){var e={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:we()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:we()(this.searchForm.appearenceLevels)},t=O+"?"+Ue.a.stringify(e);window.open(t)},setSelectable:function(e,t){return!(![1,2].includes(e.isStored)||e.isMeasureConfirmed)},handleSelectionChange:function(e){this.multipleSelection=e},measureConfirm:function(){var e=this,t=Object(Je.cloneDeep)(this.multipleSelection);if(0===t.length)return this.$alert("请选择要入库的带材","提示",{type:"warning"});t.forEach(function(e){e.isMeasureConfirmed=1,e.clients=e.clients.join()}),this.$http("PUT",R,{dataJson:we()(t)}).then(function(t){e.getTableData()}).catch(function(e){console.log(e)})}})},ca={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("检测记录")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"生产日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"喷带手："}},[a("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:e.searchForm.caster,callback:function(t){e.$set(e.searchForm,"caster",t)},expression:"searchForm.caster"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonTypeNames,callback:function(t){e.$set(e.searchForm,"ribbonTypeNames",t)},expression:"searchForm.ribbonTypeNames"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厚度级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonThicknessLevels,callback:function(t){e.$set(e.searchForm,"ribbonThicknessLevels",t)},expression:"searchForm.ribbonThicknessLevels"}},e._l(e.ribbonThicknessLevelList,function(e){return a("el-option",{key:e.ribbonThicknessLevelId,attrs:{label:e.ribbonThicknessLevel,value:e.ribbonThicknessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"叠片级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.laminationLevels,callback:function(t){e.$set(e.searchForm,"laminationLevels",t)},expression:"searchForm.laminationLevels"}},e._l(e.laminationLevelList,function(e){return a("el-option",{key:e.laminationLevelId,attrs:{label:e.laminationLevel,value:e.laminationLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"韧性级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonToughnessLevels,callback:function(t){e.$set(e.searchForm,"ribbonToughnessLevels",t)},expression:"searchForm.ribbonToughnessLevels"}},e._l(e.ribbonToughnessLevelList,function(e){return a("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughnessLevel,value:e.ribbonToughnessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"外观级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.appearenceLevels,callback:function(t){e.$set(e.searchForm,"appearenceLevels",t)},expression:"searchForm.appearenceLevels"}},e._l(e.uniqueAppearenceLevelList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厚度偏差："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.thicknessDivation,callback:function(t){e.$set(e.searchForm,"thicknessDivation",t)},expression:"searchForm.thicknessDivation"}},[a("el-option",{attrs:{label:"<=1",value:1}}),e._v(" "),a("el-option",{attrs:{label:"<=2",value:2}}),e._v(" "),a("el-option",{attrs:{label:"<=3",value:3}}),e._v(" "),a("el-option",{attrs:{label:"<=4",value:4}}),e._v(" "),a("el-option",{attrs:{label:"<=5",value:5}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isBatchInStored?a("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.measureConfirm}},[e._v("确认入库")]):e._e(),e._v(" "),e.isExportable?a("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30",selectable:e.setSelectable}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"50px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castDate",label:"生产日期",align:"center",formatter:e.dateFormat,width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"diameter",label:"外径(mm)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilWeight",label:"重量(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationFactor",label:"叠片系数",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationLevel",label:"叠片等级",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realRibbonWidth",label:"实际带宽",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.realRibbonWidth)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.realRibbonWidth,callback:function(a){e.$set(t.row,"realRibbonWidth",a)},expression:"scope.row.realRibbonWidth"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness1",label:"带厚1(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness1)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness1,callback:function(a){e.$set(t.row,"ribbonThickness1",a)},expression:"scope.row.ribbonThickness1"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness2",label:"带厚2(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness2)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness2,callback:function(a){e.$set(t.row,"ribbonThickness2",a)},expression:"scope.row.ribbonThickness2"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness3",label:"带厚3(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness3)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness3,callback:function(a){e.$set(t.row,"ribbonThickness3",a)},expression:"scope.row.ribbonThickness3"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness4",label:"带厚4(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness4)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness4,callback:function(a){e.$set(t.row,"ribbonThickness4",a)},expression:"scope.row.ribbonThickness4"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness5",label:"带厚5(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness5)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness5,callback:function(a){e.$set(t.row,"ribbonThickness5",a)},expression:"scope.row.ribbonThickness5"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness6",label:"带厚6(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness6)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness6,callback:function(a){e.$set(t.row,"ribbonThickness6",a)},expression:"scope.row.ribbonThickness6"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness7",label:"带厚7(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness7)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness7,callback:function(a){e.$set(t.row,"ribbonThickness7",a)},expression:"scope.row.ribbonThickness7"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness8",label:"带厚8(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness8)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness8,callback:function(a){e.$set(t.row,"ribbonThickness8",a)},expression:"scope.row.ribbonThickness8"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness9",label:"带厚9(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness9)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness9,callback:function(a){e.$set(t.row,"ribbonThickness9",a)},expression:"scope.row.ribbonThickness9"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessDeviation",label:"厚度偏差(μm)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness",label:"平均厚度(μm)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"厚度级别",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughness",label:"韧性",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonToughness)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.ribbonToughness,callback:function(a){e.$set(t.row,"ribbonToughness",a)},expression:"scope.row.ribbonToughness"}},e._l(e.ribbonToughnessLevelList,function(e){return a("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughness,value:e.ribbonToughness}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughnessLevel",label:"韧性等级",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appearence",label:"外观",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.appearence)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.appearence,callback:function(a){e.$set(t.row,"appearence",a)},expression:"scope.row.appearence"}},e._l(e.appearenceList,function(e){return a("el-option",{key:e.appearenceLevelId,attrs:{label:e.appearence,value:e.appearence}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"appearenceLevel",label:"外观等级",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTotalLevel",label:"综合级别",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:"不合格"===t.row.ribbonTotalLevel?"text_danger":""},[e._v(e._s(t.row.ribbonTotalLevel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库规则",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",trigger:"hover"}},[a("table",{staticClass:"popover_table",attrs:{cellpadding:"0",cellspacing:"0"}},[a("thead",[a("th",[e._v("类别")]),e._v(" "),a("th",[e._v("带厚")]),e._v(" "),a("th",[e._v("叠片")]),e._v(" "),a("th",[e._v("韧性")]),e._v(" "),a("th",[e._v("外观")])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("计划内入库要求")]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderThickness))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderLaminationFactor))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderRibbonToughnessLevels))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderAppearenceLevels))])]),e._v(" "),e._l(t.row.storageRule.qualifiedDemands,function(t,i){return a("tr",{key:i},[a("td",[e._v("计划外入库要求")]),e._v(" "),a("td",[e._v(e._s(t.qualifiedThickness))]),e._v(" "),a("td",[e._v(e._s(t.qualifiedLaminationFactor))]),e._v(" "),a("td",[e._v(e._s(t.qualifiedRibbonToughnessLevels.join()))]),e._v(" "),a("td",[e._v(e._s(t.qualifiedAppearenceLevels.join()))])])})],2)]),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[e._v("详情")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isStored",label:"是否入库",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isMeasureConfirmed?a("div",[1===t.row.isStored?a("span",[e._v("计划内入库")]):e._e(),e._v(" "),2===t.row.isStored?a("span",[e._v("计划外入库")]):e._e(),e._v(" "),3===t.row.isStored?a("span",{staticClass:"text_danger"},[e._v("否")]):e._e()]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unStoreReason",label:"不入库原因",align:"center",width:"100px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",{staticClass:"text_danger"},[e._v("\n            "+e._s(t.row.unStoreReason)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.unStoreReason,callback:function(a){e.$set(t.row,"unStoreReason",a)},expression:"scope.row.unStoreReason"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clients",label:"判定去向",align:"center",width:"120px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.clients?t.row.clients.toString():"")+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:"",multiple:"","collapse-tags":""},model:{value:t.row.clients,callback:function(a){e.$set(t.row,"clients",a)},expression:"scope.row.clients"}},e._l(e.clientsList,function(e){return a("el-option",{key:e.clientsId,attrs:{label:e.client,value:e.client,disabled:"是"===e.isFlat&&"否"==t.row.isFlat}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"measureDate",label:"检测时间",align:"center",width:"120px",formatter:e.dateTimeFormat,"show-overflow-tooltip":!0}}),e._v(" "),5==e.userinfo.roleId||1==e.userinfo.roleId?a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.isEditable},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]):a("el-button",{attrs:{size:"mini",type:"success",disabled:!e.isEditable},on:{click:function(a){e.save(t.row)}}},[e._v("保存")]),e._v(" "),e.isDeleteable?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")]):e._e()]}}])}):e._e()],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var ba=a("VU/8")(sa,ca,!1,function(e){a("CdUV")},"data-v-44707f7e",null).exports,ua={name:"storage",components:{Collapse:nt},data:function(){return{userinfo:{},castId:6,searchForm:{caster:"",furnace:"",date:[],outDate:[],ribbonTypeNames:[],ribbonWidths:[],ribbonTotalLevels:"",ribbonThicknessLevels:[],laminationLevels:[],place:"",isRemain:1},loading:!1,totalCoilNum:null,totalWeight:null,tableData:[],pageConfig:{total:1,current:1,pageSize:10},isExportable:!1,isEditable:!1,isDeleteable:!1,tableHeight:200,isOutStoreable:!1,allOutStoreForm:{loading:!1,visible:!1,place:"",takeBy:""},allOutStoreFormRules:{place:[{required:!0,message:"请输入仓位",trigger:"blur"},{pattern:/^1-[1-9]{1,2}-[1-9]{1,2}$/,message:"格式错误",trigger:"blur"}],takeBy:[{required:!0,message:"请填写实际去向",trigger:"blur"}]},batchOutStoreForm:{loading:!1,visible:!1,takeBy:""},batchOutStoreFormRules:{takeBy:[{required:!0,message:"请填写实际去向",trigger:"blur"}]},uploadExcelForm:{loading:!1,visible:!1,url:H,fileList:[]}}},computed:Ae()({},Object(je.c)(["ribbonTypeList","ribbonWidthList","ribbonThicknessLevelList","laminationLevelList"])),beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),a()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isOutStoreable=this.setOutStoreable(),this.getTableData(),this.getRibbonTypeList(),this.getRibbonWidthList(),this.getRibbonThicknessLevelList(),this.getLaminationLevelList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:Ae()({},Object(je.b)(["getRibbonTypeList","getRibbonWidthList","getRibbonThicknessLevelList","getLaminationLevelList"]),{inStoreDateFormat:function(e,t){return e.inStoreDate?Ce(e.inStoreDate):""},outStoreDateFormat:function(e,t){return e.outStoreDate?Ce(e.outStoreDate):""},setEditable:function(){return 6==this.userinfo.roleId||1==this.userinfo.roleId},setDeleteable:function(){return 1==this.userinfo.roleId||6==this.userinfo.roleId},setExportable:function(){return!![1,2,3,6].includes(this.userinfo.roleId)},setOutStoreable:function(){return 6==this.userinfo.roleId},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",furnace:"",date:[],outDate:[],ribbonTotalLevels:"",ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],place:"",isRemain:1};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],outStartTime:this.searchForm.outDate[0],outEndTime:this.searchForm.outDate[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonTotalLevels:this.searchForm.ribbonTotalLevels,place:this.searchForm.place,isRemain:this.searchForm.isRemain};We()(t,a),this.$http("get",q,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,t.list&&t.list.forEach(function(e){e.isEditing=!1}),e.totalCoilNum=t.totalCoilNum,e.totalWeight=t.totalWeight,e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},edit:function(e){e.isEditing=!0},del:function(e){var t=this,a=e.storageId,i=e.furnace,l=e.coilNumber;this.$confirm("确定退库 "+i+" 的第 "+l+" 盘吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",j,{storageId:a,furnace:i,coilNumber:l}).then(function(e){t.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},save:function(e){e.isEditing=!1,e.takeBy?e.remainWeight=0:e.remainWeight=e.coilNetWeight,this.$http("PUT",z,e).then(function(e){}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},exportExcel:function(){var e={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],outStartTime:this.searchForm.outDate[0],outEndTime:this.searchForm.outDate[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonTotalLevels:this.searchForm.ribbonTotalLevels,place:this.searchForm.place,isRemain:this.searchForm.isRemain},t=J+"?"+Ue.a.stringify(e);window.open(t)},setSelectable:function(e,t){return!0},handleSelectionChange:function(e){this.multipleSelection=e},allOutStoreHandler:function(){this.allOutStoreForm.visible=!0},closeAllOutDialog:function(){this.$refs.allOutStoreForm.resetFields(),this.allOutStoreForm.visible=!1},submitAllOutForm:function(){var e=this;this.$refs.allOutStoreForm.validate(function(t){if(!t)return!1;e.allOutStoreForm.loading=!0;var a={place:e.allOutStoreForm.place,takeBy:e.allOutStoreForm.takeBy,type:"all"};e.$http("PUT",z,a).then(function(t){e.pageConfig.current=1,e.getTableData({current:1})}).catch(function(e){console.log(e)}).finally(function(){e.allOutStoreForm.visible=!1,e.allOutStoreForm.loading=!1})})},batchOutStoreHandler:function(){this.multipleSelection&&this.multipleSelection.length>0?this.batchOutStoreForm.visible=!0:this.$alert("请选择要出库的带材","提示")},closeBatchOutDialog:function(){this.$refs.batchOutStoreForm.resetFields(),this.batchOutStoreForm.visible=!1},submitBatchOutForm:function(){var e=this;this.$refs.batchOutStoreForm.validate(function(t){if(!t)return!1;e.batchOutStoreForm.loading=!0;var a={ids:(e.multipleSelection&&e.multipleSelection.map(function(e){return e.storageId})).join(),takeBy:e.batchOutStoreForm.takeBy,type:"batch"};e.$http("PUT",z,a).then(function(t){e.pageConfig.current=1,e.getTableData({current:1})}).catch(function(e){console.log(e)}).finally(function(){e.batchOutStoreForm.visible=!1,e.batchOutStoreForm.loading=!1})})},uploadExcelHandler:function(){this.uploadExcelForm.visible=!0,this.uploadExcelForm.fileList=[]},closeUploadDialog:function(){this.uploadExcelForm.visible=!1},submitUploadForm:function(){this.$refs.upload.submit(),this.uploadExcelForm.visible=!1;this.pageConfig.current=1,this.getTableData({current:1})},uploadErrorHanler:function(e,t,a){this.$message({message:"上传失败："+e.message,type:"error"})},uploadSuccessHanler:function(e,t,a){if(0===e.status)this.$message({message:e.message,type:"success"});else{var i="";e.data.forEach(function(e){i+="<p>炉号："+e.furnace+"，盘号："+e.coilNumber+"</p>"}),this.$alert(i,"以下带材添加仓位失败：",{dangerouslyUseHTMLString:!0,type:"warning"})}this.getTableData(params)}})},da={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("库存记录")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"入库日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出库日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.outDate,callback:function(t){e.$set(e.searchForm,"outDate",t)},expression:"searchForm.outDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonTypeNames,callback:function(t){e.$set(e.searchForm,"ribbonTypeNames",t)},expression:"searchForm.ribbonTypeNames"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厚度级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonThicknessLevels,callback:function(t){e.$set(e.searchForm,"ribbonThicknessLevels",t)},expression:"searchForm.ribbonThicknessLevels"}},e._l(e.ribbonThicknessLevelList,function(e){return a("el-option",{key:e.ribbonThicknessLevelId,attrs:{label:e.ribbonThicknessLevel,value:e.ribbonThicknessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"叠片级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.laminationLevels,callback:function(t){e.$set(e.searchForm,"laminationLevels",t)},expression:"searchForm.laminationLevels"}},e._l(e.laminationLevelList,function(e){return a("el-option",{key:e.laminationLevelId,attrs:{label:e.laminationLevel,value:e.laminationLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"综合级别："}},[a("el-input",{attrs:{placeholder:"请输入综合级别，以逗号分隔"},model:{value:e.searchForm.ribbonTotalLevels,callback:function(t){e.$set(e.searchForm,"ribbonTotalLevels",t)},expression:"searchForm.ribbonTotalLevels"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仓位："}},[a("el-input",{attrs:{placeholder:"请输入仓位，以逗号分隔"},model:{value:e.searchForm.place,callback:function(t){e.$set(e.searchForm,"place",t)},expression:"searchForm.place"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结余："}},[a("el-select",{attrs:{placeholder:""},model:{value:e.searchForm.isRemain,callback:function(t){e.$set(e.searchForm,"isRemain",t)},expression:"searchForm.isRemain"}},[a("el-option",{attrs:{value:0,label:"=0"}}),e._v(" "),a("el-option",{attrs:{value:1,label:">0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"total_data"},[a("el-col",{attrs:{span:6}},[e._v("总盘数："+e._s(e.totalCoilNum))]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("总重量(kg)："+e._s(e.totalWeight))])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isExportable?a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")]):e._e(),e._v(" "),6==e.userinfo.roleId?a("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e.uploadExcelHandler}},[e._v("批量入仓")]):e._e(),e._v(" "),e.isOutStoreable?a("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-menu"},on:{click:e.allOutStoreHandler}},[e._v("整托出库")]):e._e(),e._v(" "),e.isOutStoreable?a("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-rank"},on:{click:e.batchOutStoreHandler}},[e._v("批量出库")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30",selectable:e.setSelectable}}),e._v(" "),a("el-table-column",{attrs:{prop:"inStoreDate",label:"入库日期",align:"center",formatter:e.inStoreDateFormat,width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"50px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTotalLevel",label:"综合级别",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"带厚级别",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilWeight",label:"毛重",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNetWeight",label:"净重",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isStored",label:"入库情况",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isStored?a("span",[e._v("计划内入库")]):e._e(),e._v(" "),2==t.row.isStored?a("span",[e._v("计划外入库")]):e._e(),e._v(" "),3==t.row.isStored?a("span",[e._v("否")]):e._e(),e._v(" "),4==t.row.isStored?a("span",{staticClass:"text_warn"},[e._v("退货入库")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"outStoreDate",label:"出库日期",align:"center",formatter:e.outStoreDateFormat,width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takeBy",label:"实际去向",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.takeBy)+"\n          ")]):a("div",[a("el-select",{attrs:{placeholder:"",size:"mini"},model:{value:t.row.takeBy,callback:function(a){e.$set(t.row,"takeBy",a)},expression:"scope.row.takeBy"}},[a("el-option",{attrs:{label:"不选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"J",value:"J"}}),e._v(" "),a("el-option",{attrs:{label:"F",value:"F"}}),e._v(" "),a("el-option",{attrs:{label:"Z",value:"Z"}}),e._v(" "),a("el-option",{attrs:{label:"S",value:"S"}}),e._v(" "),a("el-option",{attrs:{label:"G",value:"G"}}),e._v(" "),a("el-option",{attrs:{label:"W",value:"W"}}),e._v(" "),a("el-option",{attrs:{label:"H",value:"H"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remainWeight",label:"结存",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"place",label:"仓位",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.place)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.place,callback:function(a){e.$set(t.row,"place",a)},expression:"scope.row.place"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clients",label:"检测判定去向",align:"center",width:"120px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.clients))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shipRemark",label:"发货备注",align:"center",width:"100px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.shipRemark)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.shipRemark,callback:function(a){e.$set(t.row,"shipRemark",a)},expression:"scope.row.shipRemark"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.isEditable},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]):a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.save(t.row)}}},[e._v("保存")]),e._v(" "),e.isDeleteable?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("退库")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"整托出库",visible:e.allOutStoreForm.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"30%","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.allOutStoreForm,"visible",t)},close:e.closeAllOutDialog}},[a("el-form",{ref:"allOutStoreForm",staticStyle:{},attrs:{model:e.allOutStoreForm,rules:e.allOutStoreFormRules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"仓位：",prop:"place"}},[a("el-input",{model:{value:e.allOutStoreForm.place,callback:function(t){e.$set(e.allOutStoreForm,"place",t)},expression:"allOutStoreForm.place"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"去向：",prop:"takeBy"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.allOutStoreForm.takeBy,callback:function(t){e.$set(e.allOutStoreForm,"takeBy",t)},expression:"allOutStoreForm.takeBy"}},[a("el-option",{attrs:{label:"J",value:"J"}}),e._v(" "),a("el-option",{attrs:{label:"F",value:"F"}}),e._v(" "),a("el-option",{attrs:{label:"Z",value:"Z"}}),e._v(" "),a("el-option",{attrs:{label:"S",value:"S"}}),e._v(" "),a("el-option",{attrs:{label:"G",value:"G"}}),e._v(" "),a("el-option",{attrs:{label:"W",value:"W"}}),e._v(" "),a("el-option",{attrs:{label:"H",value:"H"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeAllOutDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitAllOutForm}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"批量出库",visible:e.batchOutStoreForm.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"30%","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.batchOutStoreForm,"visible",t)},close:e.closeBatchOutDialog}},[a("el-form",{ref:"batchOutStoreForm",staticStyle:{},attrs:{model:e.batchOutStoreForm,rules:e.batchOutStoreFormRules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"去向：",prop:"takeBy"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.batchOutStoreForm.takeBy,callback:function(t){e.$set(e.batchOutStoreForm,"takeBy",t)},expression:"batchOutStoreForm.takeBy"}},[a("el-option",{attrs:{label:"J",value:"J"}}),e._v(" "),a("el-option",{attrs:{label:"F",value:"F"}}),e._v(" "),a("el-option",{attrs:{label:"Z",value:"Z"}}),e._v(" "),a("el-option",{attrs:{label:"S",value:"S"}}),e._v(" "),a("el-option",{attrs:{label:"G",value:"G"}}),e._v(" "),a("el-option",{attrs:{label:"W",value:"W"}}),e._v(" "),a("el-option",{attrs:{label:"H",value:"H"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeBatchOutDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitBatchOutForm}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"批量入仓",visible:e.uploadExcelForm.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"40%","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.uploadExcelForm,"visible",t)},close:e.closeUploadDialog}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:e.uploadExcelForm.url,"file-list":e.uploadExcelForm.fileList,multiple:!1,limit:1,accept:".xlsx","on-error":e.uploadErrorHanler,"on-success":e.uploadSuccessHanler,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xlsx文件，且不超过500kb")])],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitUploadForm}},[e._v("上传提交")])],1)],1)],1)},staticRenderFns:[]};var ma=a("VU/8")(ua,da,!1,function(e){a("AjiZ")},"data-v-28e2323c",null).exports,pa={name:"melt",components:{Collapse:nt},data:function(){return{userinfo:{},searchForm:{caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonTotalLevels:"",ribbonThicknessLevels:[],laminationLevels:[],place:""},loading:!1,tableData:[],pageConfig:{total:1,current:1,pageSize:10},isExportable:!1,isEditable:!1,isDeleteable:!1,tableHeight:550}},computed:Ae()({},Object(je.c)(["ribbonTypeList","ribbonWidthList","ribbonThicknessLevelList","laminationLevelList"])),created:function(){this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isExportable=this.setExportable(),this.getTableData(),this.getRibbonTypeList(),this.getRibbonWidthList(),this.getRibbonThicknessLevelList(),this.getLaminationLevelList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:Ae()({},Object(je.b)(["getRibbonTypeList","getRibbonWidthList","getRibbonThicknessLevelList","getLaminationLevelList"]),{inStoreDateFormat:function(e,t){return e.inStoreDate?Ce(e.inStoreDate):""},outStoreDateFormat:function(e,t){return e.outStoreDate?Ce(e.outStoreDate):""},setEditable:function(){return 6==this.userinfo.roleId||1==this.userinfo.roleId},setDeleteable:function(){return 1==this.userinfo.roleId||6==this.userinfo.roleId},setExportable:function(){return!![1,2,3,6].includes(this.userinfo.roleId)},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonTotalLevels:"",ribbonThicknessLevels:[],laminationLevels:[],place:""};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonTotalLevels:this.searchForm.ribbonTotalLevels,place:this.searchForm.place,filterBy:"storage"};We()(t,a),this.$http("get",q,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,t.list&&t.list.forEach(function(e){e.isEditing=!1}),e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},edit:function(e){e.isEditing=!0},del:function(e){var t=this,a=(e.storageId,e.furnace),i=e.coilNumber;this.$confirm("确定退库 "+a+" 的第 "+i+" 盘吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.isStored=3,e.isMeasureConfirmed=0,t.$http("PUT",z,e).then(function(e){t.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},save:function(e){e.isEditing=!1,e.takeBy?e.remainWeight=0:e.remainWeight=e.coilNetWeight,this.$http("PUT",z,e).then(function(e){}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},exportExcel:function(){var e={startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonTotalLevels:this.searchForm.ribbonTotalLevels,place:this.searchForm.place},t=J+"?"+Ue.a.stringify(e);window.open(t)}})},ha={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("库存记录")]),e._v(" "),a("el-breadcrumb-item",[e._v("库存总表")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"入库日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonTypeNames,callback:function(t){e.$set(e.searchForm,"ribbonTypeNames",t)},expression:"searchForm.ribbonTypeNames"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厚度级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonThicknessLevels,callback:function(t){e.$set(e.searchForm,"ribbonThicknessLevels",t)},expression:"searchForm.ribbonThicknessLevels"}},e._l(e.ribbonThicknessLevelList,function(e){return a("el-option",{key:e.ribbonThicknessLevelId,attrs:{label:e.ribbonThicknessLevel,value:e.ribbonThicknessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"叠片级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.laminationLevels,callback:function(t){e.$set(e.searchForm,"laminationLevels",t)},expression:"searchForm.laminationLevels"}},e._l(e.laminationLevelList,function(e){return a("el-option",{key:e.laminationLevelId,attrs:{label:e.laminationLevel,value:e.laminationLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"综合级别："}},[a("el-input",{attrs:{placeholder:"请输入综合级别，以逗号分隔"},model:{value:e.searchForm.ribbonTotalLevels,callback:function(t){e.$set(e.searchForm,"ribbonTotalLevels",t)},expression:"searchForm.ribbonTotalLevels"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仓位："}},[a("el-input",{attrs:{placeholder:"请输入仓位，以逗号分隔"},model:{value:e.searchForm.place,callback:function(t){e.$set(e.searchForm,"place",t)},expression:"searchForm.place"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isExportable?a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight}},[a("el-table-column",{attrs:{prop:"inStoreDate",label:"入库日期",align:"center",formatter:e.inStoreDateFormat,width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"50px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTotalLevel",label:"综合级别",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"带厚级别",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilWeight",label:"毛重",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNetWeight",label:"净重",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isStored",label:"入库情况",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isStored?a("span",[e._v("计划内入库")]):e._e(),e._v(" "),2==t.row.isStored?a("span",[e._v("计划外入库")]):e._e(),e._v(" "),3==t.row.isStored?a("span",[e._v("否")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"outStoreDate",label:"出库日期",align:"center",formatter:e.outStoreDateFormat,width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takeBy",label:"实际去向",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.takeBy)+"\n          ")]):a("div",[a("el-select",{attrs:{placeholder:"",size:"mini"},model:{value:t.row.takeBy,callback:function(a){e.$set(t.row,"takeBy",a)},expression:"scope.row.takeBy"}},[a("el-option",{attrs:{label:"不选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"J",value:"J"}}),e._v(" "),a("el-option",{attrs:{label:"F",value:"F"}}),e._v(" "),a("el-option",{attrs:{label:"Z",value:"Z"}}),e._v(" "),a("el-option",{attrs:{label:"S",value:"S"}}),e._v(" "),a("el-option",{attrs:{label:"G",value:"G"}}),e._v(" "),a("el-option",{attrs:{label:"W",value:"W"}}),e._v(" "),a("el-option",{attrs:{label:"H",value:"H"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remainWeight",label:"结存",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"place",label:"仓位",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.place)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.place,callback:function(a){e.$set(t.row,"place",a)},expression:"scope.row.place"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clients",label:"检测判定去向",align:"center",width:"120px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.clients))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shipRemark",label:"发货备注",align:"center",width:"100px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.shipRemark)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.shipRemark,callback:function(a){e.$set(t.row,"shipRemark",a)},expression:"scope.row.shipRemark"}})],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},ga=a("VU/8")(pa,ha,!1,null,null,null).exports,va={data:function(){return{searchForm:{ratioType:"byCaster",date:[]},loading:!1,tableDataByCaster:[],tableDataByTeam:[],tableDataByCastId:[]}},created:function(){this.getTableData()},methods:{clickSearch:function(){this.getTableData()},reset:function(){this.searchForm={ratioType:this.searchForm.ratioType,date:[]},this.getTableData()},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={ratioType:this.searchForm.ratioType,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1]};We()(t,a),"byCaster"===this.searchForm.ratioType?this.$http("get",ve,t).then(function(t){e.tableDataByCaster=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1}):"byTeam"===this.searchForm.ratioType?this.$http("get",ve,t).then(function(t){e.tableDataByTeam=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1}):"byCastId"===this.searchForm.ratioType&&this.$http("get",ve,t).then(function(t){e.tableDataByCastId=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},tabsClick:function(e,t){this.searchForm.ratioType=e.name,this.getTableData()}}},fa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("数据统计")]),e._v(" "),a("el-breadcrumb-item",[e._v("带材质量统计")])],1),e._v(" "),a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"喷带日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabsClick},model:{value:e.searchForm.ratioType,callback:function(t){e.$set(e.searchForm,"ratioType",t)},expression:"searchForm.ratioType"}},[a("el-tab-pane",{attrs:{label:"喷带手",name:"byCaster"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataByCaster,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalHeatNum",label:"炉次",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lowHeatNum",label:"低产炉次",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"zeroHeatNum",label:"零产炉次",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lowAndZeroRatio",label:"低产零产率",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nozzleNum",label:"喷嘴数",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyTotalWeight",label:"投入母合金(kg)",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rawWeight",label:"大盘毛重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNetWeight",label:"倒卷净重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanStoredWeight",label:"计划内入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outPlanStoredWeight",label:"计划外入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalStoredWeight",label:"入库重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unqualifiedWeight",label:"不合格重量(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uselessRibbonWeight",label:"废带(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"effectiveMeltRatio",label:"有效过钢率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rollRatio",label:"卷曲率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualifiedRatio",label:"合格率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalRatio",label:"直通率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanRatio",label:"订单合格率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"质量等级分布",align:"center",width:"110px"}},[a("el-table-column",{attrs:{label:"A",prop:"qualityOfA"}}),e._v(" "),a("el-table-column",{attrs:{label:"B",prop:"qualityOfB"}}),e._v(" "),a("el-table-column",{attrs:{label:"C",prop:"qualityOfC"}}),e._v(" "),a("el-table-column",{attrs:{label:"D",prop:"qualityOfD"}}),e._v(" "),a("el-table-column",{attrs:{label:"E",prop:"qualityOfE"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfGood",label:"好(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfFine",label:"良(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfNormal",label:"中(kg)",align:"center",width:"70px"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"班组",name:"byTeam"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataByTeam,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"team",label:"班组",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalHeatNum",label:"炉次",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lowHeatNum",label:"低产炉次",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"zeroHeatNum",label:"零产炉次",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lowAndZeroRatio",label:"低产零产率",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nozzleNum",label:"喷嘴数",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyTotalWeight",label:"投入母合金(kg)",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rawWeight",label:"大盘毛重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNetWeight",label:"倒卷净重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanStoredWeight",label:"计划内入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outPlanStoredWeight",label:"计划外入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalStoredWeight",label:"入库重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unqualifiedWeight",label:"不合格重量(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uselessRibbonWeight",label:"废带(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"effectiveMeltRatio",label:"有效过钢率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rollRatio",label:"卷曲率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualifiedRatio",label:"合格率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalRatio",label:"直通率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanRatio",label:"订单合格率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"质量等级分布",align:"center",width:"110px"}},[a("el-table-column",{attrs:{label:"A",prop:"qualityOfA"}}),e._v(" "),a("el-table-column",{attrs:{label:"B",prop:"qualityOfB"}}),e._v(" "),a("el-table-column",{attrs:{label:"C",prop:"qualityOfC"}}),e._v(" "),a("el-table-column",{attrs:{label:"D",prop:"qualityOfD"}}),e._v(" "),a("el-table-column",{attrs:{label:"E",prop:"qualityOfE"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfGood",label:"好(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfFine",label:"良(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfNormal",label:"中(kg)",align:"center",width:"70px"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"机组",name:"byCastId"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataByCastId,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"castId",label:"机组",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalHeatNum",label:"炉次",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lowHeatNum",label:"低产炉次",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"zeroHeatNum",label:"零产炉次",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lowAndZeroRatio",label:"低产零产率",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nozzleNum",label:"喷嘴数",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyTotalWeight",label:"投入母合金(kg)",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rawWeight",label:"大盘毛重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNetWeight",label:"倒卷净重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanStoredWeight",label:"计划内入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outPlanStoredWeight",label:"计划外入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalStoredWeight",label:"入库重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unqualifiedWeight",label:"不合格重量(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uselessRibbonWeight",label:"废带(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"effectiveMeltRatio",label:"有效过钢率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rollRatio",label:"卷曲率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualifiedRatio",label:"合格率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalRatio",label:"直通率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanRatio",label:"订单合格率",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"质量等级分布",align:"center",width:"110px"}},[a("el-table-column",{attrs:{label:"A",prop:"qualityOfA"}}),e._v(" "),a("el-table-column",{attrs:{label:"B",prop:"qualityOfB"}}),e._v(" "),a("el-table-column",{attrs:{label:"C",prop:"qualityOfC"}}),e._v(" "),a("el-table-column",{attrs:{label:"D",prop:"qualityOfD"}}),e._v(" "),a("el-table-column",{attrs:{label:"E",prop:"qualityOfE"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfGood",label:"好(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfFine",label:"良(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfNormal",label:"中(kg)",align:"center",width:"70px"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var _a=a("VU/8")(va,fa,!1,function(e){a("bew3")},"data-v-57332caa",null).exports,Ta={data:function(){return{searchForm:{castIds:[],caster:"",furnace:"",ribbonTypeNames:[],ribbonWidths:[]},loading:!1,tableData:[],pageConfig:{total:1,current:1,pageSize:10}}},computed:Ae()({},Object(je.c)(["ribbonTypeList","ribbonWidthList"])),created:function(){this.getTableData(),this.getRibbonTypeList(),this.getRibbonWidthList()},methods:Ae()({},Object(je.b)(["getRibbonTypeList","getRibbonWidthList"]),{clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={castIds:[],caster:"",furnace:"",ribbonTypeNames:[],ribbonWidths:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castIdJson:we()(this.searchForm.castIds),caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths)};We()(t,a),this.$http("get",ge,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},calcSum:function(e,t){return e.reduce(function(e,a){return void 0!==a[t]&&null!==a[t]||(a[t]=0),e+a[t]},0).toFixed(2)}})},ka={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("数据统计")]),e._v(" "),a("el-breadcrumb-item",[e._v("带材质量统计")])],1),e._v(" "),a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"机组："}},[a("el-select",{attrs:{placeholder:"请选择机组",multiple:"","collapse-tags":""},model:{value:e.searchForm.castIds,callback:function(t){e.$set(e.searchForm,"castIds",t)},expression:"searchForm.castIds"}},[a("el-option",{attrs:{value:6,label:"6号机组"}}),e._v(" "),a("el-option",{attrs:{value:7,label:"7号机组"}}),e._v(" "),a("el-option",{attrs:{value:8,label:"8号机组"}}),e._v(" "),a("el-option",{attrs:{value:9,label:"9号机组"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"喷带手："}},[a("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:e.searchForm.caster,callback:function(t){e.$set(e.searchForm,"caster",t)},expression:"searchForm.caster"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonTypeNames,callback:function(t){e.$set(e.searchForm,"ribbonTypeNames",t)},expression:"searchForm.ribbonTypeNames"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"castId",label:"机组",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rawWeight",label:"大盘毛重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNetWeight",label:"倒卷净重(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unqualifiedWeight",label:"不合格重量(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalStoredWeight",label:"入库重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uselessRibbonWeight",label:"废带(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alloyTotalWeight",label:"投入母合金(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"质量等级分布",align:"center",width:"110px"}},[a("el-table-column",{attrs:{label:"A",prop:"qualityOfA"}}),e._v(" "),a("el-table-column",{attrs:{label:"B",prop:"qualityOfB"}}),e._v(" "),a("el-table-column",{attrs:{label:"C",prop:"qualityOfC"}}),e._v(" "),a("el-table-column",{attrs:{label:"D",prop:"qualityOfD"}}),e._v(" "),a("el-table-column",{attrs:{label:"E",prop:"qualityOfE"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"thinRibbonWeight",label:"薄带(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"highFactorThinRibbonWeight",label:"高叠片薄带(kg)",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanStoredWeight",label:"计划内入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outPlanStoredWeight",label:"计划外入库(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inPlanThickRibbonWeight",label:"符合订单非薄带(kg)",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfGood",label:"好(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfFine",label:"良(kg)",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"qualityOfNormal",label:"中(kg)",align:"center",width:"70px"}})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var wa=a("VU/8")(Ta,ka,!1,function(e){a("cCY8")},"data-v-206d2eb4",null).exports,ya={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var xa=a("VU/8")({},ya,!1,function(e){a("mdwl")},"data-v-74280950",null).exports,La={name:"melt",components:{Collapse:nt},data:function(){return{userinfo:{},castId:6,searchForm:{furnace:"",ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[]},loading:!1,tableData:[],pageConfig:{total:1,current:1,pageSize:10},isEditable:!1,tableHeight:550,multipleSelection:[]}},computed:Ae()({},Object(je.c)(["ribbonToughnessLevelList","ribbonTypeList","ribbonWidthList","ribbonThicknessLevelList","laminationLevelList"])),beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isEditable=this.setEditable(),a()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isEditable=this.setEditable(),this.getTableData(),this.getRibbonToughnessLevelList(),this.getRibbonTypeList(),this.getRibbonWidthList(),this.getRibbonThicknessLevelList(),this.getLaminationLevelList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:Ae()({},Object(je.b)(["getRibbonToughnessLevelList","getRibbonTypeList","getRibbonWidthList","getRibbonThicknessLevelList","getLaminationLevelList"]),{dateTimeFormat:function(e,t){return e.measureDate?Se(e.measureDate):""},setEditable:function(){return 5==this.userinfo.roleId||6==this.userinfo.roleId},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={furnace:"",ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castId:this.castId,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:we()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:we()(this.searchForm.appearenceLevels)};We()(t,a),this.$http("get",E,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,t.list=t.list.filter(function(e){return[1,2,4].includes(e.isStored)&&1==e.isMeasureConfirmed}),t.list.forEach(function(e){e.isEditing=!1,e.clients=e.clients.split(","),e.isMeasureConfirmed=0,e.storageRule={orderThickness:e.orderThickness,orderLaminationFactor:e.orderLaminationFactor,orderRibbonToughnessLevels:e.orderRibbonToughnessLevels,orderAppearenceLevels:e.orderAppearenceLevels,qualifiedThickness:e.qualifiedThickness,qualifiedLaminationFactor:e.qualifiedLaminationFactor,qualifiedRibbonToughnessLevels:e.qualifiedRibbonToughnessLevels,qualifiedAppearenceLevels:e.qualifiedAppearenceLevels}}),e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},edit:function(e){if(4==e.isStored&&1==e.isMeasureConfirmed)return this.$message({message:"该带材已经入库，您无权限操作，请联系库房主管人员！",type:"error"});e.isEditing=!0},save:function(e){e.isEditing=!1;var t=0;if(e.ribbonWidth<25?t=.05:e.ribbonWidth>=25&&e.ribbonWidth<30?t=.06:e.ribbonWidth>=30&&e.ribbonWidth<40?t=.08:e.ribbonWidth>=40&&e.ribbonWidth<50?t=.12:e.ribbonWidth>=50&&e.ribbonWidth<58?t=.12:e.ribbonWidth>=58&&(t=.16),e.coilNetWeight=(e.coilWeight-t).toFixed(2),e.remainWeight=e.coilNetWeight,e.laminationFactor=((e.coilWeight-.09)/(Math.PI*(e.diameter*e.diameter/4-9025/4)*7.2)*Math.pow(10,6)/e.realRibbonWidth).toFixed(2),e.laminationLevel=this.calcLaminationLevel(e.laminationFactor),e.ribbonToughnessLevel=this.ribbonToughnessLevelList.reduce(function(e,t){return e[t.ribbonToughness]=t.ribbonToughnessLevel,e},{})[e.ribbonToughness],e.ribbonThickness1="string"==typeof e.ribbonThickness1?Number(e.ribbonThickness1.trim()):e.ribbonThickness1,e.ribbonThickness2="string"==typeof e.ribbonThickness2?Number(e.ribbonThickness2.trim()):e.ribbonThickness2,e.ribbonThickness3="string"==typeof e.ribbonThickness3?Number(e.ribbonThickness3.trim()):e.ribbonThickness3,e.ribbonThickness4="string"==typeof e.ribbonThickness4?Number(e.ribbonThickness4.trim()):e.ribbonThickness4,e.ribbonThickness5="string"==typeof e.ribbonThickness5?Number(e.ribbonThickness5.trim()):e.ribbonThickness5,e.ribbonThickness6="string"==typeof e.ribbonThickness6?Number(e.ribbonThickness6.trim()):e.ribbonThickness6,e.ribbonThickness7="string"==typeof e.ribbonThickness7?Number(e.ribbonThickness7.trim()):e.ribbonThickness7,e.ribbonThickness8="string"==typeof e.ribbonThickness8?Number(e.ribbonThickness8.trim()):e.ribbonThickness8,e.ribbonThickness9="string"==typeof e.ribbonThickness9?Number(e.ribbonThickness9.trim()):e.ribbonThickness9,e.ribbonThicknessDeviation=this.calcMaxDeviation([e.ribbonThickness1,e.ribbonThickness2,e.ribbonThickness3,e.ribbonThickness4,e.ribbonThickness5,e.ribbonThickness6,e.ribbonThickness7,e.ribbonThickness8,e.ribbonThickness9]),e.ribbonThickness=((e.ribbonThickness1+e.ribbonThickness2+e.ribbonThickness3+e.ribbonThickness4+e.ribbonThickness5+e.ribbonThickness6+e.ribbonThickness7+e.ribbonThickness8+e.ribbonThickness9)/9).toFixed(2),e.ribbonThicknessLevel=this.calcribbonThicknessLevel(e.ribbonThickness),e.ribbonTotalLevel="不合格"===e.laminationLevel||"不合格"===e.appearenceLevel?"不合格":e.ribbonThicknessLevel+e.laminationLevel+e.ribbonToughnessLevel+e.appearenceLevel,[32,35,40,42,45,50].includes(e.ribbonWidth)&&"1K107B"==e.ribbonTypeName&&["D","E"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel="不合格"),e.ribbonThicknessDeviation>3&&["D","E"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel="不合格"),e.ribbonWidth<50?["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.2&&(e.ribbonTotalLevel="不合格"):e.ribbonWidth>=50&&["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.3&&(e.ribbonTotalLevel="不合格"),["AD25","ND25"].includes(e.ribbonTypeName)){var a=e.realRibbonWidth-e.ribbonWidth;(a>=.1||a<=-.2)&&(e.ribbonTotalLevel="不合格")}if("不合格"!==e.ribbonTotalLevel){e.ribbonThickness>=20&&e.ribbonThickness<=22&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"G"),e.ribbonThickness>=23&&e.ribbonThickness<=24&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"L"),e.ribbonThicknessDeviation>3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"F");var i=e.realRibbonWidth-e.ribbonWidth;e.ribbonWidth<50?Math.abs(i)>.2&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(i<-.2?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":i>.2&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E")):e.ribbonWidth>=50&&Math.abs(i)>.3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(i<-.3?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":i>.3&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E"))}""!=e.ribbonThicknessLevel&&""!==e.laminationLevel&&""!=e.ribbonToughnessLevel&&""!=e.appearenceLevel||(e.ribbonTotalLevel=""),"不合格"===e.ribbonTotalLevel?(e.isStored=3,e.isMeasureConfirmed=1):e.isStored=4;var l=Object(Je.cloneDeep)(e);l.clients=l.clients.join(),this.$http("PUT",M,l).then(function(e){}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},calcLaminationLevel:function(e){return e?e>=.84?"4":e>=.82&&e<.84?"3":e>=.8&&e<.82?"2":e>=.78&&e<.8?"1":e>=.75&&e<.78?"0":"不合格":""},calcMaxDeviation:function(e){return e.sort(function(e,t){return e-t}),e[e.length-1]-e[0]},calcribbonThicknessLevel:function(e){if(e)return e>26?1:e>23&&e<=26?2:e>20&&e<=23?3:e>18&&e<=20?4:e>16&&e<=18?5:e>14&&e<=16?6:e>12&&e<=14?7:e<=12?8:void 0},setSelectable:function(e,t){return 4==e.isStored&&!e.isMeasureConfirmed},handleSelectionChange:function(e){this.multipleSelection=e},thicknessChangeHandler:function(e,t){var a=[t.ribbonThickness1,t.ribbonThickness2,t.ribbonThickness3,t.ribbonThickness4,t.ribbonThickness5,t.ribbonThickness6,t.ribbonThickness7,t.ribbonThickness8,t.ribbonThickness9];a=a.map(function(e){if(""!==e)return Number(e)}).filter(function(e){return void 0!==e}),t.ribbonThicknessDeviation=this.calcMaxDeviation(a),t.ribbonThickness=a.length>0?(a.reduce(function(e,t){return e+t},0)/a.length).toFixed(2):0,t.ribbonThicknessLevel=this.calcribbonThicknessLevel(t.ribbonThickness)},measureConfirm:function(){var e=Object(Je.cloneDeep)(this.multipleSelection);if(0===e.length)return this.$alert("请选择要入库的带材","提示",{type:"warning"});e.forEach(function(e){e.isMeasureConfirmed=1,e.clients=e.clients.join()}),this.$http("PUT",M,{dataJson:we()(e)}).then(function(e){}).catch(function(e){console.log(e)})}})},Da={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("退货处理")]),e._v(" "),a("el-breadcrumb-item",[e._v("退货操作")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonTypeNames,callback:function(t){e.$set(e.searchForm,"ribbonTypeNames",t)},expression:"searchForm.ribbonTypeNames"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厚度级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonThicknessLevels,callback:function(t){e.$set(e.searchForm,"ribbonThicknessLevels",t)},expression:"searchForm.ribbonThicknessLevels"}},e._l(e.ribbonThicknessLevelList,function(e){return a("el-option",{key:e.ribbonThicknessLevelId,attrs:{label:e.ribbonThicknessLevel,value:e.ribbonThicknessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"叠片级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.laminationLevels,callback:function(t){e.$set(e.searchForm,"laminationLevels",t)},expression:"searchForm.laminationLevels"}},e._l(e.laminationLevelList,function(e){return a("el-option",{key:e.laminationLevelId,attrs:{label:e.laminationLevel,value:e.laminationLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"韧性级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonToughnessLevels,callback:function(t){e.$set(e.searchForm,"ribbonToughnessLevels",t)},expression:"searchForm.ribbonToughnessLevels"}},e._l(e.ribbonToughnessLevelList,function(e){return a("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughnessLevel,value:e.ribbonToughnessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"外观级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.appearenceLevels,callback:function(t){e.$set(e.searchForm,"appearenceLevels",t)},expression:"searchForm.appearenceLevels"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}}),e._v(" "),a("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[5==e.userinfo.roleId?a("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.measureConfirm}},[e._v("确认入库")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30",selectable:e.setSelectable}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"50px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"diameter",label:"外径(mm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.diameter)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.diameter,callback:function(a){e.$set(t.row,"diameter",a)},expression:"scope.row.diameter"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"coilWeight",label:"重量(kg)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.coilWeight)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.coilWeight,callback:function(a){e.$set(t.row,"coilWeight",a)},expression:"scope.row.coilWeight"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationFactor",label:"叠片系数",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationLevel",label:"叠片等级",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realRibbonWidth",label:"实际带宽",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.realRibbonWidth)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.realRibbonWidth,callback:function(a){e.$set(t.row,"realRibbonWidth",a)},expression:"scope.row.realRibbonWidth"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness1",label:"带厚1(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness1)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness1,callback:function(a){e.$set(t.row,"ribbonThickness1",a)},expression:"scope.row.ribbonThickness1"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness2",label:"带厚2(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness2)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness2,callback:function(a){e.$set(t.row,"ribbonThickness2",a)},expression:"scope.row.ribbonThickness2"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness3",label:"带厚3(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness3)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness3,callback:function(a){e.$set(t.row,"ribbonThickness3",a)},expression:"scope.row.ribbonThickness3"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness4",label:"带厚4(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness4)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness4,callback:function(a){e.$set(t.row,"ribbonThickness4",a)},expression:"scope.row.ribbonThickness4"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness5",label:"带厚5(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness5)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness5,callback:function(a){e.$set(t.row,"ribbonThickness5",a)},expression:"scope.row.ribbonThickness5"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness6",label:"带厚6(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness6)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness6,callback:function(a){e.$set(t.row,"ribbonThickness6",a)},expression:"scope.row.ribbonThickness6"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness7",label:"带厚7(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness7)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness7,callback:function(a){e.$set(t.row,"ribbonThickness7",a)},expression:"scope.row.ribbonThickness7"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness8",label:"带厚8(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness8)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness8,callback:function(a){e.$set(t.row,"ribbonThickness8",a)},expression:"scope.row.ribbonThickness8"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness9",label:"带厚9(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness9)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness9,callback:function(a){e.$set(t.row,"ribbonThickness9",a)},expression:"scope.row.ribbonThickness9"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessDeviation",label:"厚度偏差(μm)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness",label:"平均厚度(μm)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"厚度级别",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughness",label:"韧性",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonToughness)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.ribbonToughness,callback:function(a){e.$set(t.row,"ribbonToughness",a)},expression:"scope.row.ribbonToughness"}},e._l(e.ribbonToughnessLevelList,function(e){return a("el-option",{key:e._id,attrs:{label:e.ribbonToughness,value:e.ribbonToughness}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughnessLevel",label:"韧性等级",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appearence",label:"外观",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.appearence)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.appearence,callback:function(a){e.$set(t.row,"appearence",a)},expression:"scope.row.appearence"}},[a("el-option",{attrs:{label:"无明显缺陷",value:"无明显缺陷"}}),e._v(" "),a("el-option",{attrs:{label:"轻棱",value:"轻棱"}}),e._v(" "),a("el-option",{attrs:{label:"棱",value:"棱"}}),e._v(" "),a("el-option",{attrs:{label:"轻微麻点",value:"轻微麻点"}}),e._v(" "),a("el-option",{attrs:{label:"麻点",value:"麻点"}}),e._v(" "),a("el-option",{attrs:{label:"轻微划痕",value:"轻微划痕"}}),e._v(" "),a("el-option",{attrs:{label:"划痕",value:"划痕"}}),e._v(" "),a("el-option",{attrs:{label:"轻微挖心",value:"轻微挖心"}}),e._v(" "),a("el-option",{attrs:{label:"挖心",value:"挖心"}}),e._v(" "),a("el-option",{attrs:{label:"少量劈裂",value:"少量劈裂"}}),e._v(" "),a("el-option",{attrs:{label:"大量劈裂",value:"大量劈裂"}}),e._v(" "),a("el-option",{attrs:{label:"端面损坏",value:"端面损坏"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"appearenceLevel",label:"外观等级",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.appearenceLevel)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.appearenceLevel,callback:function(a){e.$set(t.row,"appearenceLevel",a)},expression:"scope.row.appearenceLevel"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}}),e._v(" "),a("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTotalLevel",label:"综合级别",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:"不合格"===t.row.ribbonTotalLevel?"text_danger":""},[e._v(e._s(t.row.ribbonTotalLevel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库规则",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",trigger:"hover"}},[a("table",{staticClass:"popover_table",attrs:{cellpadding:"0",cellspacing:"0"}},[a("thead",[a("th",[e._v("类别")]),e._v(" "),a("th",[e._v("带厚")]),e._v(" "),a("th",[e._v("叠片")]),e._v(" "),a("th",[e._v("韧性")]),e._v(" "),a("th",[e._v("外观")])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("计划内入库要求")]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderThickness))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderLaminationFactor))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderRibbonToughnessLevels))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.orderAppearenceLevels))])]),e._v(" "),a("tr",[a("td",[e._v("计划外入库要求")]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.qualifiedThickness))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.qualifiedLaminationFactor))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.qualifiedRibbonToughnessLevels))]),e._v(" "),a("td",[e._v(e._s(t.row.storageRule.qualifiedAppearenceLevels))])])])]),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[e._v("详情")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isStored",label:"是否入库",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1===t.row.isStored?a("span",[e._v("计划内入库")]):e._e(),e._v(" "),2===t.row.isStored?a("span",[e._v("计划外入库")]):e._e(),e._v(" "),3===t.row.isStored?a("span",{staticClass:"text_danger"},[e._v("否")]):e._e(),e._v(" "),4===t.row.isStored?a("span",{staticClass:"text_warn"},[e._v("退货入库")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unStoreReason",label:"不入库原因",align:"center",width:"100px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",{staticClass:"text_danger"},[e._v("\n            "+e._s(t.row.unStoreReason)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.unStoreReason,callback:function(a){e.$set(t.row,"unStoreReason",a)},expression:"scope.row.unStoreReason"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clients",label:"判定去向",align:"center",width:"120px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.clients?t.row.clients.toString():"")+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:"",multiple:"","collapse-tags":""},model:{value:t.row.clients,callback:function(a){e.$set(t.row,"clients",a)},expression:"scope.row.clients"}},[a("el-option",{attrs:{label:"F",value:"F"}}),e._v(" "),a("el-option",{attrs:{label:"D",value:"D"}}),e._v(" "),a("el-option",{attrs:{label:"VM",value:"VM"}}),e._v(" "),a("el-option",{attrs:{label:"VS",value:"VS"}}),e._v(" "),a("el-option",{attrs:{label:"VD",value:"VD"}}),e._v(" "),a("el-option",{attrs:{label:"O",value:"O"}}),e._v(" "),a("el-option",{attrs:{label:"Z",value:"Z"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"measureDate",label:"检测时间",align:"center",width:"120px",formatter:e.dateTimeFormat,"show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.isEditable},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]):a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.save(t.row)}}},[e._v("保存")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Fa=a("VU/8")(La,Da,!1,function(e){a("XKCW")},"data-v-2dccb565",null).exports,Ca={name:"melt",components:{Collapse:nt},data:function(){return{userinfo:{},searchForm:{caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[]},loading:!1,tableData:[],pageConfig:{total:1,current:1,pageSize:10},isExportable:!1,isEditable:!1,isDeleteable:!1,tableHeight:550,multipleSelection:[],isBatchInStored:!1}},computed:Ae()({},Object(je.c)(["ribbonToughnessLevelList","ribbonTypeList","ribbonWidthList","ribbonThicknessLevelList","laminationLevelList"])),beforeRouteUpdate:function(e,t,a){this.getTableData(),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isBatchInStored=this.setBatchInStored(),a()},created:function(){this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isBatchInStored=this.setBatchInStored(),this.getTableData(),this.getRibbonToughnessLevelList(),this.getRibbonTypeList(),this.getRibbonWidthList(),this.getRibbonThicknessLevelList(),this.getLaminationLevelList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Ie(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:Ae()({thicknessChangeHandler:function(e,t){var a=[t.ribbonThickness1,t.ribbonThickness2,t.ribbonThickness3,t.ribbonThickness4,t.ribbonThickness5,t.ribbonThickness6,t.ribbonThickness7,t.ribbonThickness8,t.ribbonThickness9];a=a.map(function(e){if(""!==e)return Number(e)}).filter(function(e){return void 0!==e}),t.ribbonThicknessDeviation=this.calcMaxDeviation(a),t.ribbonThickness=a.length>0?(a.reduce(function(e,t){return e+t},0)/a.length).toFixed(2):0,t.ribbonThicknessLevel=this.calcribbonThicknessLevel(t.ribbonThickness)}},Object(je.b)(["getRibbonToughnessLevelList","getRibbonTypeList","getRibbonWidthList","getRibbonThicknessLevelList","getLaminationLevelList"]),{dateFormat:function(e,t){return Ce(e.castDate)},dateTimeFormat:function(e,t){return e.measureDate?Se(e.measureDate):""},setEditable:function(){return 5==this.userinfo.roleId||1==this.userinfo.roleId},setDeleteable:function(){return 1==this.userinfo.roleId},setExportable:function(){return!![1,2,3,5].includes(this.userinfo.roleId)},setBatchInStored:function(){return 5==this.userinfo.roleId},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:we()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:we()(this.searchForm.appearenceLevels)};We()(t,a),this.$http("get",V,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,t.list&&t.list.forEach(function(e){e.isEditing=!1,e.clients=e.clients.split(",")}),e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},edit:function(e){if(4==e.isStored&&1==e.isMeasureConfirmed)return this.$message({message:"该带材已经入库，您无权限操作，请联系库房主管人员！",type:"error"});e.isEditing=!0},save:function(e){if(e.isEditing=!1,e.laminationFactor=((e.coilWeight-.09)/(Math.PI*(e.diameter*e.diameter/4-9025/4)*7.2)*Math.pow(10,6)/e.realRibbonWidth).toFixed(2),e.laminationLevel=this.calcLaminationLevel(e.laminationFactor),e.ribbonToughnessLevel=this.ribbonToughnessLevelList.reduce(function(e,t){return e[t.ribbonToughness]=t.ribbonToughnessLevel,e},{})[e.ribbonToughness],e.ribbonThickness1="string"==typeof e.ribbonThickness1?Number(e.ribbonThickness1.trim()):e.ribbonThickness1,e.ribbonThickness2="string"==typeof e.ribbonThickness2?Number(e.ribbonThickness2.trim()):e.ribbonThickness2,e.ribbonThickness3="string"==typeof e.ribbonThickness3?Number(e.ribbonThickness3.trim()):e.ribbonThickness3,e.ribbonThickness4="string"==typeof e.ribbonThickness4?Number(e.ribbonThickness4.trim()):e.ribbonThickness4,e.ribbonThickness5="string"==typeof e.ribbonThickness5?Number(e.ribbonThickness5.trim()):e.ribbonThickness5,e.ribbonThickness6="string"==typeof e.ribbonThickness6?Number(e.ribbonThickness6.trim()):e.ribbonThickness6,e.ribbonThickness7="string"==typeof e.ribbonThickness7?Number(e.ribbonThickness7.trim()):e.ribbonThickness7,e.ribbonThickness8="string"==typeof e.ribbonThickness8?Number(e.ribbonThickness8.trim()):e.ribbonThickness8,e.ribbonThickness9="string"==typeof e.ribbonThickness9?Number(e.ribbonThickness9.trim()):e.ribbonThickness9,e.ribbonThicknessDeviation=this.calcMaxDeviation([e.ribbonThickness1,e.ribbonThickness2,e.ribbonThickness3,e.ribbonThickness4,e.ribbonThickness5,e.ribbonThickness6,e.ribbonThickness7,e.ribbonThickness8,e.ribbonThickness9]),e.ribbonThickness=((e.ribbonThickness1+e.ribbonThickness2+e.ribbonThickness3+e.ribbonThickness4+e.ribbonThickness5+e.ribbonThickness6+e.ribbonThickness7+e.ribbonThickness8+e.ribbonThickness9)/9).toFixed(2),e.ribbonThicknessLevel=this.calcribbonThicknessLevel(e.ribbonThickness),e.ribbonTotalLevel="不合格"===e.laminationLevel||"不合格"===e.appearenceLevel?"不合格":e.ribbonThicknessLevel+e.laminationLevel+e.ribbonToughnessLevel+e.appearenceLevel,[32,35,40,42,45,50].includes(e.ribbonWidth)&&"1K107B"==e.ribbonTypeName&&["D","E"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel="不合格"),e.ribbonThicknessDeviation>3&&["D","E"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel="不合格"),e.ribbonWidth<50?["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.2&&(e.ribbonTotalLevel="不合格"):e.ribbonWidth>=50&&["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.3&&(e.ribbonTotalLevel="不合格"),["AD25","ND25"].includes(e.ribbonTypeName)){var t=e.realRibbonWidth-e.ribbonWidth;(t>=.1||t<=-.2)&&(e.ribbonTotalLevel="不合格")}if("不合格"!==e.ribbonTotalLevel){e.ribbonThickness>=20&&e.ribbonThickness<=22&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"G"),e.ribbonThickness>=23&&e.ribbonThickness<=24&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"L"),e.ribbonThicknessDeviation>3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"F");var a=e.realRibbonWidth-e.ribbonWidth;e.ribbonWidth<50?Math.abs(a)>.2&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(a<-.2?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":a>.2&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E")):e.ribbonWidth>=50&&Math.abs(a)>.3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(a<-.3?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":a>.3&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E"))}""!=e.ribbonThicknessLevel&&""!==e.laminationLevel&&""!=e.ribbonToughnessLevel&&""!=e.appearenceLevel||(e.ribbonTotalLevel=""),"不合格"===e.ribbonTotalLevel?(e.isStored=3,e.isMeasureConfirmed=1):(e.isStored=this.setStoredType(e),1===e.isStored?(e.inPlanStoredWeight=e.coilNetWeight,2===e.ribbonThicknessLevel&&(e.inPlanThickRibbonWeight=e.coilNetWeight)):2===e.isStored&&(e.outPlanStoredWeight=e.coilNetWeight),e.totalStoredWeight=(e.inPlanStoredWeight+e.outPlanStoredWeight).toFixed(2),this.calcQualityOfABCDE(e),this.calcThinRibbonWeight(e),e.qualityOfGood=e.inPlanStoredWeight,2===e.isStored&&(/^[3-8][1-4][A-E][A-C]G?([+-]E)?F?$/.test(e.ribbonTotalLevel)||/^2[2-3][A-C]BL?([+-]E)?F?$/.test(e.ribbonTotalLevel)?e.qualityOfFine=e.coilNetWeight:e.qualityOfNormal=e.coilNetWeight));var i=Object(Je.cloneDeep)(e);i.clients=i.clients.join(),this.$http("PUT",R,i).then(function(e){}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)},calcThinRibbonWeight:function(e){if(!(e.ribbonThickness>23))return e.laminationFactor>=.78?e.highFactorThinRibbonWeight=e.coilNetWeight:void(e.laminationFactor>=.75&&(e.thinRibbonWeight=e.coilNetWeight))},calcQualityOfABCDE:function(e){var t=e.ribbonTotalLevel;/^[3-8][2-4][A-E][A-C]G?([+-]E)?F?$/.test(t)?e.qualityOfA=e.coilNetWeight:/^[3-8]1[A-E][A-C]G?([+-]E)?F?$/.test(t)?e.qualityOfB=e.coilNetWeight:/^[3-8]0[A-E][A-C]G?([+-]E)?F?$/.test(t)?e.qualityOfC=e.coilNetWeight:/^2[1-4][A-E][A-C]L?([+-]E)?F?$/.test(t)?e.qualityOfD=e.coilNetWeight:/^1[1-4][A-E][A-C]([+-]E)?F?$/.test(t)&&(e.qualityOfE=e.coilNetWeight)},calcLaminationLevel:function(e){return e?e>=.84?"4":e>=.82&&e<.84?"3":e>=.8&&e<.82?"2":e>=.78&&e<.8?"1":e>=.75&&e<.78?"0":"不合格":""},calcMaxDeviation:function(e){return e.sort(function(e,t){return e-t}),e[e.length-1]-e[0]},calcribbonThicknessLevel:function(e){if(e)return e>26?1:e>23&&e<=26?2:e>20&&e<=23?3:e>18&&e<=20?4:e>16&&e<=18?5:e>14&&e<=16?6:e>12&&e<=14?7:e<=12?8:void 0},setStoredType:function(e){var t=!0,a=!0,i=e.ribbonThickness,l=e.orderThickness;if(l.indexOf("≤")>-1)i>parseInt(l.substr(1))&&(t=!1);else if(l.indexOf("-")>-1){var r=l.split("-")[1];(i<l.split("-")[0]||i>r)&&(t=!1)}var n=e.laminationFactor,o=e.orderLaminationFactor;if(o.indexOf("≥")>-1)n<parseInt(o.substr(1))&&(t=!1);else if(o.indexOf("-")>-1){var s=o.split("-")[1];(n<o.split("-")[0]||n>s)&&(t=!1)}var c=e.ribbonToughnessLevel;e.orderRibbonToughnessLevels.includes(c)||(t=!1);var b=e.appearenceLevel;if(e.orderAppearenceLevels.includes(b)||(t=!1),t)return 1;var u=e.qualifiedThickness;if(u.indexOf("≤")>-1)i>parseInt(u.substr(1))&&(a=!1);else if(u.indexOf("-")>-1){var d=u.split("-")[1];(i<u.split("-")[0]||i>d)&&(a=!1)}var m=e.qualifiedLaminationFactor;if(m.indexOf("≥")>-1)n<parseInt(m.substr(1))&&(a=!1);else if(m.indexOf("-")>-1){var p=m.split("-")[1];(n<m.split("-")[0]||n>p)&&(a=!1)}return e.qualifiedRibbonToughnessLevels.includes(c)||(a=!1),e.qualifiedAppearenceLevels.includes(b)||(a=!1),a?2:3},exportExcel:function(){var e={startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:we()(this.searchForm.ribbonTypeNames),ribbonWidthJson:we()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:we()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:we()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:we()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:we()(this.searchForm.appearenceLevels)},t=O+"?"+Ue.a.stringify(e);window.open(t)},setSelectable:function(e,t){return!(![1,2,4].includes(e.isStored)||e.isMeasureConfirmed)},handleSelectionChange:function(e){this.multipleSelection=e},measureConfirm:function(){var e=this;if(0===this.multipleSelection.length)return this.$alert("请选择要入库的带材","提示",{type:"warning"});this.multipleSelection.forEach(function(e){e.isMeasureConfirmed=1}),this.$http("PUT",M,{dataJson:we()(this.multipleSelection)}).then(function(t){e.getTableData()}).catch(function(e){console.log(e)})}})},Sa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("退货处理")]),e._v(" "),a("el-breadcrumb-item",[e._v("退货记录")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"生产日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"喷带手："}},[a("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:e.searchForm.caster,callback:function(t){e.$set(e.searchForm,"caster",t)},expression:"searchForm.caster"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonTypeNames,callback:function(t){e.$set(e.searchForm,"ribbonTypeNames",t)},expression:"searchForm.ribbonTypeNames"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厚度级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonThicknessLevels,callback:function(t){e.$set(e.searchForm,"ribbonThicknessLevels",t)},expression:"searchForm.ribbonThicknessLevels"}},e._l(e.ribbonThicknessLevelList,function(e){return a("el-option",{key:e.ribbonThicknessLevelId,attrs:{label:e.ribbonThicknessLevel,value:e.ribbonThicknessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"叠片级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.laminationLevels,callback:function(t){e.$set(e.searchForm,"laminationLevels",t)},expression:"searchForm.laminationLevels"}},e._l(e.laminationLevelList,function(e){return a("el-option",{key:e.laminationLevelId,attrs:{label:e.laminationLevel,value:e.laminationLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"韧性级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonToughnessLevels,callback:function(t){e.$set(e.searchForm,"ribbonToughnessLevels",t)},expression:"searchForm.ribbonToughnessLevels"}},e._l(e.ribbonToughnessLevelList,function(e){return a("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughnessLevel,value:e.ribbonToughnessLevel}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"外观级别："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.appearenceLevels,callback:function(t){e.$set(e.searchForm,"appearenceLevels",t)},expression:"searchForm.appearenceLevels"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}}),e._v(" "),a("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isBatchInStored?a("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.measureConfirm}},[e._v("确认入库")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30",selectable:e.setSelectable}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"50px",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castDate",label:"生产日期",align:"center",formatter:e.dateFormat,width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"diameter",label:"外径(mm)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilWeight",label:"重量(kg)",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationFactor",label:"叠片系数",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"laminationLevel",label:"叠片等级",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realRibbonWidth",label:"实际带宽",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.realRibbonWidth)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.realRibbonWidth,callback:function(a){e.$set(t.row,"realRibbonWidth",a)},expression:"scope.row.realRibbonWidth"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness1",label:"带厚1(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness1)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness1,callback:function(a){e.$set(t.row,"ribbonThickness1",a)},expression:"scope.row.ribbonThickness1"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness2",label:"带厚2(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness2)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness2,callback:function(a){e.$set(t.row,"ribbonThickness2",a)},expression:"scope.row.ribbonThickness2"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness3",label:"带厚3(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness3)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness3,callback:function(a){e.$set(t.row,"ribbonThickness3",a)},expression:"scope.row.ribbonThickness3"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness4",label:"带厚4(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness4)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness4,callback:function(a){e.$set(t.row,"ribbonThickness4",a)},expression:"scope.row.ribbonThickness4"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness5",label:"带厚5(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness5)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness5,callback:function(a){e.$set(t.row,"ribbonThickness5",a)},expression:"scope.row.ribbonThickness5"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness6",label:"带厚6(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness6)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness6,callback:function(a){e.$set(t.row,"ribbonThickness6",a)},expression:"scope.row.ribbonThickness6"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness7",label:"带厚7(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness7)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness7,callback:function(a){e.$set(t.row,"ribbonThickness7",a)},expression:"scope.row.ribbonThickness7"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness8",label:"带厚8(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness8)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness8,callback:function(a){e.$set(t.row,"ribbonThickness8",a)},expression:"scope.row.ribbonThickness8"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness9",label:"带厚9(μm)",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonThickness9)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(a){return function(a){return e.thicknessChangeHandler(a,t.row)}(a)}},model:{value:t.row.ribbonThickness9,callback:function(a){e.$set(t.row,"ribbonThickness9",a)},expression:"scope.row.ribbonThickness9"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessDeviation",label:"厚度偏差(μm)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThickness",label:"平均厚度(μm)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"厚度级别",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughness",label:"韧性",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.ribbonToughness)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.ribbonToughness,callback:function(a){e.$set(t.row,"ribbonToughness",a)},expression:"scope.row.ribbonToughness"}},e._l(e.ribbonToughnessLevelList,function(e){return a("el-option",{key:e._id,attrs:{label:e.ribbonToughness,value:e.ribbonToughness}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonToughnessLevel",label:"韧性等级",align:"center",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appearence",label:"外观",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.appearence)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.appearence,callback:function(a){e.$set(t.row,"appearence",a)},expression:"scope.row.appearence"}},[a("el-option",{attrs:{label:"无明显缺陷",value:"无明显缺陷"}}),e._v(" "),a("el-option",{attrs:{label:"轻棱",value:"轻棱"}}),e._v(" "),a("el-option",{attrs:{label:"棱",value:"棱"}}),e._v(" "),a("el-option",{attrs:{label:"轻微麻点",value:"轻微麻点"}}),e._v(" "),a("el-option",{attrs:{label:"麻点",value:"麻点"}}),e._v(" "),a("el-option",{attrs:{label:"轻微划痕",value:"轻微划痕"}}),e._v(" "),a("el-option",{attrs:{label:"划痕",value:"划痕"}}),e._v(" "),a("el-option",{attrs:{label:"轻微挖心",value:"轻微挖心"}}),e._v(" "),a("el-option",{attrs:{label:"挖心",value:"挖心"}}),e._v(" "),a("el-option",{attrs:{label:"少量劈裂",value:"少量劈裂"}}),e._v(" "),a("el-option",{attrs:{label:"大量劈裂",value:"大量劈裂"}}),e._v(" "),a("el-option",{attrs:{label:"端面损坏",value:"端面损坏"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"appearenceLevel",label:"外观等级",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.appearenceLevel)+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:""},model:{value:t.row.appearenceLevel,callback:function(a){e.$set(t.row,"appearenceLevel",a)},expression:"scope.row.appearenceLevel"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}}),e._v(" "),a("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTotalLevel",label:"综合级别",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:"不合格"===t.row.ribbonTotalLevel?"text_danger":""},[e._v(e._s(t.row.ribbonTotalLevel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isStored",label:"是否入库",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isMeasureConfirmed?a("div",[1===t.row.isStored?a("span",[e._v("计划内入库")]):e._e(),e._v(" "),2===t.row.isStored?a("span",[e._v("计划外入库")]):e._e(),e._v(" "),3===t.row.isStored?a("span",{staticClass:"text_danger"},[e._v("否")]):e._e(),e._v(" "),4===t.row.isStored?a("span",{staticClass:"text_warn"},[e._v("退货入库")]):e._e()]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unStoreReason",label:"不入库原因",align:"center",width:"100px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",{staticClass:"text_danger"},[e._v("\n            "+e._s(t.row.unStoreReason)+"\n          ")]):a("div",[a("el-input",{attrs:{size:"mini"},model:{value:t.row.unStoreReason,callback:function(a){e.$set(t.row,"unStoreReason",a)},expression:"scope.row.unStoreReason"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clients",label:"判定去向",align:"center",width:"120px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.isEditing?a("div",[e._v("\n            "+e._s(t.row.clients?t.row.clients.toString():"")+"\n          ")]):a("div",[a("el-select",{attrs:{size:"mini",placeholder:"",multiple:"","collapse-tags":""},model:{value:t.row.clients,callback:function(a){e.$set(t.row,"clients",a)},expression:"scope.row.clients"}},[a("el-option",{attrs:{label:"F",value:"F"}}),e._v(" "),a("el-option",{attrs:{label:"D",value:"D"}}),e._v(" "),a("el-option",{attrs:{label:"VM",value:"VM"}}),e._v(" "),a("el-option",{attrs:{label:"VS",value:"VS"}}),e._v(" "),a("el-option",{attrs:{label:"VD",value:"VD"}}),e._v(" "),a("el-option",{attrs:{label:"O",value:"O"}}),e._v(" "),a("el-option",{attrs:{label:"Z",value:"Z"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"measureDate",label:"检测时间",align:"center",width:"120px",formatter:e.dateTimeFormat,"show-overflow-tooltip":!0}})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Ia=a("VU/8")(Ca,Sa,!1,function(e){a("jXZf")},"data-v-e70cfaae",null).exports,Na={client:"",isFlat:""},Wa={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{client:"",isFlat:""},rules:{client:[{required:!0,message:"请填写客户",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"}],isFlat:[{required:!0,message:"请选择是否必须要求平整",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},Na):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="create"===e.dialogData.formType?{method:"post",url:ce}:{method:"put",url:be},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},Ea={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增客户":"修改客户",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"150px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"客户：",prop:"client"}},[a("el-input",{model:{value:e.formData.client,callback:function(t){e.$set(e.formData,"client",t)},expression:"formData.client"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否必须平整：",prop:"isFlat"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.formData.isFlat,callback:function(t){e.$set(e.formData,"isFlat",t)},expression:"formData.isFlat"}},[a("el-option",{attrs:{value:"是",label:"是"}}),e._v(" "),a("el-option",{attrs:{value:"否",label:"否"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Aa={name:"ribbon",components:{dialogForm:a("VU/8")(Wa,Ea,!1,function(e){a("pldS")},"data-v-5775697a",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!1}},computed:Ae()({},Object(je.c)(["clientsList"])),created:function(){this.getClientsList()},methods:Ae()({},Object(je.b)(["getClientsList"]),{add:function(){this.dialogVisible=!0,this.formType="create"},edit:function(e){this.dialogVisible=!0,this.formType="edit",this.rowData=e},del:function(e){var t=this,a=e.clientsId,i=e.client;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",ue,{clientsId:a}).then(function(e){t.getClientsList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getClientsList()}})},Ra={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("客户管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增客户")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.clientsList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"client",label:"客户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isFlat",label:"是否必须平整",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var $a=a("VU/8")(Aa,Ra,!1,function(e){a("sdx3")},"data-v-09832135",null).exports,Oa={appearence:"",appearenceLevel:""},Ba={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{appearence:"",appearenceLevel:""},rules:{appearence:[{required:!0,message:"请填写外观",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"}],appearenceLevel:[{required:!0,message:"请填写外观等级",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=We()({},Oa):this.formData=We()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0;var a="create"===e.dialogData.formType?{method:"post",url:me}:{method:"put",url:pe},i=a.method,l=a.url;e.$http(i,l,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},qa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增外观":"修改外观",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"150px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitForm(t):null}}},[a("el-form-item",{attrs:{label:"外观：",prop:"appearence"}},[a("el-input",{model:{value:e.formData.appearence,callback:function(t){e.$set(e.formData,"appearence",t)},expression:"formData.appearence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外观等级：",prop:"appearenceLevel"}},[a("el-input",{model:{value:e.formData.appearenceLevel,callback:function(t){e.$set(e.formData,"appearenceLevel",t)},expression:"formData.appearenceLevel"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var za={name:"ribbon",components:{dialogForm:a("VU/8")(Ba,qa,!1,function(e){a("IZkC")},"data-v-69552b66",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!1}},computed:Ae()({},Object(je.c)(["appearenceList"])),created:function(){this.getAppearenceLevelList()},methods:Ae()({},Object(je.b)(["getAppearenceLevelList"]),{add:function(){this.dialogVisible=!0,this.formType="create"},edit:function(e){this.dialogVisible=!0,this.formType="edit",this.rowData=e},del:function(e){var t=this,a=e.appearenceLevelId,i=e.appearence;e.appearenceLevel;this.$confirm("删除后数据无法恢复，确定要删除 "+i+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",he,{appearenceLevelId:a}).then(function(e){t.getAppearenceLevelList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getAppearenceLevelList()}})},ja={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("外观管理")])],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增外观")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.appearenceList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appearence",label:"外观",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appearenceLevel",label:"级别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var Ja=a("VU/8")(za,ja,!1,function(e){a("F7Js")},"data-v-163df4ae",null).exports;i.default.use(s.a);var Ha=new s.a({routes:[{path:"/login",name:"login",component:Le},{path:"/",component:Te,redirect:"/login",children:[{path:"plan/:castId",name:"plan",component:Ye,meta:{title:"生产计划",icon:"plan"}},{path:"melt/:castId",name:"melt",component:ct,meta:{title:"化钢记录表",icon:"melt"}},{path:"cast/:castId",name:"cast",component:gt,meta:{title:"喷带记录表",icon:"cast"}},{path:"ribbonType",name:"ribbonType",component:wt,meta:{title:"带材牌号管理",icon:"ribbonType"}},{path:"ribbonWidth",name:"ribbonWidth",component:Ct,meta:{title:"带材规格管理",icon:"ribbonWidth"}},{path:"ribbonThicknessLevel",name:"ribbonThicknessLevel",component:At,meta:{title:"带材厚度等级管理",icon:"ribbonThicknessLevel"}},{path:"ribbonToughnessLevel",name:"ribbonToughnessLevel",component:zt,meta:{title:"带材韧性等级管理",icon:"ribbonToughnessLevel"}},{path:"appearenceLevel",name:"appearenceLevel",component:Ja,meta:{title:"外观等级管理",icon:"appearenceLevel"}},{path:"laminationLevel",name:"laminationLevel",component:Qt,meta:{title:"带材叠片等级管理",icon:"laminationLevel"}},{path:"clients",name:"clients",component:$a,meta:{title:"客户管理",icon:"clients"}},{path:"user",name:"user",component:Yt,meta:{title:"用户管理",icon:"user"}},{path:"roll/:castId",name:"roll",component:oa,meta:{title:"重卷记录表",icon:"roll"}},{path:"measure/:castId",name:"measure",component:ba,meta:{title:"检测记录表",icon:"measure"}},{path:"storage/:castId",name:"storage",component:ma,meta:{title:"库房记录表",icon:"storage"}},{path:"storageTotal",name:"storageTotal",component:ga,meta:{title:"库房总表",icon:"storageTotal"}},{path:"statisticsOfRatio",name:"statisticsOfRatio",component:_a,meta:{title:"喷带手生产统计表",icon:"statisticsOfRatio"}},{path:"statisticsQuality",name:"statisticsQuality",component:wa,meta:{title:"带材质量统计表",icon:"statisticsQuality"}},{path:"statisticsOder",name:"statisticsOder",component:xa,meta:{title:"订单统计表",icon:"statisticsOder"}},{path:"returnTreatment",name:"returnTreatment",component:Fa,meta:{title:"退货操作",icon:"returnTreatment"}},{path:"returnRecord",name:"returnRecord",component:Ia,meta:{title:"退货记录",icon:"returnRecord"}}]}]}),Va=a("pFYg"),Ma=a.n(Va),Qa=a("//Fk"),Pa=a.n(Qa),Ua=a("hKoQ"),Ka=a.n(Ua),Za=a("mtWM"),Xa=a.n(Za);function Ga(e,t,a){e=e.toLowerCase(),a=a&&"object"===(void 0===a?"undefined":Ma()(a))?a:{};var i={url:t,method:e,transformRequest:[function(){return Ue.a.stringify(a)}],headers:{"X-Requested-With":"XMLHttpRequest"}};return"post"===e||"put"===e||"delete"===e?(i.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",i.data=a):"get"===e&&(i.params=a),Xa()(i)}Ka.a.polyfill(),a("puN1").shim(),Xa.a.interceptors.response.use(function(e){var t=e.config.method.toUpperCase(),a=e.data;return 302==a.status?(Object(l.Message)({message:a.message,type:"error"}),Ha.push({path:"/login"})):0!=a.status?(Object(l.Message)({message:a.message,type:"error"}),{status:-1,message:a.message}):("GET"!==t&&0==a.status&&Object(l.Message)({message:a.message,type:"success"}),a.data||{})},function(e){return l.MessageBox.alert(e.message,"系统提示",{confirmButtonText:"确定"}),Pa.a.reject(e)}),i.default.use(je.a);var Ya=new je.a.Store({strict:!0,state:{ribbonTypeList:[],ribbonWidthList:[],ribbonThicknessLevelList:[],laminationLevelList:[],ribbonToughnessLevelList:[],clientsList:[],appearenceList:[]},mutations:{SET_RIBBONTYPELIST:function(e,t){e.ribbonTypeList=t},SET_RIBBONWIDTHLIST:function(e,t){e.ribbonWidthList=t},SET_RIBBONTHICKNESSLEVELLIST:function(e,t){e.ribbonThicknessLevelList=t},SET_LAMINATIONLEVELLIST:function(e,t){e.laminationLevelList=t},SET_RIBBONTOUGHNESSLEVELLIST:function(e,t){e.ribbonToughnessLevelList=t},SET_CLIENTSLIST:function(e,t){e.clientsList=t},SET_APPERENCELEVELLIST:function(e,t){e.appearenceList=t}},actions:{getRibbonTypeList:function(e){var t=e.commit;Ga("get",g).then(function(e){t("SET_RIBBONTYPELIST",e.list)}).catch(function(e){console.log(e)})},getRibbonWidthList:function(e){var t=e.commit;Ga("get",Q).then(function(e){t("SET_RIBBONWIDTHLIST",e.list)}).catch(function(e){console.log(e)})},getRibbonThicknessLevelList:function(e){var t=e.commit;Ga("get",Z).then(function(e){t("SET_RIBBONTHICKNESSLEVELLIST",e.list)}).catch(function(e){console.log(e)})},getLaminationLevelList:function(e){var t=e.commit;Ga("get",le).then(function(e){t("SET_LAMINATIONLEVELLIST",e.list)}).catch(function(e){console.log(e)})},getRibbonToughnessLevelList:function(e){var t=e.commit;Ga("get",ee).then(function(e){t("SET_RIBBONTOUGHNESSLEVELLIST",e.list)}).catch(function(e){console.log(e)})},getAppearenceLevelList:function(e){var t=e.commit;Ga("get",de).then(function(e){t("SET_APPERENCELEVELLIST",e.list)}).catch(function(e){console.log(e)})},getClientsList:function(e){var t=e.commit;Ga("get",se).then(function(e){t("SET_CLIENTSLIST",e.list)}).catch(function(e){console.log(e)})}}});i.default.config.productionTip=!1,i.default.use(r.a,{size:"small"}),i.default.prototype.$http=Ga,new i.default({el:"#app",router:Ha,store:Ya,components:{App:o},template:"<App/>"})},Q30H:function(e,t){},REF4:function(e,t){},RNH8:function(e,t){},WLiy:function(e,t){},XKCW:function(e,t){},ZtRW:function(e,t){},bew3:function(e,t){},cCY8:function(e,t){},fdtJ:function(e,t){},fniu:function(e,t){},iRPG:function(e,t){},jXZf:function(e,t){},jjwR:function(e,t){},mdwl:function(e,t){},pldS:function(e,t){},sdx3:function(e,t){},uMhA:function(e,t){},uslO:function(e,t,a){var i={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function l(e){return a(r(e))}function r(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}l.keys=function(){return Object.keys(i)},l.resolve=r,e.exports=l,l.id="uslO"},veqG:function(e,t){},xuvX:function(e,t){},yJIb:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALu0lEQVR4Xu2dT4idVxmHf2+KXUjixn3diNiFKMmqmSFBENwKdqE2xELVgs1kodCV6AxSQdBNGgUNEUEtdSXtsqCQ0KSLkoCiNVFX3bhwJclKqEc+vReH0Enue75z3u+cc59Zpuff+/zO02/ucO97TfxAAAJHEjDYQAACRxNAEG4HBB5CAEG4HhBAEO4ABPII8ATJ48asLSGAIFsSNGXmEUCQPG7M2hICCLIlQVNmHgEEyePGrC0hgCBbEjRl5hGYJUhK6QlJX5O0K+mkpBN5x2AWBIoSuCfptqQ3Jf3UzN7NXT1bkJTSM5J+Junx3M2ZB4EAAv+S9BUz+0XOXlmCpJR2JF2XdCxnU+ZAIJjAvyWdMbMb3n3dgqSUJin+KOlJ72aMh8CCBP4s6RNm9p7nDDmCPCXppmcTxkKgEQKnzewtz1lyBLkg6WXPJoyFQCME9szssucsOYJ8R9K+ZxPGQqARAvtmduA5S44gkxyTJPxAoDcCB2bm+p87gvQWMeedQwBB5tBj7vAEEGT4iClwDgEEmUOPucMTQJDhI6bAOQQQZA495g5PAEGGj5gC5xBAkDn0mDs8AQQZPmIKnEMAQebQY+7wBBBk+IgpcA4BBJlDj7nDE0CQ4SOmwDkEQgTh7e5zImLukgRC3u7+dUk/WrJK9oZAJoEXzOzHnrk5b3fnI7cewoxtiUDIR24nqf4i6aMtVc5ZIPAIAn+T9DEzSx5S7ifItDhtfzyIGdsAgbi2P+tiaRzXQOwcYRMCU+O458zsl5sMfnBM1hPkkCS0Hs2hzpzaBJZvPVq7QtaHQAsEZj1BWiiAM0CgJgEEqUmXtbsngCDdR0gBNQkgSE26rN09AQTpPkIKqEkAQWrSZe3uCSBI9xFSQE0CCFKTLmt3TwBBuo+QAmoSQJCadFm7ewII0n2EFFCTAILUpMva3RNAkO4jpICaBBCkJl3W7p4AgnQfIQXUJIAgNemydvcEhhQkpfRhSV+V9NlVQn+S9LqZvdF9YhQQSmAoQVJKxyS9IOklSSfeh+Q7kr5kZr8Ppcxm3RIYRpCU0mOSXpX09CPS+LukT5rZP7pNjYOHERhCEIcca7C/NrMvhFFmo24JdC9IhhzrsD5uZne7TY6DhxDoWpAZckxwz5nZr0Io/6/Z3tQi6XlJO5JOHvEaKeo4o++zbvtzQ9JPzOzd3IK7FWSmHBOvb5vZd3PBeeallM5Juirpcc88xhYhsFzjuCLHz1ikgBzTru7visg4Km1ac6CVnxPferR8DZutWEiOEEFWf3aeXufQ6HuzeGuOmppXT6873/Ns0tWvWAXliBJker3xpicQxlYlsGtm0+uSjX+6EaSwHFGC7Em6tHEaDKxN4KKZvezZpAtBKsgRJQhfV+e5jfXHul93Ni9IJTmiBNmXNEnCTxsExhKkohwI0saFjT7FOIJUlgNBoq9mG/uNIUiAHAjSxoWNPkX/ggTJgSDRV7ON/foWJFAOBGnjwkafol9BguVAkOir2cZ+fQqygBwI0saFjT5Ff4IsJAeCRF/NNvbrS5AF5UCQNi5s9Cn6EWRhORAk+mq2sV8fgjQgB4K0cWGjT9G+II3IgSDRV7ON/doWpCE5EKSNCxt9inYFaUyOKEF4u3u0Ag/fb9/MDjxHCnm7e4NyRAlyQZLrAzqe8BjrJrBnZpc9s6oL0qgcUYKcluT6iKcnPMa6CeyY2U3PrKqCNCxHlCBTO9Q7NG3wXMlqY9tq2tC4HCGCTJuklHYlXZM0NdbmZxkCU9ufs2bmbqBR5QnSgRxhgqwkOS/pCo3jFrGjrcZxncgRKshKksOtR09JOr7IddmOTe9LurV6/ddO69GO5AgXZDvu5XhVFvsVqzM5EGS8u1yloiKCdCgHglS5TuMtOluQTuVAkPHucpWKZgnSsRwIUuU6jbdotiCdy4Eg493lKhXNEeQVSV+scqqYRd3v7Iw5Fru0RCBLkJTSNyX9oKVCMs6CIBnQtm2KW5CU0ockTV+l/MHOYSFI5wFGHD9HkM9J+k3E4SrvgSCVAY+wfI4gL0r6/gDFI8gAIdYuIUeQb0j6Ye2DBayPIAGQe98iR5BPS/pd74VHfcvtAJy2uoQcQT4g6a+SPtI5OZ4gnQcYcXy3INOhUkojvFBHkIgb1vkeWYKsJPm5pC93XD+CdBxe1NHnCDJ93vpVSU9HHbbwPghSGOiIy2ULsnqK9CwJgox4owvXNEuQziVBkMKXacTlZgvSsSQIMuKNLlxTEUE6lQRBCl+mEZcrJkiHkiDIiDe6cE1FBelMklBBUkqH2/6clHSicJYs938C9yTdbq7tz/p8nXzaMEyQlNI5SVdpHLeIw201jutIkhBBUko7kq7TenQROdabTq1Hz5iZu5F48V+xDmNo/ElSXZCU0tSP9y7NqxeVY715W82rO3iSRAgyPT3cDZObuE5jHmLX+xSp+gRpXJIIQfYkXRrzrnVZ1UUzc32hUYggjf51K0IQvoKtLY/cmYcJ0qAkbljerFNK+5ImSfhpg4A781BBGpPEDcubMYJ4iVUf7848XJCGJHHD8saHIF5i1ce7M19EkEYkccPyxocgXmLVx7szX0yQBiRxw/LGhyBeYtXHuzNfVJCFJXHD8saHIF5i1ce7M19ckAUlccPyxocgXmLVx7szb0KQhSRxw/LGhyBeYtXHuzNvRpAFJHHD8saHIF5i1ce7M29KkGBJ3LC88SGIl1j18e7MmxMkUBI3LG98COIlVn28O/MmBQmSxA3LGx+CeIlVH+/OvFlBAiRxw/LGhyBeYtXHuzNvWpDKkrhheeNDEC+x6uPdmTcvSEVJ3LC88aWUeLu7F1rd8ftmduDZogtBKkkSIcgFSa4P6HjCY6ybwJ6ZXfbM6kaQCpJECHJ61XrGkwlj6xHYMbObnuW7EqSwJBGCTM2979C0wXMlq41ts2lDjXILdUupLshK6F1J12j7U+MmbLzm1PbnrJm5G2h09wRZIykgybfM7KWNEc8YmFI6L+kKjeNmQMyf2mbjuPx6Np85U5JnzOyVzXebN/KB1qOnJB2ftyKzH0LgvqRbzbYejYxuhiRPmtn0+oAfCBxJoNtfsQ5XlCHJb83sM9wLCDyKwBCCOP+69c9Vn9Y/PAoO/x0CwwhySJLvSXrxiGjfkfSsmb1N9BDYhMBQghz6C9f0p9XPS/rU6t8mMV4zszc2gcIYCKwJDCkI8UKgFAEEKUWSdYYkgCBDxkpRpQggSCmSrDMkAQQZMlaKKkUAQUqRZJ0hCSDIkLFSVCkCCFKKJOsMSQBBhoyVokoRQJBSJFlnSAIIMmSsFFWKAIKUIsk6QxJAkCFjpahSBBCkFEnWGZIAggwZK0WVIoAgpUiyzpAEEGTIWCmqFIFZgjzQyuakpBOlDsY6EJhB4J6k24u2/UkpnZN0lWZoM2JkagSB+MZxKaUdSddppxmRL3sUIDC1Hj1jZje8a7l/xUopHZN0l4bMXtSMX5hATPPq1dPD3QR4YThsD4GJwK73KZLzBNmTdAneEOiQwEUzc32hUY4gfK1YhzeDI/+XgPsrL3IE2Zc0ScIPBHojgCC9JcZ5QwkgSChuNuuNAIL0lhjnDSWAIKG42aw3AgjSW2KcN5QAgoTiZrPeCCBIb4lx3lACCBKKm816I4AgvSXGeUMJIEgobjbrjQCC9JYY5w0lgCChuNmsNwII0ltinDeUQIggvN09NFM2K0hg38wOPOvlvN39giTXh048B2IsBCoS2DOzy571cwQ5vWqn4tmHsRBogcCOmd30HCRHkMck3aFpgwczYxsgENO0YSo0pbQr6RptfxqInSNsQmBq+3PWzNzNRtxPkPVpUkrnJV2hcdwm+TBmQQLxjeMOSfKEpOclTY3kTkk6viAItobAmsB9SbcWbT1KFhDYBgLZv2JtAxxqhACCcAcg8BACCML1gACCcAcgkEeAJ0geN2ZtCQEE2ZKgKTOPAILkcWPWlhBAkC0JmjLzCCBIHjdmbQkBBNmSoCkzj8B/AF3LHwXph6e5AAAAAElFTkSuQmCC"}},["NHnr"]);
//# sourceMappingURL=app.3a72be8a250401f47675.js.map