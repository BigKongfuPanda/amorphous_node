webpackJsonp([1],{"5PlU":function(e,n,t){var i=t("RY/4"),r=t("dSzd")("iterator"),o=t("/bQp");e.exports=t("FeBl").isIterable=function(e){var n=Object(e);return void 0!==n[r]||"@@iterator"in n||o.hasOwnProperty(i(n))}},"6xz9":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("BO1k"),r=t.n(i),o=t("fZjL"),s=t.n(o),a=t("d7EF"),l=t.n(a),c=t("woOf"),u=t.n(c),b=t("mvHQ"),h=t.n(b),d=t("2X9z"),p=t.n(d),m=t("Xxa5"),f=t.n(m),v=t("exGp"),g=t.n(v),T=t("Dd8w"),k=t.n(T),_=t("mw3O"),L=t.n(_),w=t("M4fF"),y=t("g7mi"),F=t("X2Oc"),x=t("NYxO"),C=t("IC2r"),N=(t("E4LH"),{name:"ApplyInStoreModal",props:{castId:{type:Number,required:!0},visible:{type:Boolean,required:!0}},data:function(){return{multipleSelection:[],tableData:[],loading:!1}},created:function(){this.getTableData()},methods:{getTableData:function(){var e=this;this.loading=!0,this.$http("get",y.a.queryApplyStorageByFurnace,{castId:this.castId}).then(function(n){e.tableData=n.list}).catch(function(e){return console.log(e)}).finally(function(){return e.loading=!1})},handleSelectionChange:function(e){this.multipleSelection=e},closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this,n=cloneDeep(this.multipleSelection);return 0===n.length?this.$alert("请选择要入库的带材","提示",{type:"warning"}):n.some(function(e){return!e.clients||0===e.clients.length})?this.$alert("申请入库的带材没有填写检测去向，请检查后再提交","提示",{type:"warning"}):(n.forEach(function(e){e.isMeasureConfirmed=1,e.clients=e.clients.join(),e.appearence=e.appearence.join()}),void this.$http("POST",y.a.measureConfirm,{dataJson:h()(n)}).then(function(n){e.$router.push({path:"/applyStore"}),e.$emit("submit")}).catch(function(e){console.log(e)}))}}}),D={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"申请入库",visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,"element-loading-text":"拼命加载中"},on:{"update:visible":function(n){e.visible=n},close:e.closeDialog}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"20"}}),e._v(" "),t("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",fixed:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"totalCount",label:"可入库盘数合计",align:"center",fixed:""}}),e._v(" "),t("el-table-column",{attrs:{prop:"totalWeight",label:"可入库净重合计(kg)",align:"center",fixed:""}})],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var S=t("VU/8")(N,D,!1,function(e){t("TZdb")},"data-v-9512c436",null).exports,W={name:"melt",components:{Collapse:C.a,ApplyInStoreModal:S},data:function(){return{userinfo:{},castId:6,searchForm:{caster:"",furnace:"",date:[],measureDate:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[],thicknessDivation:""},loading:!1,tableData:[],pageConfig:{total:1,current:1,pageSize:10},isExportable:!1,isEditable:!1,isDeleteable:!1,tableHeight:550,multipleSelection:[],isBatchInStored:!1,isAutoQuerying:!1,pollTimer:null,applyInStoreModalVisible:!1}},computed:k()({autoQueryConfig:function(){return{icon:this.isAutoQuerying?"el-icon-video-pause":"el-icon-video-play",text:this.isAutoQuerying?"停止自动更新":"启动自动更新",type:this.isAutoQuerying?"danger":"primary"}}},Object(x.c)(["ribbonToughnessLevelList","ribbonTypeList","ribbonWidthList","ribbonThicknessLevelList","laminationLevelList","clientsList","appearenceList","linerWeightList"]),{uniqueAppearenceLevelList:function(){return this.appearenceList.reduce(function(e,n){return e.includes(n.appearenceLevel)||e.push(n.appearenceLevel),e},[])}}),beforeRouteUpdate:function(e,n,t){this.castId=e.params.castId,this.getTableData(),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isBatchInStored=this.setBatchInStored(),t()},created:function(){var e=this;return g()(f.a.mark(function n(){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.castId=e.$route.params.castId,e.userinfo=JSON.parse(localStorage.getItem("userinfo")),e.isExportable=e.setExportable(),e.isEditable=e.setEditable(),e.isDeleteable=e.setDeleteable(),e.isBatchInStored=e.setBatchInStored(),n.next=8,e.getLinerWeightList();case 8:return n.next=10,e.getRibbonToughnessLevelList();case 10:return n.next=12,e.getRibbonTypeList();case 12:return n.next=14,e.getRibbonWidthList();case 14:return n.next=16,e.getRibbonThicknessLevelList();case 16:return n.next=18,e.getLaminationLevelList();case 18:return n.next=20,e.getClientsList();case 20:return n.next=22,e.getAppearenceLevelList();case 22:e.getTableData();case 23:case"end":return n.stop()}},n,e)}))()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-80}),window.onresize=Object(F.c)(function(){e.tableHeight=window.innerHeight-80},1e3)},beforeDestroy:function(){clearInterval(this.pollTimer),this.pollTimer=null},methods:k()({handleAutoQuery:function(){var e=this,n=this.isAutoQuerying;this.isAutoQuerying=!n,this.isAutoQuerying?(clearInterval(this.pollTimer),this.getTableData(),this.pollTimer=setInterval(function(){e.getTableData()},5e3)):this.pollTimer&&clearInterval(this.pollTimer)},batchCalcRibbonTotalData:function(){var e=this,n=this.tableData.filter(function(e){return!e.ribbonTotalLevel&&[e.ribbonThickness1,e.ribbonThickness2,e.ribbonThickness3,e.ribbonThickness4,e.ribbonThickness5,e.ribbonThickness6,e.ribbonThickness7,e.ribbonThickness8,e.ribbonThickness9,e.realRibbonWidth,e.ribbonToughnessLevel,e.appearenceLevel].every(function(e){return!!e})});if(!Array.isArray(n)||0===n.length)return p()({message:"没有找到需要计算综合级别的带材，请确认 带材厚度/带宽/韧性等级/外观等级 等数据是否完整",type:"error"});n=n.map(function(n){var t=e.calcRibbonTotalData(n);return k()({},n,t)}),this.$http("PUT",y.a.updateMeasureByBatch,{listJson:h()(n)}).then(function(n){e.getTableData({current:e.pageConfig.current||1})}).catch(function(e){return console.log(e)})},thicknessChangeHandler:function(e,n){var t=[n.ribbonThickness1,n.ribbonThickness2,n.ribbonThickness3,n.ribbonThickness4,n.ribbonThickness5,n.ribbonThickness6,n.ribbonThickness7,n.ribbonThickness8,n.ribbonThickness9];t=t.map(function(e){if(""!==e)return Number(e)}).filter(function(e){return void 0!==e}),n.ribbonThicknessDeviation=this.calcMaxDeviation(t),n.ribbonThickness=t.length>0?Number((t.reduce(function(e,n){return e+n},0)/t.length).toFixed(2)):0,n.ribbonThicknessLevel=this.calcribbonThicknessLevel(n.ribbonThickness)}},Object(x.b)(["getRibbonToughnessLevelList","getRibbonTypeList","getRibbonWidthList","getRibbonThicknessLevelList","getLaminationLevelList","getClientsList","getAppearenceLevelList","getLinerWeightList"]),{dateFormat:function(e,n){return Object(F.a)(e.castDate)},dateTimeFormat:function(e,n){return e.measureDate?Object(F.b)(e.measureDate):""},setEditable:function(){return 5==this.userinfo.roleId},setDeleteable:function(){return 1==this.userinfo.roleId},setExportable:function(){return!![1,2,3,5].includes(this.userinfo.roleId)},setBatchInStored:function(){return!![1,5].includes(this.userinfo.roleId)},calcLinerWeight:function(e){e=Number(e);var n=(this.linerWeightList.find(function(n){return n.ribbonWidth===e})||{}).linerWeight;return n||(p()({message:"带材宽度"+e+"没有配置所用内衬重量，请联系管理员进行配置！",type:"error"}),0)},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",furnace:"",date:[],measureDate:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],startMeasureTime:this.searchForm.measureDate[0],endMeasureTime:this.searchForm.measureDate[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:h()(this.searchForm.ribbonTypeNames),ribbonWidthJson:h()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:h()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:h()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:h()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:h()(this.searchForm.appearenceLevels),thicknessDivation:this.searchForm.thicknessDivation};console.log(n),u()(n,t),this.$http("get",y.a.queryMeasure,n).then(function(n){e.pageConfig.total=n.count,e.pageConfig.pageSize=n.limit,n.list&&n.list.forEach(function(n){5==e.userinfo.roleId?n.isEditing=!0:n.isEditing=!1,n.storageRule={orderThickness:n.orderThickness,orderLaminationFactor:n.orderLaminationFactor,orderRibbonToughnessLevels:n.orderRibbonToughnessLevels,orderAppearenceLevels:n.orderAppearenceLevels,qualifiedDemands:[1,2,3,5,6,15].includes(Number(e.userinfo.roleId))?JSON.parse(n.qualifiedDemands):[]},n.clients=n.clients?n.clients.split(","):[],n.appearence=n.appearence?n.appearence.split(","):[];var t=(n.coilWeight-e.calcLinerWeight(n.ribbonWidth)).toFixed(2);n.coilNetWeight=Number(t),n.remainWeight=n.coilNetWeight}),e.tableData=n.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},edit:function(e){if((1==e.isStored||2==e.isStored)&&1==e.isMeasureConfirmed)return this.$message({message:"该带材已经入库，您无权限操作，请联系库房主管人员！",type:"error"})},formatToNumber:function(e){return"string"==typeof e?Number(e.trim()):e},calcRibbonTotalData:function(e){e.laminationFactor=this.calcLaminationFactor(e.coilNetWeight,e.diameter,e.realRibbonWidth),e.laminationLevel=this.calcLaminationLevel(e.laminationFactor),e.ribbonToughness=this.ribbonToughnessLevelList.reduce(function(e,n){return e[n.ribbonToughnessLevel]=n.ribbonToughness,e},{})[e.ribbonToughnessLevel]||"",e.ribbonThickness1=this.formatToNumber(e.ribbonThickness1),e.ribbonThickness2=this.formatToNumber(e.ribbonThickness2),e.ribbonThickness3=this.formatToNumber(e.ribbonThickness3),e.ribbonThickness4=this.formatToNumber(e.ribbonThickness4),e.ribbonThickness5=this.formatToNumber(e.ribbonThickness5),e.ribbonThickness6=this.formatToNumber(e.ribbonThickness6),e.ribbonThickness7=this.formatToNumber(e.ribbonThickness7),e.ribbonThickness8=this.formatToNumber(e.ribbonThickness8),e.ribbonThickness9=this.formatToNumber(e.ribbonThickness9),e.ribbonThicknessDeviation=this.calcMaxDeviation([e.ribbonThickness1,e.ribbonThickness2,e.ribbonThickness3,e.ribbonThickness4,e.ribbonThickness5,e.ribbonThickness6,e.ribbonThickness7,e.ribbonThickness8,e.ribbonThickness9]);var n=((e.ribbonThickness1+e.ribbonThickness2+e.ribbonThickness3+e.ribbonThickness4+e.ribbonThickness5+e.ribbonThickness6+e.ribbonThickness7+e.ribbonThickness8+e.ribbonThickness9)/9).toFixed(2);e.ribbonThickness=Number(n),e.ribbonThicknessLevel=this.calcribbonThicknessLevel(e.ribbonThickness);var t=this.calcRibbonTotalLevel(e),i=l()(t,2),r=i[0],o=i[1];if(e.ribbonTotalLevel=r,e.unQualifiedReason=o,"不合格"===e.ribbonTotalLevel)e.isStored=3;else{e.isStored=this.setStoredType(e),1===e.isStored?(e.inPlanStoredWeight=e.coilNetWeight,2===e.ribbonThicknessLevel&&(e.inPlanThickRibbonWeight=e.coilNetWeight)):2===e.isStored&&(e.outPlanStoredWeight=e.coilNetWeight);var a=(e.inPlanStoredWeight+e.outPlanStoredWeight).toFixed(2);e.totalStoredWeight=Number(a),this.calcQualityOfABCDE(e),this.calcThinRibbonWeight(e),e.qualityOfGood=e.inPlanStoredWeight,2===e.isStored&&(/^[3-8][1-4][A-E][A-C]G?([+-]E)?F?$/.test(e.ribbonTotalLevel)||/^2[2-3][A-C]BL?([+-]E)?F?$/.test(e.ribbonTotalLevel)?e.qualityOfFine=e.coilNetWeight:e.qualityOfNormal=e.coilNetWeight)}var c=Object(w.cloneDeep)(e);return c.clients=c.clients.join(),c.appearence=c.appearence.join(),s()(c).forEach(function(e){null==c[e]&&delete c[e]}),c},save:function(e){var n=this.calcRibbonTotalData(e);this.$http("PUT",y.a.updateMeasure,n).then(function(e){}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var n={current:e};this.getTableData(n)},calcRibbonTotalLevel:function(e){var n="",t="",i=["D","E"].includes(e.ribbonToughnessLevel),r=e.realRibbonWidth-e.ribbonWidth;if(r=Number(r.toFixed(1)),"不合格"===e.laminationLevel)return[n="不合格",t="叠片不合格"];if("不合格"===e.appearenceLevel)return[n="不合格",t="外观不合格"];if("1K107B"==e.ribbonTypeName){if(e.ribbonThickness>32)return[n="不合格",t="1K107B，厚度大于32μm，不合格"];if([32].includes(e.ribbonWidth)&&i)return[n="不合格",t="1K107B，规格为32mm，韧性为D/E，不合格"];if(e.ribbonWidth<50&&i&&Math.abs(r)>.2)return[n="不合格",t="1K107B，规格<50mm，带材宽度超出规格±0.2mm，同时韧性为D/E，不合格"];if(e.ribbonWidth>=50&&i&&Math.abs(r)>.5)return[n="不合格",t="1K107B，规格>=50mm，带材宽度超出规格±0.5mm，同时韧性为D/E，不合格"];if(e.ribbonThicknessDeviation>3&&i)return[n="不合格",t="1K107B，带材厚度偏差大于3，同时韧性为D/E，不合格"];if([55,60,65].includes(e.ribbonWidth)&&i&&e.laminationFactor>=.75&&!["A","B"].includes(e.appearenceLevel))return[n="不合格",t="1K107B，规格为55mm/60mm/65mm、韧性为D/E级别且叠片≥0.75的带材若无法判定为信维带面（带面B级别以上），不合格"];if([20,25,30,35,40,42,43,45,50].includes(e.ribbonWidth)&&i&&e.laminationFactor<.75)return[n="不合格",t="1K107B，规格为20mm/25mm/30mm/35mm/40mm/42mm/43mm/45mm/50mm，韧性为D/E级别且叠片＜0.75，不合格"]}if("1K107BW"==e.ribbonTypeName){if(e.ribbonThickness>32)return[n="不合格",t="1K107BW，厚度大于32μm，不合格"];if([32].includes(e.ribbonWidth)&&i)return[n="不合格",t="1K107BW，规格为32mm，韧性为D/E，不合格"];if(e.ribbonWidth<50&&i&&Math.abs(r)>.2)return[n="不合格",t="1K107BW，规格<50mm，带材宽度超出规格±0.2mm，同时韧性为D/E，不合格"];if(e.ribbonWidth>=50&&i&&Math.abs(r)>.5)return[n="不合格",t="1K107BW，规格>=50mm，带材宽度超出规格±0.5mm，同时韧性为D/E，不合格"];if(e.ribbonThicknessDeviation>3&&i)return[n="不合格",t="1K107BW，带材厚度偏差大于3，同时韧性为D/E，不合格"];if([20,25,30,35,40,42,43,45,50].includes(e.ribbonWidth)&&i&&e.laminationFactor<.75)return[n="不合格",t="1K107BW，规格为20mm/25mm/30mm/35mm/40mm/42mm/43mm/45mm/50mm，韧性为D/E级别且叠片＜0.75，不合格"]}if("1K107E"==e.ribbonTypeName){if(i)return[n="不合格",t="1K107E，韧性为D/E级别，不合格"];if(e.laminationFactor<.78)return[n="不合格",t="1K107E，叠片＜0.78，不合格"]}if(["AD25","ND25","1K107A","FN-300"].includes(e.ribbonTypeName)){if(e.ribbonThickness>32)return[n="不合格",t="成分为 AD25、ND25、1K107A、FN-300的直喷带材，厚度大于32μm，不合格"];if(e.laminationFactor<.75)return[n="不合格",t="成分为 AD25、ND25、1K107A、FN-300的直喷带材，任意规格, 叠片＜0.75，不合格"]}if(["1K107O"].includes(e.ribbonTypeName)){if(e.ribbonThickness<22||e.ribbonThickness>28)return[n="不合格",t="成分为1K107O的带材，带厚<22μm或者带厚>28μm，不合格"];if(e.laminationFactor<.78)return[n="不合格",t="成分为1K107O的带材，叠片系数<0.78，不合格"];if(e.ribbonThicknessDeviation>2)return[n="不合格",t="成分为1K107O的带材，厚度偏差>2，不合格"];if(r>.3||r<-.3)return[n="不合格",t="成分为1K107O的带材，宽度偏差超过0.3mm，不合格"]}if(["FN-035","FN-080","FN-100","FN-200","FCNC-010","FCNC-020"].includes(e.ribbonTypeName)){if(e.ribbonThickness>23)return[n="不合格",t="成分为FN-035/FN-080/FN-100/FN-200/FCNC-010/FCNC-020的直喷带材，厚度大于23μm，不合格"];if(e.laminationFactor<.78)return[n="不合格",t="成分为FN-035/FN-080/FN-100/FN-200/FCNC-010/FCNC-020的直喷带材，叠片＜0.78，不合格"];if(i)return[n="不合格",t="成分为FN-035/FN-080/FN-100/FN-200/FCNC-010/FCNC-020的直喷带材，韧性为D/E级别，不合格"]}return["",void 0,null].includes(e.ribbonThicknessLevel)||["",void 0,null].includes(e.laminationLevel)||["",void 0,null].includes(e.ribbonToughnessLevel)||["",void 0,null].includes(e.appearenceLevel)?"":(n=e.ribbonThicknessLevel+e.laminationLevel+e.ribbonToughnessLevel+e.appearenceLevel,e.ribbonThickness>24&&e.ribbonThickness<=25&&(n+="S"),e.ribbonThickness>23&&e.ribbonThickness<=24&&(n+="L"),e.ribbonThickness>21&&e.ribbonThickness<=22&&(n+="S"),e.ribbonThickness>20&&e.ribbonThickness<=21&&(n+="L"),e.ribbonThickness>18&&e.ribbonThickness<=19&&(n+="G"),e.ribbonThicknessDeviation>3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(n+="F"),e.ribbonWidth<50?Math.abs(r)>.2&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(r<-.2?n+="-E":r>.2&&(n+="+E")):e.ribbonWidth>=50&&Math.abs(r)>.5&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(r<-.5?n+="-E":r>.5&&(n+="+E")),["1K107BW","1K107B"].includes(e.ribbonTypeName)&&[20,25,30,40,50].includes(e.ribbonWidth)&&e.ribbonThickness>=28&&e.ribbonThickness<=32&&e.laminationFactor>=.75&&(n+="H"),["AD25","ND25","1K107A","FN-300"].includes(e.ribbonTypeName)&&e.laminationFactor>=.75&&(n+="H"),e.clients=[],["1K107B"].includes(e.ribbonTypeName)&&([30].includes(e.ribbonWidth)&&["A","B","C"].includes(e.ribbonToughnessLevel)&&["A","B"].includes(e.appearenceLevel)&&[2,3].includes(e.ribbonThicknessLevel)&&e.laminationFactor>=.78&&!n.includes("E")&&!n.includes("F")&&e.diameter>=330&&e.diameter<=350&&e.clients.push("D"),e.ribbonWidth<50&&["A","B","C"].includes(e.ribbonToughnessLevel)&&e.laminationFactor>=.78&&([2,3].includes(e.ribbonThicknessLevel)&&["A","B"].includes(e.appearenceLevel)||[4].includes(e.ribbonThicknessLevel)&&["A","B","C"].includes(e.appearenceLevel))&&e.clients.push("F"),e.ribbonWidth>=55&&["A","B","C","D"].includes(e.ribbonToughnessLevel)&&[2,3,4].includes(e.ribbonThicknessLevel)&&e.laminationFactor>=.75&&!n.includes("E")&&!n.includes("F")&&["A","B"].includes(e.appearenceLevel)&&e.clients.push("XW")),0===e.clients.length&&e.clients.push("GN"),[n,t])},calcThinRibbonWeight:function(e){if(!(e.ribbonThickness>23))return e.laminationFactor>=.78?e.highFactorThinRibbonWeight=e.coilNetWeight:void(e.laminationFactor>=.75&&(e.thinRibbonWeight=e.coilNetWeight))},calcQualityOfABCDE:function(e){var n=e.ribbonTotalLevel;/^[3-8][2-4][A-E][A-C]G?([+-]E)?F?$/.test(n)?e.qualityOfA=e.coilNetWeight:/^[3-8]1[A-E][A-C]G?([+-]E)?F?$/.test(n)?e.qualityOfB=e.coilNetWeight:/^[3-8]0[A-E][A-C]G?([+-]E)?F?$/.test(n)?e.qualityOfC=e.coilNetWeight:/^2[1-4][A-E][A-C]L?([+-]E)?F?$/.test(n)?e.qualityOfD=e.coilNetWeight:/^1[1-4][A-E][A-C]([+-]E)?F?$/.test(n)&&(e.qualityOfE=e.coilNetWeight)},calcLaminationFactor:function(e,n,t){var i=(e/(Math.PI*(n*n/4-9025/4)*7.2)*Math.pow(10,6)/t).toFixed(2)||0;return Number(i)},calcLaminationLevel:function(e){return e?e>=.84?"4":e>=.82&&e<.84?"3":e>=.8&&e<.82?"2":e>=.78&&e<.8?"1":e>=.75&&e<.78?"0":e>=.72&&e<.75?"8":e>=.68&&e<.72?"9":"不合格":""},calcMaxDeviation:function(e){e.sort(function(e,n){return e-n});var n=e.length;return Number((e[n-1]-e[0]).toFixed(2))},calcribbonThicknessLevel:function(e){if(e)return e>26?1:e>23&&e<=26?2:e>20&&e<=23?3:e>18&&e<=20?4:e>16&&e<=18?5:e>14&&e<=16?6:e>12&&e<=14?7:e<=12?8:void 0},setStoredType:function(e){var n=!0,t=e.ribbonThickness,i=e.orderThickness;if(i.indexOf("≤")>-1)t>parseInt(i.substr(1))&&(n=!1);else if(i.indexOf("-")>-1){var o=i.split("-")[1];(t<i.split("-")[0]||t>o)&&(n=!1)}var s=e.laminationFactor,a=e.orderLaminationFactor;if(a.indexOf("≥")>-1)s<parseInt(a.substr(1))&&(n=!1);else if(a.indexOf("-")>-1){var l=a.split("-")[1];(s<a.split("-")[0]||s>l)&&(n=!1)}var c=e.ribbonToughnessLevel;e.orderRibbonToughnessLevels.split(",").includes(c)||(n=!1);var u=e.appearenceLevel;if(e.orderAppearenceLevels.split(",").includes(u)||(n=!1),n)return 1;var b=JSON.parse(e.qualifiedDemands)||[],h=!0,d=!1,p=void 0;try{for(var m,f=r()(b);!(h=(m=f.next()).done);h=!0){var v=m.value,g=!0,T=v.qualifiedThickness;if(T.indexOf("≤")>-1)t>parseInt(T.substr(1))&&(g=!1);else if(T.indexOf("-")>-1){var k=T.split("-")[1];(t<T.split("-")[0]||t>k)&&(g=!1)}var _=v.qualifiedLaminationFactor;if(_.indexOf("≥")>-1)s<parseInt(_.substr(1))&&(g=!1);else if(_.indexOf("-")>-1){var L=_.split("-")[1];(s<_.split("-")[0]||s>L)&&(g=!1)}if(v.qualifiedRibbonToughnessLevels.includes(c)||(g=!1),v.qualifiedAppearenceLevels.includes(u)||(g=!1),g)return 2}}catch(e){d=!0,p=e}finally{try{!h&&f.return&&f.return()}finally{if(d)throw p}}return 3},exportExcel:function(){var e={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],startMeasureTime:this.searchForm.measureDate[0],endMeasureTime:this.searchForm.measureDate[1]};if(!e.startTime&&!e.startMeasureTime)return this.$message({message:"请选择生产日期或者检测日期",type:"error"});var n=y.a.exportMeasure+"?"+L.a.stringify(e);window.open(n)},setSelectable:function(e,n){return!(![1,2].includes(e.isStored)||e.isMeasureConfirmed)},handleSelectionChange:function(e){this.multipleSelection=e},measureConfirm:function(){var e=this,n=Object(w.cloneDeep)(this.multipleSelection);return 0===n.length?this.$alert("请选择要入库的带材","提示",{type:"warning"}):n.some(function(e){return!e.clients||0===e.clients.length})?this.$alert("申请入库的带材没有填写检测去向，请检查后再提交","提示",{type:"warning"}):(n.forEach(function(e){e.isMeasureConfirmed=1,e.clients=e.clients.join(),e.appearence=e.appearence.join()}),void this.$http("POST",y.a.measureConfirm,{dataJson:h()(n)}).then(function(n){e.getTableData()}).catch(function(e){console.log(e)}))}})},I={render:function(){var e=this,n=this,t=n.$createElement,i=n._self._c||t;return i("div",[i("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[n._v("检测记录")]),n._v(" "),i("el-breadcrumb-item",[n._v(n._s(n.castId)+"号机组")])],1),n._v(" "),i("Collapse",[i("el-form",{staticClass:"search_bar",attrs:{model:n.searchForm,inline:!0}},[i("el-form-item",{attrs:{label:"生产日期："}},[i("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:n.searchForm.date,callback:function(e){n.$set(n.searchForm,"date",e)},expression:"searchForm.date"}})],1),n._v(" "),i("el-form-item",{attrs:{label:"检测日期："}},[i("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:n.searchForm.measureDate,callback:function(e){n.$set(n.searchForm,"measureDate",e)},expression:"searchForm.measureDate"}})],1),n._v(" "),i("el-form-item",{attrs:{label:"喷带手："}},[i("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:n.searchForm.caster,callback:function(e){n.$set(n.searchForm,"caster",e)},expression:"searchForm.caster"}})],1),n._v(" "),i("el-form-item",{attrs:{label:"炉号："}},[i("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:n.searchForm.furnace,callback:function(e){n.$set(n.searchForm,"furnace",e)},expression:"searchForm.furnace"}})],1),n._v(" "),i("el-form-item",{attrs:{label:"材质："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:n.searchForm.ribbonTypeNames,callback:function(e){n.$set(n.searchForm,"ribbonTypeNames",e)},expression:"searchForm.ribbonTypeNames"}},n._l(n.ribbonTypeList,function(e){return i("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),n._v(" "),i("el-form-item",{attrs:{label:"规格："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:n.searchForm.ribbonWidths,callback:function(e){n.$set(n.searchForm,"ribbonWidths",e)},expression:"searchForm.ribbonWidths"}},n._l(n.ribbonWidthList,function(e){return i("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),n._v(" "),i("el-form-item",{attrs:{label:"厚度级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:n.searchForm.ribbonThicknessLevels,callback:function(e){n.$set(n.searchForm,"ribbonThicknessLevels",e)},expression:"searchForm.ribbonThicknessLevels"}},n._l(n.ribbonThicknessLevelList,function(e){return i("el-option",{key:e.ribbonThicknessLevelId,attrs:{label:e.ribbonThicknessLevel,value:e.ribbonThicknessLevel}})}),1)],1),n._v(" "),i("el-form-item",{attrs:{label:"叠片级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:n.searchForm.laminationLevels,callback:function(e){n.$set(n.searchForm,"laminationLevels",e)},expression:"searchForm.laminationLevels"}},n._l(n.laminationLevelList,function(e){return i("el-option",{key:e.laminationLevelId,attrs:{label:e.laminationLevel,value:e.laminationLevel}})}),1)],1),n._v(" "),i("el-form-item",{attrs:{label:"韧性级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:n.searchForm.ribbonToughnessLevels,callback:function(e){n.$set(n.searchForm,"ribbonToughnessLevels",e)},expression:"searchForm.ribbonToughnessLevels"}},n._l(n.ribbonToughnessLevelList,function(e){return i("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughnessLevel,value:e.ribbonToughnessLevel}})}),1)],1),n._v(" "),i("el-form-item",{attrs:{label:"外观级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:n.searchForm.appearenceLevels,callback:function(e){n.$set(n.searchForm,"appearenceLevels",e)},expression:"searchForm.appearenceLevels"}},n._l(n.uniqueAppearenceLevelList,function(e,n){return i("el-option",{key:n,attrs:{label:e,value:e}})}),1)],1),n._v(" "),i("el-form-item",{attrs:{label:"厚度偏差："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:n.searchForm.thicknessDivation,callback:function(e){n.$set(n.searchForm,"thicknessDivation",e)},expression:"searchForm.thicknessDivation"}},[i("el-option",{attrs:{label:"<=1",value:1}}),n._v(" "),i("el-option",{attrs:{label:"<=2",value:2}}),n._v(" "),i("el-option",{attrs:{label:"<=3",value:3}}),n._v(" "),i("el-option",{attrs:{label:"<=4",value:4}}),n._v(" "),i("el-option",{attrs:{label:"<=5",value:5}})],1)],1),n._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:n.clickSearch}},[n._v("搜索")]),n._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:n.reset}},[n._v("重置")])],1)],1)],1),n._v(" "),i("div",{staticClass:"main_bd"},[i("el-col",{staticClass:"table_hd"},[[1,2,3,5].includes(n.userinfo.roleId)?i("el-button",{attrs:{type:n.autoQueryConfig.type,icon:n.autoQueryConfig.icon},on:{click:n.handleAutoQuery}},[n._v(n._s(n.autoQueryConfig.text))]):n._e(),n._v(" "),i("el-tooltip",{attrs:{content:"点击后会计算下表中带材的综合级别",placement:"top-end"}},[[1,2,3,5].includes(n.userinfo.roleId)?i("el-button",{attrs:{type:"primary",icon:"el-icon-info"},on:{click:n.batchCalcRibbonTotalData}},[n._v("计算综合级别")]):n._e()],1),n._v(" "),i("el-tooltip",{attrs:{content:"请先选择筛选条件中的生产日期或者检测日期后再导出",placement:"top-end"}},[[1,2,3,5].includes(n.userinfo.roleId)?i("el-button",{staticClass:"pull_right",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:n.exportExcel}},[n._v("导出")]):n._e()],1),n._v(" "),[1,2,3,5].includes(n.userinfo.roleId)?i("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-check"},on:{click:n.measureConfirm}},[n._v("申请入库")]):n._e()],1),n._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:n.tableData,stripe:"",border:"","highlight-current-row":"",height:n.tableHeight},on:{"selection-change":n.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"20",selectable:n.setSelectable}}),n._v(" "),i("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"130px",fixed:""}}),n._v(" "),i("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"35px",fixed:""}}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center","min-width":"50px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"40px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"castDate",label:"生产日期",align:"center",formatter:n.dateFormat,width:"80px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"50px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"diameter",label:"外径(mm)",align:"center",width:"70px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"coilWeight",label:"重量(kg)",align:"center",width:"70px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"coilNetWeight",label:"净重(kg)",align:"center",width:"70px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"laminationFactor",label:"叠片系数",align:"center",width:"70px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"laminationLevel",label:"叠片等级",align:"center",width:"70px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"realRibbonWidth",label:"实际带宽",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.realRibbonWidth)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},model:{value:e.row.realRibbonWidth,callback:function(t){n.$set(e.row,"realRibbonWidth",t)},expression:"scope.row.realRibbonWidth"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness1",label:"带厚1(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness1)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness1,callback:function(t){n.$set(e.row,"ribbonThickness1",t)},expression:"scope.row.ribbonThickness1"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness2",label:"带厚2(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness2)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness2,callback:function(t){n.$set(e.row,"ribbonThickness2",t)},expression:"scope.row.ribbonThickness2"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness3",label:"带厚3(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness3)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness3,callback:function(t){n.$set(e.row,"ribbonThickness3",t)},expression:"scope.row.ribbonThickness3"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness4",label:"带厚4(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness4)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness4,callback:function(t){n.$set(e.row,"ribbonThickness4",t)},expression:"scope.row.ribbonThickness4"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness5",label:"带厚5(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness5)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness5,callback:function(t){n.$set(e.row,"ribbonThickness5",t)},expression:"scope.row.ribbonThickness5"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness6",label:"带厚6(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness6)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness6,callback:function(t){n.$set(e.row,"ribbonThickness6",t)},expression:"scope.row.ribbonThickness6"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness7",label:"带厚7(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness7)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness7,callback:function(t){n.$set(e.row,"ribbonThickness7",t)},expression:"scope.row.ribbonThickness7"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness8",label:"带厚8(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness8)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness8,callback:function(t){n.$set(e.row,"ribbonThickness8",t)},expression:"scope.row.ribbonThickness8"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness9",label:"带厚9(μm)",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonThickness9)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return function(t){return n.thicknessChangeHandler(t,e.row)}(t)}},model:{value:e.row.ribbonThickness9,callback:function(t){n.$set(e.row,"ribbonThickness9",t)},expression:"scope.row.ribbonThickness9"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThicknessDeviation",label:"厚度偏差(μm)",align:"center",width:"90px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness",label:"平均厚度(μm)",align:"center",width:"90px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"厚度级别",align:"center",width:"70px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonToughness",label:"韧性",align:"center",width:"70px"}}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonToughnessLevel",label:"韧性等级",align:"center",width:"60px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.ribbonToughnessLevel)+"\n          ")]):i("div",[i("el-select",{attrs:{size:"mini",placeholder:""},model:{value:e.row.ribbonToughnessLevel,callback:function(t){n.$set(e.row,"ribbonToughnessLevel",t)},expression:"scope.row.ribbonToughnessLevel"}},n._l(n.ribbonToughnessLevelList,function(e){return i("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughnessLevel,value:e.ribbonToughnessLevel}})}),1)],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"appearence",label:"外观",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.appearence?e.row.appearence.toString():"")+"\n          ")]):i("div",[i("el-select",{attrs:{size:"mini",multiple:"","collapse-tags":"",placeholder:""},model:{value:e.row.appearence,callback:function(t){n.$set(e.row,"appearence",t)},expression:"scope.row.appearence"}},n._l(n.appearenceList,function(e){return i("el-option",{key:e.appearenceLevelId,attrs:{label:e.appearence,value:e.appearence}})}),1)],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"appearenceLevel",label:"外观等级",align:"center",width:"60px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.appearenceLevel)+"\n          ")]):i("div",[i("el-select",{attrs:{size:"mini",placeholder:""},model:{value:e.row.appearenceLevel,callback:function(t){n.$set(e.row,"appearenceLevel",t)},expression:"scope.row.appearenceLevel"}},n._l(n.uniqueAppearenceLevelList,function(e,n){return i("el-option",{key:n,attrs:{label:e,value:e}})}),1)],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"ribbonTotalLevel",label:"综合级别",align:"center",width:"70px"},scopedSlots:n._u([{key:"default",fn:function(e){return[i("span",{class:"不合格"===e.row.ribbonTotalLevel?"text_danger":""},[n._v(n._s(e.row.ribbonTotalLevel))])]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"unQualifiedReason",label:"不合格原因",align:"center",width:"70px","show-overflow-tooltip":!0}}),n._v(" "),i("el-table-column",{attrs:{label:"入库规则",align:"center",width:"60px"},scopedSlots:n._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{placement:"right",trigger:"hover"}},[i("table",{staticClass:"popover_table",attrs:{cellpadding:"0",cellspacing:"0"}},[i("thead",[i("th",[n._v("类别")]),n._v(" "),i("th",[n._v("带厚")]),n._v(" "),i("th",[n._v("叠片")]),n._v(" "),i("th",[n._v("韧性")]),n._v(" "),i("th",[n._v("外观")])]),n._v(" "),i("tbody",[i("tr",[i("td",[n._v("计划内入库要求")]),n._v(" "),i("td",[n._v(n._s(e.row.storageRule.orderThickness))]),n._v(" "),i("td",[n._v(n._s(e.row.storageRule.orderLaminationFactor))]),n._v(" "),i("td",[n._v("\n                    "+n._s(e.row.storageRule.orderRibbonToughnessLevels)+"\n                  ")]),n._v(" "),i("td",[n._v(n._s(e.row.storageRule.orderAppearenceLevels))])]),n._v(" "),n._l(e.row.storageRule.qualifiedDemands,function(e,t){return i("tr",{key:t},[i("td",[n._v("计划外入库要求")]),n._v(" "),i("td",[n._v(n._s(e.qualifiedThickness))]),n._v(" "),i("td",[n._v(n._s(e.qualifiedLaminationFactor))]),n._v(" "),i("td",[n._v(n._s(e.qualifiedRibbonToughnessLevels.join()))]),n._v(" "),i("td",[n._v(n._s(e.qualifiedAppearenceLevels.join()))])])})],2)]),n._v(" "),i("el-button",{attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[n._v("详情")])],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"isStorageConfirmed",label:"是否入库",align:"center",width:"60px"},scopedSlots:n._u([{key:"default",fn:function(e){return[i("div",[1===e.row.isStorageConfirmed?i("span",[n._v("是")]):i("span",{staticClass:"text_danger"},[n._v("否")])])]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"isStored",label:"入库类别",align:"center",width:"60px"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isStorageConfirmed?i("div",[1===e.row.isStored?i("span",[n._v("计划内")]):n._e(),n._v(" "),2===e.row.isStored?i("span",[n._v("计划外")]):n._e(),n._v(" "),3===e.row.isStored?i("span",{staticClass:"text_danger"},[n._v("否")]):n._e()]):n._e()]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"unStoreReason",label:"不入库原因",align:"center","min-width":"70px","show-overflow-tooltip":!0},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",{staticClass:"text_danger"},[n._v("\n            "+n._s(e.row.unStoreReason)+"\n          ")]):i("div",[i("el-input",{attrs:{size:"mini"},model:{value:e.row.unStoreReason,callback:function(t){n.$set(e.row,"unStoreReason",t)},expression:"scope.row.unStoreReason"}})],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"clients",label:"判定去向",align:"center",width:"80px","show-overflow-tooltip":!0},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.isMeasureConfirmed||5!=n.userinfo.roleId?i("div",[n._v("\n            "+n._s(e.row.clients?e.row.clients.toString():"")+"\n          ")]):i("div",[i("el-select",{attrs:{size:"mini",placeholder:"",multiple:"","collapse-tags":""},model:{value:e.row.clients,callback:function(t){n.$set(e.row,"clients",t)},expression:"scope.row.clients"}},n._l(n.clientsList,function(n){return i("el-option",{key:n.clientsId,attrs:{label:n.client,value:n.client,disabled:0===n.isFlat&&1===e.row.isFlat}})}),1)],1)]}}])}),n._v(" "),i("el-table-column",{attrs:{prop:"measureDate",label:"检测时间",align:"center",width:"100px",formatter:n.dateTimeFormat,"show-overflow-tooltip":!0}}),n._v(" "),5==n.userinfo.roleId||1==n.userinfo.roleId?i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[1!==e.row.isMeasureConfirmed?i("el-button",{attrs:{size:"mini",type:"success",disabled:!n.isEditable},on:{click:function(t){return n.save(e.row)}}},[n._v("保存")]):n._e()]}}],null,!1,2588052046)}):n._e()],1),n._v(" "),i("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:n.pageConfig.total,"current-page":n.pageConfig.current,"page-size":n.pageConfig.pageSize},on:{"update:currentPage":function(e){return n.$set(n.pageConfig,"current",e)},"update:current-page":function(e){return n.$set(n.pageConfig,"current",e)},"current-change":n.handleCurrentChange}}),n._v(" "),n.applyInStoreModalVisible?i("ApplyInStoreModal",{attrs:{castId:Number(n.castId),visible:n.applyInStoreModalVisible},on:{close:function(){return e.applyInStoreModalVisible=!1},submit:function(){return e.applyInStoreModalVisible=!1}}}):n._e()],1)],1)},staticRenderFns:[]};var E=t("VU/8")(W,I,!1,function(e){t("Vdzl")},"data-v-2fb085be",null);n.default=E.exports},BO1k:function(e,n,t){e.exports={default:t("fxRn"),__esModule:!0}},Cdx3:function(e,n,t){var i=t("sB3e"),r=t("lktj");t("uqUo")("keys",function(){return function(e){return r(i(e))}})},TZdb:function(e,n){},Vdzl:function(e,n){},Xd32:function(e,n,t){t("+tPU"),t("zQR9"),e.exports=t("5PlU")},d7EF:function(e,n,t){"use strict";n.__esModule=!0;var i=o(t("us/S")),r=o(t("BO1k"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=function(){return function(e,n){if(Array.isArray(e))return e;if((0,i.default)(Object(e)))return function(e,n){var t=[],i=!0,o=!1,s=void 0;try{for(var a,l=(0,r.default)(e);!(i=(a=l.next()).done)&&(t.push(a.value),!n||t.length!==n);i=!0);}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},fZjL:function(e,n,t){e.exports={default:t("jFbC"),__esModule:!0}},fxRn:function(e,n,t){t("+tPU"),t("zQR9"),e.exports=t("g8Ux")},g8Ux:function(e,n,t){var i=t("77Pl"),r=t("3fs2");e.exports=t("FeBl").getIterator=function(e){var n=r(e);if("function"!=typeof n)throw TypeError(e+" is not iterable!");return i(n.call(e))}},jFbC:function(e,n,t){t("Cdx3"),e.exports=t("FeBl").Object.keys},uqUo:function(e,n,t){var i=t("kM2E"),r=t("FeBl"),o=t("S82l");e.exports=function(e,n){var t=(r.Object||{})[e]||Object[e],s={};s[e]=n(t),i(i.S+i.F*o(function(){t(1)}),"Object",s)}},"us/S":function(e,n,t){e.exports={default:t("Xd32"),__esModule:!0}}});
//# sourceMappingURL=measure.ddb375cea9b313531fd0.js.map