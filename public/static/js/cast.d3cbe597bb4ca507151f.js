webpackJsonp([15],{JtX0:function(e,t){},xhBu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),r=a.n(l),i=a("mvHQ"),s=a.n(i),o=a("Dd8w"),n=a.n(o),c=a("g7mi"),u=a("X2Oc"),m=a("E4LH"),d=a("NYxO"),p=a("M4fF"),b={nozzleSize:"",nozzleNum:1,heatCupNum:1,treatCoolRoller:"",coolRollerThickness:null,ReceiveMeltTime:"",tundishTemperatureWithoutMelt:null,tundishTemperatureWithMelt:null,installNozzleTime:"",castTimeStart:"",pressure:null,tundishTemperatureCasting:null,coolRollerTemperatureBeforeCast:"",coolRollerTemperatureAfterCast:"",castLocation:"",coilTimes:null,castTimeEnd:"",describe:""},g={castTimes:1,castId:6,team:"",furnace:"",caster:"",ribbonWidth:null,ribbonTypeId:"",ribbonTypeName:"",nozzleNum:1,heatCupNum:0,tundishCar:"",tundish:"",isChangeTundish:"",meltOutWeight:0,rawWeight:null,remark:"",createdAt:"",updatedAt:"",uselessRibbonWeight:null,record:[b]},h={data:function(){return{userinfo:{},visible:!1,loading:!1,formData:{castTimes:1,castId:6,team:"",furnace:"",caster:"",ribbonWidth:null,ribbonTypeId:"",ribbonTypeName:"",nozzleNum:1,heatCupNum:1,tundishCar:"",tundish:"",isChangeTundish:"",meltOutWeight:0,rawWeight:null,remark:"",createdAt:"",updatedAt:"",uselessRibbonWeight:null,record:[{nozzleSize:"",nozzleNum:1,heatCupNum:1,treatCoolRoller:"",coolRollerThickness:null,ReceiveMeltTime:"",tundishTemperatureWithoutMelt:null,tundishTemperatureWithMelt:null,installNozzleTime:"",castTimeStart:"",pressure:null,tundishTemperatureCasting:null,coolRollerTemperatureBeforeCast:"",coolRollerTemperatureAfterCast:"",castLocation:"",coilTimes:null,castTimeEnd:"",describe:""}]},rules:{ribbonTypeName:[{required:!0,message:"请选择材质",trigger:"blur"}],ribbonWidth:[{required:!0,message:"请填写带宽",trigger:"blur"},{validator:m.f,trigger:"blur"},{validator:Object(m.d)(99999),trigger:"blur"}],furnace:[{required:!0,message:"请填写炉号",trigger:"blur"},{max:20,message:"最多20位字符",trigger:"blur"},{validator:m.a,trigger:"blur"}],caster:[{required:!0,message:"请填写熔炼人姓名",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}],tundish:[{required:!0,message:"请填写在线包号",trigger:"blur"},{validator:m.e,trigger:"blur"},{validator:Object(m.d)(99999),trigger:"blur"}],tundishCar:[{required:!0,message:"请选择包车编号",trigger:"blur"}],isChangeTundish:[{required:!0,message:"请选择是否换包",trigger:"blur"}],nozzleNum:[{required:!0,message:"请填写喷嘴杯个数",trigger:"blur"},{validator:m.e,trigger:"blur"},{validator:Object(m.d)(99999),trigger:"blur"}],heatCupNum:[{required:!0,message:"请填写加热杯个数",trigger:"blur"},{validator:m.e,trigger:"blur"},{validator:Object(m.d)(99999),trigger:"blur"}],meltOutWeight:[{required:!0,message:"请填写放钢重量",trigger:"blur"},{validator:m.e,trigger:"blur"},{validator:Object(m.d)(500),trigger:"blur"}],rawWeight:[{required:!0,message:"请填写大盘毛重",trigger:"blur"},{validator:m.e,trigger:"blur"},{validator:Object(m.d)(500),trigger:"blur"}],remark:[{max:50,message:"最多50位字符",trigger:"blur"}],castTimes:[{required:!0,message:"请选择开包次数",trigger:"blur"}],uselessRibbonWeight:[{required:!0,message:"请填写废带重量",trigger:"blur"},{validator:m.e,trigger:"blur"},{validator:Object(m.d)(500),trigger:"blur"}],team:[{required:!0,message:"请选择所在班组",trigger:"blur"}]}}},props:{dialogData:{type:Object,required:!0}},created:function(){if(this.userinfo=JSON.parse(localStorage.getItem("userinfo")),"add"===this.dialogData.formType){var e=Object(p.cloneDeep)(g);this.formData=r()({},e,{castId:Number(this.$route.params.castId),caster:this.userinfo.adminname})}else this.formData=r()(this.formData,this.dialogData.rowData),this.formData.castTimes=this.formData.record.length},mounted:function(){},methods:{closeDialog:function(){this.$emit("close")},castTimesChangeHandler:function(e){this.formData.nozzleNum=e;var t=this.formData.record.length;if(e>t)for(var a=0;a<e-t;a++){var l=Object(p.cloneDeep)(b);this.formData.record.push(l)}else if(e<t)for(var r=0;r<t-e;r++)this.formData.record.pop()},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,e.formData.recordJson=s()(e.formData.record),e.formData.roleId=e.userinfo.roleId,e.formData.adminname=e.userinfo.adminname;var a="add"===e.dialogData.formType?{method:"POST",url:c.a.addCast}:{method:"PUT",url:c.a.updateCast},l=a.method,r=a.url;e.$http(l,r,e.formData).then(function(t){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"add"===e.dialogData.formType?"新增喷带记录-"+e.$route.params.castId+"号机组":"修改喷带记录-"+e.$route.params.castId+"号机组",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"1200px","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.dialogData,"dialogVisible",t)},close:e.closeDialog}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"材质",prop:"ribbonTypeName"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.ribbonTypeName,callback:function(t){e.$set(e.formData,"ribbonTypeName",t)},expression:"formData.ribbonTypeName"}},e._l(e.dialogData.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"规格",prop:"ribbonWidth"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.ribbonWidth,callback:function(t){e.$set(e.formData,"ribbonWidth",t)},expression:"formData.ribbonWidth"}},e._l(e.dialogData.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"制带炉号",prop:"furnace"}},[a("el-input",{model:{value:e.formData.furnace,callback:function(t){e.$set(e.formData,"furnace",t)},expression:"formData.furnace"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带手:",prop:"caster"}},[a("span",[e._v(e._s(e.formData.caster))])])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"在线包号",prop:"tundish"}},[a("el-input",{attrs:{placeholder:"请输入包体编号数字"},model:{value:e.formData.tundish,callback:function(t){e.$set(e.formData,"tundish",t)},expression:"formData.tundish"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"包车编号",prop:"tundishCar"}},[a("el-select",{model:{value:e.formData.tundishCar,callback:function(t){e.$set(e.formData,"tundishCar",t)},expression:"formData.tundishCar"}},[a("el-option",{attrs:{label:"#1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"#2",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"是否换包",prop:"isChangeTundish"}},[a("el-select",{model:{value:e.formData.isChangeTundish,callback:function(t){e.$set(e.formData,"isChangeTundish",t)},expression:"formData.isChangeTundish"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷嘴杯个数:",prop:"nozzleNum"}},[a("span",[e._v(e._s(e.formData.nozzleNum))])])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"加热杯个数",prop:"heatCupNum"}},[a("el-input",{model:{value:e.formData.heatCupNum,callback:function(t){e.$set(e.formData,"heatCupNum",t)},expression:"formData.heatCupNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"放钢重量",prop:"meltOutWeight"}},[a("el-input",{model:{value:e.formData.meltOutWeight,callback:function(t){e.$set(e.formData,"meltOutWeight",t)},expression:"formData.meltOutWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"大盘毛重",prop:"rawWeight"}},[a("el-input",{model:{value:e.formData.rawWeight,callback:function(t){e.$set(e.formData,"rawWeight",t)},expression:"formData.rawWeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"废带重量",prop:"uselessRibbonWeight"}},[a("el-input",{model:{value:e.formData.uselessRibbonWeight,callback:function(t){e.$set(e.formData,"uselessRibbonWeight",t)},expression:"formData.uselessRibbonWeight"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所在班组",prop:"team"}},[a("el-select",{model:{value:e.formData.team,callback:function(t){e.$set(e.formData,"team",t)},expression:"formData.team"}},[a("el-option",{attrs:{label:e.formData.castId+"#-甲",value:e.formData.castId+"#-甲"}}),e._v(" "),a("el-option",{attrs:{label:e.formData.castId+"#-乙",value:e.formData.castId+"#-乙"}}),e._v(" "),a("el-option",{attrs:{label:e.formData.castId+"#-丙",value:e.formData.castId+"#-丙"}}),e._v(" "),a("el-option",{attrs:{label:e.formData.castId+"#-丁",value:e.formData.castId+"#-丁"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开包次数",prop:"castTimes"}},[a("el-select",{on:{change:e.castTimesChangeHandler},model:{value:e.formData.castTimes,callback:function(t){e.$set(e.formData,"castTimes",t)},expression:"formData.castTimes"}},[a("el-option",{attrs:{label:"0",value:0}}),e._v(" "),a("el-option",{attrs:{label:"1",value:1}}),e._v(" "),a("el-option",{attrs:{label:"2",value:2}}),e._v(" "),a("el-option",{attrs:{label:"3",value:3}}),e._v(" "),a("el-option",{attrs:{label:"4",value:4}}),e._v(" "),a("el-option",{attrs:{label:"5",value:5}}),e._v(" "),a("el-option",{attrs:{label:"6",value:6}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),e._l(e.formData.record,function(t,l){return a("section",{key:l,staticClass:"cast_detail"},[a("h3",{staticClass:"cast_hd"},[e._v("第"+e._s(l+1)+"次开包")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷嘴规格",prop:"record."+l+".nozzleSize",rules:[{required:!0,message:"请填写喷嘴规格，格式 30*0.25",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：30*0.25"},model:{value:t.nozzleSize,callback:function(a){e.$set(t,"nozzleSize",a)},expression:"item.nozzleSize"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"车修铜辊",prop:"record."+l+".treatCoolRoller",rules:[{required:!0,message:"请选择车修方式",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.treatCoolRoller,callback:function(a){e.$set(t,"treatCoolRoller",a)},expression:"item.treatCoolRoller"}},[a("el-option",{attrs:{label:"车",value:"车"}}),e._v(" "),a("el-option",{attrs:{label:"修",value:"修"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"铜套厚度",prop:"record."+l+".coolRollerThickness",rules:[{required:!0,message:"请填写铜套厚度，单位 mm",trigger:"blur"},{pattern:/^(0|[1-9]\d{0,8})$/,message:"请输入9位以内自然数, 如 0,1,2,3,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.coolRollerThickness,callback:function(a){e.$set(t,"coolRollerThickness",a)},expression:"item.coolRollerThickness"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"接钢时间",prop:"record."+l+".ReceiveMeltTime",rules:[{required:!0,message:"请填写接钢时间，格式 08:30",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：08:30"},model:{value:t.ReceiveMeltTime,callback:function(a){e.$set(t,"ReceiveMeltTime",a)},expression:"item.ReceiveMeltTime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"接钢前包温",prop:"record."+l+".tundishTemperatureWithoutMelt",rules:[{required:!0,message:"请填写接钢前包温",trigger:"blur"},{pattern:/^[1-9\/]\d{0,8}$/,message:"请输入9位以内正整数, 如 1350,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.tundishTemperatureWithoutMelt,callback:function(a){e.$set(t,"tundishTemperatureWithoutMelt",a)},expression:"item.tundishTemperatureWithoutMelt"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"接钢后包温",prop:"record."+l+".tundishTemperatureWithMelt",rules:[{required:!0,message:"请填写接钢后包温",trigger:"blur"},{pattern:/^[1-9\/]\d{0,8}$/,message:"请输入9位以内正整数, 如 1350,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.tundishTemperatureWithMelt,callback:function(a){e.$set(t,"tundishTemperatureWithMelt",a)},expression:"item.tundishTemperatureWithMelt"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"装杯时间",prop:"record."+l+".installNozzleTime",rules:[{required:!0,message:"请填写装杯时间，格式 08:40",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：08:40"},model:{value:t.installNozzleTime,callback:function(a){e.$set(t,"installNozzleTime",a)},expression:"item.installNozzleTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"开包时间",prop:"record."+l+".castTimeStart",rules:[{required:!0,message:"请填写开包时间，格式 08:40",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：09:20"},model:{value:t.castTimeStart,callback:function(a){e.$set(t,"castTimeStart",a)},expression:"item.castTimeStart"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"开包压力",prop:"record."+l+".pressure",rules:[{required:!0,message:"请填写开包压力",trigger:"blur"},{pattern:/^[1-9]\d{0,8}$/,message:"请输入9位以内正整数, 如 18,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.pressure,callback:function(a){e.$set(t,"pressure",a)},expression:"item.pressure"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"开包温度",prop:"record."+l+".tundishTemperatureCasting",rules:[{required:!0,message:"请填写开包温度",trigger:"blur"},{pattern:/^[1-9]\d{0,8}$/,message:"请输入9位以内正整数, 如 1350,...",trigger:"blur"}]}},[a("el-input",{model:{value:t.tundishTemperatureCasting,callback:function(a){e.$set(t,"tundishTemperatureCasting",a)},expression:"item.tundishTemperatureCasting"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带前水温",prop:"record."+l+".coolRollerTemperatureBeforeCast",rules:[{required:!0,message:"请填写水温",trigger:"blur"},{pattern:/^(\d+|\d+\.\d{1,2})-(\d+|\d+\.\d{1,2})$/,message:"格式错误, 如 32.50-32.50",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：32-32"},model:{value:t.coolRollerTemperatureBeforeCast,callback:function(a){e.$set(t,"coolRollerTemperatureBeforeCast",a)},expression:"item.coolRollerTemperatureBeforeCast"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带后水温",prop:"record."+l+".coolRollerTemperatureAfterCast",rules:[{required:!0,message:"请填写水温",trigger:"blur"},{pattern:/^(\d+|\d+\.\d{1,2})-(\d+|\d+\.\d{1,2})$/,message:"格式错误, 如 32.50-33.80",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：32-35"},model:{value:t.coolRollerTemperatureAfterCast,callback:function(a){e.$set(t,"coolRollerTemperatureAfterCast",a)},expression:"item.coolRollerTemperatureAfterCast"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"喷带位置",prop:"record."+l+".castLocation",rules:[{required:!0,message:"请选择喷带位置",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:""},model:{value:t.castLocation,callback:function(a){e.$set(t,"castLocation",a)},expression:"item.castLocation"}},[a("el-option",{attrs:{label:"左",value:"左"}}),e._v(" "),a("el-option",{attrs:{label:"中",value:"中"}}),e._v(" "),a("el-option",{attrs:{label:"右",value:"右"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"抓取次数",prop:"record."+l+".coilTimes",rules:[{required:!0,message:"请填写抓取次数",trigger:"blur"}]}},[a("el-select",{model:{value:t.coilTimes,callback:function(a){e.$set(t,"coilTimes",a)},expression:"item.coilTimes"}},[a("el-option",{attrs:{label:"0",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:">3",value:">3"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"完成时间",prop:"record."+l+".castTimeEnd",rules:[{required:!0,message:"请填写完成时间，格式 08:40",trigger:"blur"},{max:10,message:"最多10位字符",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"格式：10:30"},model:{value:t.castTimeEnd,callback:function(a){e.$set(t,"castTimeEnd",a)},expression:"item.castTimeEnd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"dialog_field",attrs:{label:"结果描述",prop:"record."+l+".describe",rules:[{required:!0,message:"请填写结果描述",trigger:"blur"},{max:100,message:"最多100位字符",trigger:"blur"}]}},[a("el-input",{model:{value:t.describe,callback:function(a){e.$set(t,"describe",a)},expression:"item.describe"}})],1)],1)],1)],1)})],2),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var v={name:"cast",components:{dialogForm:a("VU/8")(h,f,!1,function(e){a("JtX0")},"data-v-66f90dd3",null).exports,Collapse:a("IC2r").a},data:function(){return{userinfo:{},castId:6,searchForm:{caster:"",team:"",furnace:"",ribbonTypeName:"",date:[],ribbonWidths:[]},loading:!1,tableData:[],dialogVisible:!1,formType:"create",rowData:{},pageConfig:{total:1,current:1,pageSize:10},isAddAble:!1,isDelAble:!1,tableHeight:500}},computed:n()({},Object(d.c)(["ribbonTypeList","ribbonWidthList"])),beforeRouteUpdate:function(e,t,a){this.castId=e.params.castId,this.getTableData(),this.isAddAble=this.setIsAddAble(),this.isDelAble=this.setIsDelAble(),a()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isAddAble=this.setIsAddAble(),this.isDelAble=this.setIsDelAble(),this.getTableData(),this.getRibbonTypeList(),this.getRibbonWidthList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-100}),window.onresize=Object(u.c)(function(){e.tableHeight=window.innerHeight-100},1e3)},methods:n()({},Object(d.b)(["getRibbonTypeList","getRibbonWidthList"]),{dateFormat:function(e,t){return Object(u.a)(e.createTime)},dateTimeFormat:function(e,t){return Object(u.b)(e.updatedAt)},setIsAddAble:function(){return 7==this.userinfo.roleId||9==this.userinfo.roleId||11==this.userinfo.roleId||13==this.userinfo.roleId},setIsDelAble:function(){if(1===this.userinfo.roleId&&3===this.userinfo.roleId)return!0},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",team:"",furnace:"",ribbonTypeName:"",date:[],ribbonWidths:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={castId:this.castId,team:this.searchForm.team,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeName:this.searchForm.ribbonTypeName,ribbonWidthJson:s()(this.searchForm.ribbonWidths)};r()(t,a),this.$http("get",c.a.queryCast,t).then(function(t){e.pageConfig.total=t.count,e.pageConfig.pageSize=t.limit,t.list.forEach(function(e){e.record=JSON.parse(e.record)}),e.tableData=t.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},add:function(){this.dialogVisible=!0,this.formType="add"},edit:function(e){this.rowData=e,this.dialogVisible=!0,this.formType="edit"},del:function(e){var t=this,a=e._id,l=e.furnace;this.$confirm("删除后数据无法恢复，确定删除 "+l+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http("delete",c.a.delCast,{_id:a}).then(function(e){t.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){"edit"===this.formType&&(this.dialogVisible=!1),this.pageConfig.current=1,this.getTableData()},handleCurrentChange:function(e){var t={current:e};this.getTableData(t)}})},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("喷带记录")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),a("Collapse",[a("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"喷带日期："}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(t){e.$set(e.searchForm,"date",t)},expression:"searchForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班组："}},[a("el-select",{attrs:{placeholder:"请选择班组"},model:{value:e.searchForm.team,callback:function(t){e.$set(e.searchForm,"team",t)},expression:"searchForm.team"}},[a("el-option",{attrs:{label:e.castId+"#-甲",value:e.castId+"#-甲"}}),e._v(" "),a("el-option",{attrs:{label:e.castId+"#-乙",value:e.castId+"#-乙"}}),e._v(" "),a("el-option",{attrs:{label:e.castId+"#-丙",value:e.castId+"#-丙"}}),e._v(" "),a("el-option",{attrs:{label:e.castId+"#-丁",value:e.castId+"#-丁"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"喷带手："}},[a("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:e.searchForm.caster,callback:function(t){e.$set(e.searchForm,"caster",t)},expression:"searchForm.caster"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"炉号："}},[a("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(t){e.$set(e.searchForm,"furnace",t)},expression:"searchForm.furnace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"材质："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.ribbonTypeName,callback:function(t){e.$set(e.searchForm,"ribbonTypeName",t)},expression:"searchForm.ribbonTypeName"}},e._l(e.ribbonTypeList,function(e){return a("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规格："}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(t){e.$set(e.searchForm,"ribbonWidths",t)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return a("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"main_bd"},[a("el-col",{staticClass:"table_hd"},[e.isAddAble?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.add}},[e._v("创建喷带记录")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight}},[a("el-table-column",{attrs:{type:"expand",label:"展开",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.record,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"开包",type:"index",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nozzleSize",label:"喷嘴规格",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"treatCoolRoller",label:"车修铜辊",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coolRollerThickness",label:"铜套厚度",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceiveMeltTime",label:"接钢时间",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishTemperatureWithoutMelt",label:"接钢前包温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishTemperatureWithMelt",label:"接钢后包温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"installNozzleTime",label:"装杯时间",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castTimeStart",label:"开包时间",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pressure",label:"开包压力",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishTemperatureCasting",label:"开包温度/℃",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coolRollerTemperatureBeforeCast",label:"喷带前水温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coolRollerTemperatureAfterCast",label:"喷带后水温/℃",align:"center",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castLocation",label:"喷带位置",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coilTimes",label:"抓取次数",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castTimeEnd",label:"喷带完成时间",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"喷带结果描述",align:"center",width:"110px","show-overflow-tooltip":!0}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"喷带日期",align:"center",width:"110px",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"170px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"team",label:"班组",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"castTimes",label:"开包次数",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.castTimes>1?"text_danger":""},[e._v(e._s(t.row.castTimes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tundish",label:"在线包号",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tundishCar",label:"包车编号",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isChangeTundish",label:"是否换包",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isChangeTundish?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nozzleNum",label:"喷嘴杯个数",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"heatCupNum",label:"加热杯个数",align:"center",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"meltOutWeight",label:"放钢重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rawWeight",label:"大盘毛重(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uselessRibbonWeight",label:"废带重量(kg)",align:"center",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatedAt",label:"更新时间",align:"center",width:"170px",formatter:e.dateTimeFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatePerson",label:"更新者",align:"center",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",disabled:1!==e.userinfo.roleId&&3!==e.userinfo.roleId&&e.userinfo.adminname!==t.row.caster},on:{click:function(a){e.edit(t.row)}}},[e._v("修改")]),e._v(" "),1===e.userinfo.roleId||3===e.userinfo.roleId?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(t){e.$set(e.pageConfig,"current",t)},"current-change":e.handleCurrentChange}})],1),e._v(" "),e.dialogVisible?a("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData,ribbonTypeList:e.ribbonTypeList,ribbonWidthList:e.ribbonWidthList}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]},T=a("VU/8")(v,_,!1,null,null,null);t.default=T.exports}});
//# sourceMappingURL=cast.d3cbe597bb4ca507151f.js.map