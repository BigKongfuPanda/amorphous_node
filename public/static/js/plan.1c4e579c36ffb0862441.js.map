{"version":3,"sources":["webpack:///src/pages/plan/components/dialogForm.vue","webpack:///./src/pages/plan/components/dialogForm.vue?35fe","webpack:///./src/pages/plan/components/dialogForm.vue","webpack:///src/pages/plan/components/excelForm.vue","webpack:///./src/pages/plan/components/excelForm.vue?27e8","webpack:///src/pages/plan/plan.vue","webpack:///./src/pages/plan/components/excelForm.vue","webpack:///./src/pages/plan/plan.vue?8e30","webpack:///./src/pages/plan/plan.vue"],"names":["formConfig","date","castId","team","taskOrder","ribbonTypeName","ribbonWidth","client","furnace","theBeginfurnace","heatNum","alloyWeight","castTime","rawWeight","remark","fileNumber","orderThickness","orderLaminationFactor","orderRibbonToughnessLevels","orderAppearenceLevels","qualifiedDemands","qualifiedThickness","qualifiedLaminationFactor","qualifiedRibbonToughnessLevels","qualifiedAppearenceLevels","dialogForm","props","dialogData","type","Object","required","data","checkFurnance","rule","value","callback","Error","test","roleId","visible","loading","formData","rules","message","trigger","validator","validate","max","pattern","computed","extends_default","vuex_esm","created","this","formType","assign_default","Number","$route","params","rowData","JSON","parse","localStorage","getItem","getRibbonTypeList","getRibbonWidthList","getRibbonToughnessLevelList","methods","pick","replace","closeDialog","$emit","addRequirement","length","push","delRequirement","pop","submitForm","_this","$refs","form","valid","method","url","urlmap","addPlan","_heatNum","fHead","substring","fEnd","clone","lodash","setCastTime","join","stringify_default","formDataJson","updatePlan","_clone","$http","then","catch","err","console","log","finally","time","components_dialogForm","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","expression","attrs","title","dialogVisible","close-on-click-modal","close-on-press-escape","center","width","element-loading-text","on","update:visible","$event","$set","close","ref","model","label-width","nativeOn","submit","preventDefault","gutter","span","staticClass","label","prop","value-format","placeholder","editable","clearable","change","$$v","_v","_l","item","key","ribbonTypeId","ribbonWidthId","_e","multiple","collapse-tags","ribbonToughnessLevelId","ribbonToughnessLevel","click","index","slot","staticRenderFns","plan_components_dialogForm","__webpack_require__","normalizeComponent","ssrContext","excelForm","exportData","startTime","endTime","exportPlan","lib_default","a","stringify","window","open","components_excelForm","exportVisible","default-time","start-placeholder","end-placeholder","plan","components","excelForm_normalizeComponent","searchForm","common","Date","isApproved","isExportable","tableData","beforeRouteUpdate","to","from","next","getTableData","setExportable","pickerOptions","self","disabledDate","setDate","getDate","includes","getTime","closeHandler","submitHandler","clickSearch","queryPlan","_list","list","forEach","row","split","every","approved","createPlan","editPlan","delPlan","_this2","planId","$confirm","confirmButtonText","cancelButtonText","approve","_this3","plan_plan","separator-class","_s","inline","picker-options","icon","disabled","staticStyle","stripe","border","highlight-current-row","align","scopedSlots","_u","fn","scope","toString","class","text_danger","realRibbonWidth","size","undefined","closeExport","submitExport","plan_Component","plan_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/plan.1c4e579c36ffb0862441.js","sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"\r\n      dialogData.formType === 'create'\r\n        ? `新增生产计划-${$route.params.castId}号机组`\r\n        : `修改生产计划-${$route.params.castId}号机组`\r\n    \"\r\n    :visible.sync=\"dialogData.dialogVisible\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n    @close=\"closeDialog\"\r\n    :center=\"true\"\r\n    width=\"1200px\"\r\n    v-loading=\"loading\"\r\n    element-loading-text=\"拼命加载中\"\r\n  >\r\n    <el-form\r\n      :model=\"formData\"\r\n      :rules=\"rules\"\r\n      ref=\"form\"\r\n      label-width=\"100px\"\r\n      @submit.native.prevent\r\n    >\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"日期\" prop=\"date\" class=\"dialog_field\">\r\n            <el-date-picker\r\n              v-model=\"formData.date\"\r\n              type=\"date\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              placeholder=\"选择日期\"\r\n              :editable=\"false\"\r\n              :clearable=\"false\"\r\n              @change=\"pick\"\r\n            ></el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"客户\" prop=\"client\" class=\"dialog_field\">\r\n            <el-input v-model=\"formData.client\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"班次\" prop=\"team\" class=\"dialog_field\">\r\n            <el-select v-model=\"formData.team\" placeholder=\"请选择\">\r\n              <el-option label=\"早班\" value=\"早\"></el-option>\r\n              <el-option label=\"中班\" value=\"中\"></el-option>\r\n              <el-option label=\"夜班\" value=\"夜\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"任务单号\" prop=\"taskOrder\" class=\"dialog_field\">\r\n            <el-input v-model=\"formData.taskOrder\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"材质\" prop=\"ribbonTypeName\" class=\"dialog_field\">\r\n            <el-select v-model=\"formData.ribbonTypeName\" placeholder=\"请选择\">\r\n              <el-option\r\n                v-for=\"item in ribbonTypeList\"\r\n                :key=\"item.ribbonTypeId\"\r\n                :label=\"item.ribbonTypeName\"\r\n                :value=\"item.ribbonTypeName\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"规格\" prop=\"ribbonWidth\" class=\"dialog_field\">\r\n            <el-select v-model=\"formData.ribbonWidth\" placeholder=\"请选择\">\r\n              <el-option\r\n                v-for=\"item in ribbonWidthList\"\r\n                :key=\"item.ribbonWidthId\"\r\n                :label=\"item.ribbonWidth\"\r\n                :value=\"item.ribbonWidth\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!-- 新增 -->\r\n        <el-col :span=\"6\" v-if=\"dialogData.formType === 'create'\">\r\n          <el-form-item\r\n            label=\"开始炉号\"\r\n            prop=\"theBeginfurnace\"\r\n            class=\"dialog_field\"\r\n          >\r\n            <el-input v-model=\"formData.theBeginfurnace\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\" v-if=\"dialogData.formType === 'create'\">\r\n          <el-form-item label=\"计划炉次\" prop=\"heatNum\" class=\"dialog_field\">\r\n            <el-input v-model=\"formData.heatNum\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!-- 新增 结束 -->\r\n        <!-- 编辑 -->\r\n        <el-col :span=\"6\" v-if=\"dialogData.formType === 'edit'\">\r\n          <el-form-item label=\"制带炉号\" prop=\"furnace\" class=\"dialog_field\">\r\n            <el-input v-model=\"formData.furnace\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\" v-if=\"dialogData.formType === 'edit'\">\r\n          <el-form-item label=\"喷带时间\" prop=\"castTime\" class=\"dialog_field\">\r\n            <el-input v-model=\"formData.castTime\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!-- 编辑结束 -->\r\n      </el-row>\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"6\">\r\n          <el-form-item\r\n            label=\"单炉投入\"\r\n            prop=\"alloyWeight\"\r\n            class=\"dialog_field\"\r\n          >\r\n            <el-input v-model=\"formData.alloyWeight\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item label=\"文件编号\" prop=\"fileNumber\" class=\"dialog_field\">\r\n            <el-input v-model=\"formData.fileNumber\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item\r\n            label=\"备注\"\r\n            prop=\"remark\"\r\n            class=\"dialog_field orign_field\"\r\n          >\r\n            <el-input v-model=\"formData.remark\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <section class=\"requirement_detail\">\r\n        <h3 class=\"requirement_hd\">订单要求</h3>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"带厚(μm)\"\r\n              prop=\"orderThickness\"\r\n              class=\"dialog_field\"\r\n            >\r\n              <el-input\r\n                v-model=\"formData.orderThickness\"\r\n                placeholder=\"格式：20-23或者≤23\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"叠片系数\"\r\n              prop=\"orderLaminationFactor\"\r\n              class=\"dialog_field\"\r\n            >\r\n              <el-select\r\n                v-model=\"formData.orderLaminationFactor\"\r\n                placeholder=\"\"\r\n              >\r\n                <el-option label=\"≥0.68\" value=\"≥0.68\"></el-option>\r\n                <el-option label=\"≥0.72\" value=\"≥0.72\"></el-option>\r\n                <el-option label=\"≥0.75\" value=\"≥0.75\"></el-option>\r\n                <el-option label=\"≥0.78\" value=\"≥0.78\"></el-option>\r\n                <el-option label=\"≥0.80\" value=\"≥0.80\"></el-option>\r\n                <el-option label=\"≥0.82\" value=\"≥0.82\"></el-option>\r\n                <el-option label=\"≥0.84\" value=\"≥0.84\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"韧性\"\r\n              prop=\"orderRibbonToughnessLevels\"\r\n              class=\"dialog_field\"\r\n            >\r\n              <el-select\r\n                v-model=\"formData.orderRibbonToughnessLevels\"\r\n                placeholder=\"\"\r\n                multiple\r\n                collapse-tags\r\n              >\r\n                <el-option\r\n                  v-for=\"item in ribbonToughnessLevelList\"\r\n                  :key=\"item.ribbonToughnessLevelId\"\r\n                  :label=\"item.ribbonToughnessLevel\"\r\n                  :value=\"item.ribbonToughnessLevel\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"外观\"\r\n              prop=\"orderAppearenceLevels\"\r\n              class=\"dialog_field\"\r\n            >\r\n              <el-select\r\n                v-model=\"formData.orderAppearenceLevels\"\r\n                placeholder=\"\"\r\n                multiple\r\n                collapse-tags\r\n              >\r\n                <el-option label=\"A\" value=\"A\"></el-option>\r\n                <el-option label=\"B\" value=\"B\"></el-option>\r\n                <el-option label=\"C\" value=\"C\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </section>\r\n      <section class=\"requirement_detail\">\r\n        <h3 class=\"requirement_hd\">\r\n          此类带材入库规范<i\r\n            class=\"el-icon-circle-plus\"\r\n            @click=\"addRequirement\"\r\n          ></i>\r\n        </h3>\r\n        <el-row\r\n          :gutter=\"20\"\r\n          v-for=\"(item, index) in formData.qualifiedDemands\"\r\n          :key=\"index\"\r\n          class=\"requirement_row\"\r\n        >\r\n          <i class=\"el-icon-remove\" @click=\"delRequirement\"></i>\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"带厚(μm)\"\r\n              class=\"dialog_field\"\r\n              :prop=\"'qualifiedDemands.' + index + '.qualifiedThickness'\"\r\n              :rules=\"[\r\n                { required: true, message: '请填写带厚', trigger: 'blur' },\r\n                { max: 50, message: '最多50位字符', trigger: 'blur' },\r\n                {\r\n                  pattern: /^([1-3]\\d-[1-3]\\d|≤[1-3]\\d)$/,\r\n                  message: '格式错误，20-23或者≤23',\r\n                  trigger: 'blur'\r\n                }\r\n              ]\"\r\n            >\r\n              <el-input\r\n                v-model=\"item.qualifiedThickness\"\r\n                placeholder=\"格式：20-23或者≤23\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"叠片系数\"\r\n              class=\"dialog_field\"\r\n              :prop=\"'qualifiedDemands.' + index + '.qualifiedLaminationFactor'\"\r\n              :rules=\"[\r\n                { required: true, message: '请选择叠片系数', trigger: 'blur' }\r\n              ]\"\r\n            >\r\n              <el-select\r\n                v-model=\"item.qualifiedLaminationFactor\"\r\n                placeholder=\"\"\r\n              >\r\n                <el-option label=\"≥0.68\" value=\"≥0.68\"></el-option>\r\n                <el-option label=\"≥0.72\" value=\"≥0.72\"></el-option>\r\n                <el-option label=\"≥0.75\" value=\"≥0.75\"></el-option>\r\n                <el-option label=\"≥0.78\" value=\"≥0.78\"></el-option>\r\n                <el-option label=\"≥0.80\" value=\"≥0.80\"></el-option>\r\n                <el-option label=\"≥0.82\" value=\"≥0.82\"></el-option>\r\n                <el-option label=\"≥0.84\" value=\"≥0.84\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"韧性\"\r\n              class=\"dialog_field\"\r\n              :prop=\"\r\n                'qualifiedDemands.' + index + '.qualifiedRibbonToughnessLevels'\r\n              \"\r\n              :rules=\"[\r\n                { required: true, message: '请选择韧性', trigger: 'blur' }\r\n              ]\"\r\n            >\r\n              <el-select\r\n                v-model=\"item.qualifiedRibbonToughnessLevels\"\r\n                placeholder=\"\"\r\n                multiple\r\n                collapse-tags\r\n              >\r\n                <el-option\r\n                  v-for=\"item in ribbonToughnessLevelList\"\r\n                  :key=\"item.ribbonToughnessLevelId\"\r\n                  :label=\"item.ribbonToughnessLevel\"\r\n                  :value=\"item.ribbonToughnessLevel\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-form-item\r\n              label=\"外观\"\r\n              class=\"dialog_field\"\r\n              :prop=\"'qualifiedDemands.' + index + '.qualifiedAppearenceLevels'\"\r\n              :rules=\"[\r\n                { required: true, message: '请选择外观', trigger: 'blur' }\r\n              ]\"\r\n            >\r\n              <el-select\r\n                v-model=\"item.qualifiedAppearenceLevels\"\r\n                placeholder=\"\"\r\n                multiple\r\n                collapse-tags\r\n              >\r\n                <el-option label=\"A\" value=\"A\"></el-option>\r\n                <el-option label=\"B\" value=\"B\"></el-option>\r\n                <el-option label=\"C\" value=\"C\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </section>\r\n    </el-form>\r\n    <div slot=\"footer\">\r\n      <el-button @click=\"closeDialog\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"submitForm\">提交</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { positiveInteger, ltNumber } from \"@/utils/validate\";\r\nimport urlmap from \"@/utils/urlmap\";\r\nimport { mapState, mapActions } from \"vuex\";\r\nimport { cloneDeep } from \"lodash\";\r\n\r\nconst formConfig = {\r\n  date: \"\",\r\n  castId: null,\r\n  team: \"\",\r\n  taskOrder: \"\",\r\n  ribbonTypeName: \"\",\r\n  ribbonWidth: null,\r\n  client: \"\",\r\n  furnace: \"\",\r\n  theBeginfurnace: \"\",\r\n  heatNum: null,\r\n  alloyWeight: null,\r\n  castTime: \"\",\r\n  rawWeight: null,\r\n  remark: \"计划喷带12炉，如果有富余时间喷带按照当天最后一炉规定的要求生产。\",\r\n  fileNumber: \"\",\r\n  orderThickness: \"\", // 订单要求：厚度\r\n  orderLaminationFactor: \"\", // 订单要求：叠片系数\r\n  orderRibbonToughnessLevels: [], // 订单要求：韧性\r\n  orderAppearenceLevels: [], // 订单要求：外观\r\n  qualifiedDemands: [\r\n    {\r\n      qualifiedThickness: \"\", // 入库要求：厚度\r\n      qualifiedLaminationFactor: \"\", // 入库要求：叠片系数\r\n      qualifiedRibbonToughnessLevels: [], // 入库要求：韧性\r\n      qualifiedAppearenceLevels: [] // 入库要求：外观\r\n    }\r\n  ]\r\n};\r\n\r\nexport default {\r\n  props: {\r\n    dialogData: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    const checkFurnance = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"炉号不能为空\"));\r\n      }\r\n\r\n      const reg = /^0[1-9]-[0-9]{8}-[0-9]{2}$/;\r\n      if (reg.test(value)) {\r\n        callback();\r\n      } else {\r\n        callback(new Error(\"炉号格式错误\"));\r\n      }\r\n    };\r\n\r\n    return {\r\n      roleId: null,\r\n      visible: false,\r\n      loading: false,\r\n      formData: {\r\n        date: \"\",\r\n        castId: null,\r\n        team: \"\",\r\n        taskOrder: \"\",\r\n        ribbonTypeName: \"\",\r\n        ribbonWidth: null,\r\n        client: \"\",\r\n        furnace: \"\",\r\n        theBeginfurnace: \"\",\r\n        heatNum: null,\r\n        alloyWeight: null,\r\n        castTime: \"\",\r\n        rawWeight: null,\r\n        remark: \"\",\r\n        fileNumber: \"\",\r\n        orderThickness: \"\", // 订单要求：厚度\r\n        orderLaminationFactor: \"\", // 订单要求：叠片系数\r\n        orderRibbonToughnessLevels: [], // 订单要求：韧性\r\n        orderAppearenceLevels: [], // 订单要求：外观\r\n        // qualifiedThickness: '', // 入库要求：厚度\r\n        // qualifiedLaminationFactor: '', // 入库要求：叠片系数\r\n        // qualifiedRibbonToughnessLevels: [], // 入库要求：韧性\r\n        // qualifiedAppearenceLevels: [], // 入库要求：外观\r\n        qualifiedDemands: [\r\n          {\r\n            qualifiedThickness: \"\", // 入库要求：厚度\r\n            qualifiedLaminationFactor: \"\", // 入库要求：叠片系数\r\n            qualifiedRibbonToughnessLevels: [], // 入库要求：韧性\r\n            qualifiedAppearenceLevels: [] // 入库要求：外观\r\n          }\r\n        ]\r\n      },\r\n      rules: {\r\n        date: [{ required: true, message: \"请选择日期\", trigger: \"blur\" }],\r\n        castId: [{ required: true, message: \"请选择机组\", trigger: \"blur\" }],\r\n        team: [{ required: true, message: \"请选择班次\", trigger: \"blur\" }],\r\n        ribbonTypeName: [\r\n          { required: true, message: \"请选择材质\", trigger: \"blur\" }\r\n        ],\r\n        ribbonWidth: [\r\n          { required: true, message: \"请填写带宽\", trigger: \"blur\" },\r\n          { validator: positiveInteger, trigger: \"blur\" },\r\n          { validator: ltNumber(99999), trigger: \"blur\" }\r\n        ],\r\n        client: [{ max: 50, message: \"最多50位字符\", trigger: \"blur\" }],\r\n        furnace: [\r\n          { required: true, message: \"请填写炉号\", trigger: \"blur\" },\r\n          { max: 20, message: \"最多20位字符\", trigger: \"blur\" },\r\n          { validator: checkFurnance, trigger: \"blur\" }\r\n        ],\r\n        theBeginfurnace: [\r\n          { required: true, message: \"请填写开始炉号\", trigger: \"blur\" },\r\n          { max: 20, message: \"最多20位字符\", trigger: \"blur\" },\r\n          { validator: checkFurnance, trigger: \"blur\" }\r\n        ],\r\n        heatNum: [\r\n          { required: true, message: \"请填写计划炉次\", trigger: \"blur\" },\r\n          { validator: positiveInteger, trigger: \"blur\" },\r\n          { validator: ltNumber(99999), trigger: \"blur\" }\r\n        ],\r\n        alloyWeight: [\r\n          { required: true, message: \"请填写单炉投入重量\", trigger: \"blur\" },\r\n          { validator: positiveInteger, trigger: \"blur\" },\r\n          { validator: ltNumber(99999), trigger: \"blur\" }\r\n        ],\r\n        castTime: [{ max: 50, message: \"最多50位字符\", trigger: \"blur\" }],\r\n        remark: [{ max: 100, message: \"最多100位字符\", trigger: \"blur\" }],\r\n        fileNumber: [{ max: 50, message: \"最多50位字符\", trigger: \"blur\" }],\r\n        orderThickness: [\r\n          { required: true, message: \"请填写带厚\", trigger: \"blur\" },\r\n          { max: 50, message: \"最多50位字符\", trigger: \"blur\" },\r\n          {\r\n            pattern: /^([1-3]\\d-[1-3]\\d|≤[1-3]\\d)$/,\r\n            message: \"格式错误，20-23或者≤23\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        orderLaminationFactor: [\r\n          { required: true, message: \"请选择叠片系数\", trigger: \"blur\" }\r\n        ],\r\n        orderRibbonToughnessLevels: [\r\n          { required: true, message: \"请选择韧性等级\", trigger: \"blur\" }\r\n        ],\r\n        orderAppearenceLevels: [\r\n          { required: true, message: \"请选择外观等级\", trigger: \"blur\" }\r\n        ]\r\n        // qualifiedThickness: [\r\n        //   { required: true, message: '请填写带厚', trigger: 'blur' },\r\n        //   { max: 50, message: '最多50位字符', trigger: 'blur' },\r\n        //   { pattern: /^([1-3]\\d-[1-3]\\d|≤[1-3]\\d)$/, message: '格式错误，20-23或者≤23', trigger: 'blur' },\r\n        // ],\r\n        // qualifiedLaminationFactor: [\r\n        //   { required: true, message: '请选择叠片系数', trigger: 'blur' }\r\n        // ],\r\n        // qualifiedRibbonToughnessLevels: [\r\n        //   { required: true, message: '请选择韧性等级', trigger: 'blur' }\r\n        // ],\r\n        // qualifiedAppearenceLevels: [\r\n        //   { required: true, message: '请选择外观等级', trigger: 'blur' }\r\n        // ]\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      \"ribbonTypeList\",\r\n      \"ribbonWidthList\",\r\n      \"ribbonToughnessLevelList\"\r\n    ])\r\n  },\r\n  created() {\r\n    if (this.dialogData.formType === \"create\") {\r\n      this.formData = Object.assign({}, formConfig, {\r\n        castId: Number(this.$route.params.castId)\r\n      });\r\n    } else {\r\n      this.formData = Object.assign(this.formData, this.dialogData.rowData);\r\n    }\r\n    this.roleId = JSON.parse(localStorage.getItem(\"userinfo\")).roleId;\r\n    this.getRibbonTypeList();\r\n    this.getRibbonWidthList();\r\n    this.getRibbonToughnessLevelList();\r\n  },\r\n  methods: {\r\n    pick() {\r\n      let date = this.formData.date.replace(/-/g, \"\");\r\n      this.formData.theBeginfurnace = `0${this.formData.castId}-${date}-01`;\r\n    },\r\n    ...mapActions([\r\n      \"getRibbonTypeList\",\r\n      \"getRibbonWidthList\",\r\n      \"getRibbonToughnessLevelList\"\r\n    ]),\r\n    closeDialog() {\r\n      this.$emit(\"close\");\r\n    },\r\n    addRequirement() {\r\n      this.formData.qualifiedDemands.length < 2 &&\r\n        this.formData.qualifiedDemands.push({\r\n          qualifiedThickness: \"\", // 入库要求：厚度\r\n          qualifiedLaminationFactor: \"\", // 入库要求：叠片系数\r\n          qualifiedRibbonToughnessLevels: [], // 入库要求：韧性\r\n          qualifiedAppearenceLevels: [] // 入库要求：外观\r\n        });\r\n    },\r\n    delRequirement() {\r\n      this.formData.qualifiedDemands.length === 2 &&\r\n        this.formData.qualifiedDemands.pop();\r\n    },\r\n    submitForm() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          let method = \"\";\r\n          let url = \"\";\r\n          let params = null;\r\n\r\n          if (this.dialogData.formType === \"create\") {\r\n            // 新增\r\n            method = \"post\";\r\n            url = urlmap.addPlan;\r\n            let formData = [];\r\n            let _heatNum = this.formData.heatNum;\r\n            let fHead = this.formData.theBeginfurnace.substring(0, 12);\r\n            let fEnd = this.formData.theBeginfurnace.substring(12, 14);\r\n            while (_heatNum > 0) {\r\n              _heatNum--;\r\n              let clone = cloneDeep(this.formData);\r\n              clone.furnace = fHead + fEnd;\r\n              clone.castTime = this.setCastTime(fEnd);\r\n              clone.roleId = this.roleId;\r\n              //将数组转成字符串\r\n              clone.orderRibbonToughnessLevels = clone.orderRibbonToughnessLevels.join();\r\n              clone.orderAppearenceLevels = clone.orderAppearenceLevels.join();\r\n              // clone.qualifiedRibbonToughnessLevels = clone.qualifiedRibbonToughnessLevels.join();\r\n              // clone.qualifiedAppearenceLevels = clone.qualifiedAppearenceLevels.join();\r\n              clone.qualifiedDemands = JSON.stringify(clone.qualifiedDemands);\r\n              formData.push(clone);\r\n              fEnd =\r\n                Number(fEnd) + 1 < 10\r\n                  ? \"0\" + (Number(fEnd) + 1)\r\n                  : Number(fEnd) + 1;\r\n            }\r\n\r\n            params = { formDataJson: JSON.stringify(formData) };\r\n          } else {\r\n            // 编辑\r\n            method = \"put\";\r\n            url = urlmap.updatePlan;\r\n            const clone = cloneDeep(this.formData);\r\n            clone.roleId = this.roleId;\r\n            // this.formData.orderRibbonToughnessLevelsJson = JSON.stringify(this.formData.orderRibbonToughnessLevels);\r\n            // this.formData.orderAppearenceLevelsJson = JSON.stringify(this.formData.orderAppearenceLevels);\r\n            // this.formData.qualifiedRibbonToughnessLevelsJson = JSON.stringify(this.formData.qualifiedRibbonToughnessLevels);\r\n            // this.formData.qualifiedAppearenceLevelsJson = JSON.stringify(this.formData.qualifiedAppearenceLevels);\r\n\r\n            clone.orderRibbonToughnessLevels = clone.orderRibbonToughnessLevels.join();\r\n            clone.orderAppearenceLevels = clone.orderAppearenceLevels.join();\r\n            // clone.qualifiedRibbonToughnessLevels = clone.qualifiedRibbonToughnessLevels.join();\r\n            // clone.qualifiedAppearenceLevels = clone.qualifiedAppearenceLevels.join();\r\n            clone.qualifiedDemands = JSON.stringify(clone.qualifiedDemands);\r\n            params = clone;\r\n          }\r\n\r\n          this.$http(method, url, params)\r\n            .then(data => {\r\n              this.$emit(\"submit\");\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            })\r\n            .finally(() => {\r\n              this.loading = false;\r\n            });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    setCastTime(fEnd) {\r\n      let time = \"\";\r\n      switch (Number(fEnd)) {\r\n        case 1:\r\n          time = \"08:00-10:00\";\r\n          break;\r\n        case 2:\r\n          time = \"10:00-12:00\";\r\n          break;\r\n        case 3:\r\n          time = \"12:00-14:00\";\r\n          break;\r\n        case 4:\r\n          time = \"14:00-16:00\";\r\n          break;\r\n        case 5:\r\n          time = \"16:00-18:00\";\r\n          break;\r\n        case 6:\r\n          time = \"18:00-20:00\";\r\n          break;\r\n        case 7:\r\n          time = \"20:00-22:00\";\r\n          break;\r\n        case 8:\r\n          time = \"22:00-24:00\";\r\n          break;\r\n        case 9:\r\n          time = \"00:00-02:00\";\r\n          break;\r\n        case 10:\r\n          time = \"02:00-04:00\";\r\n          break;\r\n        case 11:\r\n          time = \"04:00-06:00\";\r\n          break;\r\n        case 12:\r\n          time = \"06:00-08:00\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      return time;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.requirement_detail {\r\n  border-top: 1px solid #dcdfe6;\r\n  position: relative;\r\n  padding: 20px 0 10px;\r\n  .requirement_hd {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: -10px;\r\n    transform: translateX(-50%);\r\n    background-color: #fff;\r\n    padding: 0 10px;\r\n    .el-icon-circle-plus {\r\n      position: absolute;\r\n      top: 2px;\r\n      margin-left: 5px;\r\n      &:hover {\r\n        color: #fff;\r\n        background: #409eff;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n  .requirement_row {\r\n    position: relative;\r\n    .el-icon-remove {\r\n      position: absolute;\r\n      top: 10px;\r\n      left: 10px;\r\n      &:hover {\r\n        color: #fff;\r\n        background: #409eff;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/plan/components/dialogForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"title\":_vm.dialogData.formType === 'create'\n      ? (\"新增生产计划-\" + (_vm.$route.params.castId) + \"号机组\")\n      : (\"修改生产计划-\" + (_vm.$route.params.castId) + \"号机组\"),\"visible\":_vm.dialogData.dialogVisible,\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"center\":true,\"width\":\"1200px\",\"element-loading-text\":\"拼命加载中\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.dialogData, \"dialogVisible\", $event)},\"close\":_vm.closeDialog}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"100px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"日期\",\"prop\":\"date\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"value-format\":\"yyyy-MM-dd\",\"placeholder\":\"选择日期\",\"editable\":false,\"clearable\":false},on:{\"change\":_vm.pick},model:{value:(_vm.formData.date),callback:function ($$v) {_vm.$set(_vm.formData, \"date\", $$v)},expression:\"formData.date\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"客户\",\"prop\":\"client\"}},[_c('el-input',{model:{value:(_vm.formData.client),callback:function ($$v) {_vm.$set(_vm.formData, \"client\", $$v)},expression:\"formData.client\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"班次\",\"prop\":\"team\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formData.team),callback:function ($$v) {_vm.$set(_vm.formData, \"team\", $$v)},expression:\"formData.team\"}},[_c('el-option',{attrs:{\"label\":\"早班\",\"value\":\"早\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"中班\",\"value\":\"中\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"夜班\",\"value\":\"夜\"}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"任务单号\",\"prop\":\"taskOrder\"}},[_c('el-input',{model:{value:(_vm.formData.taskOrder),callback:function ($$v) {_vm.$set(_vm.formData, \"taskOrder\", $$v)},expression:\"formData.taskOrder\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"材质\",\"prop\":\"ribbonTypeName\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formData.ribbonTypeName),callback:function ($$v) {_vm.$set(_vm.formData, \"ribbonTypeName\", $$v)},expression:\"formData.ribbonTypeName\"}},_vm._l((_vm.ribbonTypeList),function(item){return _c('el-option',{key:item.ribbonTypeId,attrs:{\"label\":item.ribbonTypeName,\"value\":item.ribbonTypeName}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"规格\",\"prop\":\"ribbonWidth\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formData.ribbonWidth),callback:function ($$v) {_vm.$set(_vm.formData, \"ribbonWidth\", $$v)},expression:\"formData.ribbonWidth\"}},_vm._l((_vm.ribbonWidthList),function(item){return _c('el-option',{key:item.ribbonWidthId,attrs:{\"label\":item.ribbonWidth,\"value\":item.ribbonWidth}})}),1)],1)],1),_vm._v(\" \"),(_vm.dialogData.formType === 'create')?_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"开始炉号\",\"prop\":\"theBeginfurnace\"}},[_c('el-input',{model:{value:(_vm.formData.theBeginfurnace),callback:function ($$v) {_vm.$set(_vm.formData, \"theBeginfurnace\", $$v)},expression:\"formData.theBeginfurnace\"}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.dialogData.formType === 'create')?_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"计划炉次\",\"prop\":\"heatNum\"}},[_c('el-input',{model:{value:(_vm.formData.heatNum),callback:function ($$v) {_vm.$set(_vm.formData, \"heatNum\", $$v)},expression:\"formData.heatNum\"}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.dialogData.formType === 'edit')?_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"制带炉号\",\"prop\":\"furnace\"}},[_c('el-input',{model:{value:(_vm.formData.furnace),callback:function ($$v) {_vm.$set(_vm.formData, \"furnace\", $$v)},expression:\"formData.furnace\"}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.dialogData.formType === 'edit')?_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"喷带时间\",\"prop\":\"castTime\"}},[_c('el-input',{model:{value:(_vm.formData.castTime),callback:function ($$v) {_vm.$set(_vm.formData, \"castTime\", $$v)},expression:\"formData.castTime\"}})],1)],1):_vm._e()],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"单炉投入\",\"prop\":\"alloyWeight\"}},[_c('el-input',{model:{value:(_vm.formData.alloyWeight),callback:function ($$v) {_vm.$set(_vm.formData, \"alloyWeight\", $$v)},expression:\"formData.alloyWeight\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"文件编号\",\"prop\":\"fileNumber\"}},[_c('el-input',{model:{value:(_vm.formData.fileNumber),callback:function ($$v) {_vm.$set(_vm.formData, \"fileNumber\", $$v)},expression:\"formData.fileNumber\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{staticClass:\"dialog_field orign_field\",attrs:{\"label\":\"备注\",\"prop\":\"remark\"}},[_c('el-input',{model:{value:(_vm.formData.remark),callback:function ($$v) {_vm.$set(_vm.formData, \"remark\", $$v)},expression:\"formData.remark\"}})],1)],1)],1),_vm._v(\" \"),_c('section',{staticClass:\"requirement_detail\"},[_c('h3',{staticClass:\"requirement_hd\"},[_vm._v(\"订单要求\")]),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"带厚(μm)\",\"prop\":\"orderThickness\"}},[_c('el-input',{attrs:{\"placeholder\":\"格式：20-23或者≤23\"},model:{value:(_vm.formData.orderThickness),callback:function ($$v) {_vm.$set(_vm.formData, \"orderThickness\", $$v)},expression:\"formData.orderThickness\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"叠片系数\",\"prop\":\"orderLaminationFactor\"}},[_c('el-select',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.formData.orderLaminationFactor),callback:function ($$v) {_vm.$set(_vm.formData, \"orderLaminationFactor\", $$v)},expression:\"formData.orderLaminationFactor\"}},[_c('el-option',{attrs:{\"label\":\"≥0.68\",\"value\":\"≥0.68\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.72\",\"value\":\"≥0.72\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.75\",\"value\":\"≥0.75\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.78\",\"value\":\"≥0.78\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.80\",\"value\":\"≥0.80\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.82\",\"value\":\"≥0.82\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.84\",\"value\":\"≥0.84\"}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"韧性\",\"prop\":\"orderRibbonToughnessLevels\"}},[_c('el-select',{attrs:{\"placeholder\":\"\",\"multiple\":\"\",\"collapse-tags\":\"\"},model:{value:(_vm.formData.orderRibbonToughnessLevels),callback:function ($$v) {_vm.$set(_vm.formData, \"orderRibbonToughnessLevels\", $$v)},expression:\"formData.orderRibbonToughnessLevels\"}},_vm._l((_vm.ribbonToughnessLevelList),function(item){return _c('el-option',{key:item.ribbonToughnessLevelId,attrs:{\"label\":item.ribbonToughnessLevel,\"value\":item.ribbonToughnessLevel}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"外观\",\"prop\":\"orderAppearenceLevels\"}},[_c('el-select',{attrs:{\"placeholder\":\"\",\"multiple\":\"\",\"collapse-tags\":\"\"},model:{value:(_vm.formData.orderAppearenceLevels),callback:function ($$v) {_vm.$set(_vm.formData, \"orderAppearenceLevels\", $$v)},expression:\"formData.orderAppearenceLevels\"}},[_c('el-option',{attrs:{\"label\":\"A\",\"value\":\"A\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"B\",\"value\":\"B\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"C\",\"value\":\"C\"}})],1)],1)],1)],1)],1),_vm._v(\" \"),_c('section',{staticClass:\"requirement_detail\"},[_c('h3',{staticClass:\"requirement_hd\"},[_vm._v(\"\\n        此类带材入库规范\"),_c('i',{staticClass:\"el-icon-circle-plus\",on:{\"click\":_vm.addRequirement}})]),_vm._v(\" \"),_vm._l((_vm.formData.qualifiedDemands),function(item,index){return _c('el-row',{key:index,staticClass:\"requirement_row\",attrs:{\"gutter\":20}},[_c('i',{staticClass:\"el-icon-remove\",on:{\"click\":_vm.delRequirement}}),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"带厚(μm)\",\"prop\":'qualifiedDemands.' + index + '.qualifiedThickness',\"rules\":[\n              { required: true, message: '请填写带厚', trigger: 'blur' },\n              { max: 50, message: '最多50位字符', trigger: 'blur' },\n              {\n                pattern: /^([1-3]\\d-[1-3]\\d|≤[1-3]\\d)$/,\n                message: '格式错误，20-23或者≤23',\n                trigger: 'blur'\n              }\n            ]}},[_c('el-input',{attrs:{\"placeholder\":\"格式：20-23或者≤23\"},model:{value:(item.qualifiedThickness),callback:function ($$v) {_vm.$set(item, \"qualifiedThickness\", $$v)},expression:\"item.qualifiedThickness\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"叠片系数\",\"prop\":'qualifiedDemands.' + index + '.qualifiedLaminationFactor',\"rules\":[\n              { required: true, message: '请选择叠片系数', trigger: 'blur' }\n            ]}},[_c('el-select',{attrs:{\"placeholder\":\"\"},model:{value:(item.qualifiedLaminationFactor),callback:function ($$v) {_vm.$set(item, \"qualifiedLaminationFactor\", $$v)},expression:\"item.qualifiedLaminationFactor\"}},[_c('el-option',{attrs:{\"label\":\"≥0.68\",\"value\":\"≥0.68\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.72\",\"value\":\"≥0.72\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.75\",\"value\":\"≥0.75\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.78\",\"value\":\"≥0.78\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.80\",\"value\":\"≥0.80\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.82\",\"value\":\"≥0.82\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"≥0.84\",\"value\":\"≥0.84\"}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"韧性\",\"prop\":'qualifiedDemands.' + index + '.qualifiedRibbonToughnessLevels',\"rules\":[\n              { required: true, message: '请选择韧性', trigger: 'blur' }\n            ]}},[_c('el-select',{attrs:{\"placeholder\":\"\",\"multiple\":\"\",\"collapse-tags\":\"\"},model:{value:(item.qualifiedRibbonToughnessLevels),callback:function ($$v) {_vm.$set(item, \"qualifiedRibbonToughnessLevels\", $$v)},expression:\"item.qualifiedRibbonToughnessLevels\"}},_vm._l((_vm.ribbonToughnessLevelList),function(item){return _c('el-option',{key:item.ribbonToughnessLevelId,attrs:{\"label\":item.ribbonToughnessLevel,\"value\":item.ribbonToughnessLevel}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{staticClass:\"dialog_field\",attrs:{\"label\":\"外观\",\"prop\":'qualifiedDemands.' + index + '.qualifiedAppearenceLevels',\"rules\":[\n              { required: true, message: '请选择外观', trigger: 'blur' }\n            ]}},[_c('el-select',{attrs:{\"placeholder\":\"\",\"multiple\":\"\",\"collapse-tags\":\"\"},model:{value:(item.qualifiedAppearenceLevels),callback:function ($$v) {_vm.$set(item, \"qualifiedAppearenceLevels\", $$v)},expression:\"item.qualifiedAppearenceLevels\"}},[_c('el-option',{attrs:{\"label\":\"A\",\"value\":\"A\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"B\",\"value\":\"B\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"C\",\"value\":\"C\"}})],1)],1)],1)],1)})],2)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialog}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cfc570de\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/plan/components/dialogForm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cfc570de\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./dialogForm.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dialogForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dialogForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cfc570de\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./dialogForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cfc570de\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/plan/components/dialogForm.vue\n// module id = null\n// module chunks = ","<template>\r\n  <el-dialog \r\n  title=\"导出生产计划\" \r\n  :visible.sync=\"exportData.exportVisible\" \r\n  :close-on-click-modal=\"false\"\r\n  :close-on-press-escape=\"false\" \r\n  @close=\"closeDialog\"\r\n  :center=\"true\"\r\n  width=\"550px\">\r\n    <el-form :model=\"formData\" :rules=\"rules\" ref=\"form\" label-width=\"100px\" @submit.native.prevent>\r\n      <el-form-item label=\"日期范围：\" prop=\"date\">\r\n        <el-date-picker\r\n          v-model=\"formData.date\"\r\n          type=\"daterange\"\r\n          :default-time=\"['00:00:00', '23:59:59']\"\r\n          :clearable=\"false\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\">\r\n        </el-date-picker>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\">\r\n      <el-button @click=\"closeDialog\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"submitForm\">提交</el-button>\r\n    </div>\r\n  </el-dialog>  \r\n</template>\r\n\r\n<script>\r\nimport urlmap from '@/utils/urlmap';\r\nimport qs from 'qs';\r\n\r\nexport default {\r\n  props: {\r\n    exportData: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      formData: {\r\n        date: null\r\n      },\r\n      rules: {\r\n        date: [{ required: true, message: '请选择日期', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    closeDialog() {\r\n      this.$emit('closeExport');\r\n    },\r\n    submitForm() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          const params = {\r\n            castId: this.exportData.castId,\r\n            startTime: this.formData.date[0],\r\n            endTime: this.formData.date[1]\r\n          };\r\n          const url = `${urlmap.exportPlan}?${qs.stringify(params)}`;\r\n          window.open(url);\r\n          this.$emit('submitExport');\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/plan/components/excelForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"导出生产计划\",\"visible\":_vm.exportData.exportVisible,\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"center\":true,\"width\":\"550px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.exportData, \"exportVisible\", $event)},\"close\":_vm.closeDialog}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"100px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"label\":\"日期范围：\",\"prop\":\"date\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"default-time\":['00:00:00', '23:59:59'],\"clearable\":false,\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.formData.date),callback:function ($$v) {_vm.$set(_vm.formData, \"date\", $$v)},expression:\"formData.date\"}})],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialog}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f052a39a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/plan/components/excelForm.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"crumb\">\r\n      <el-breadcrumb-item>生产计划</el-breadcrumb-item>\r\n      <el-breadcrumb-item>{{castId}}号机组</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-form class=\"search_bar\" :model=\"searchForm\" :inline=\"true\">\r\n      <el-form-item label=\"排产日期：\">\r\n        <el-date-picker v-model=\"searchForm.date\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"选择日期\" :editable=\"false\" :clearable=\"false\" :picker-options=\"pickerOptions\"></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"clickSearch\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div class=\"main_bd\">\r\n      <el-col class=\"table_hd\">\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"createPlan\" v-if=\"roleId === 1 || roleId === 2\">新增生产计划</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"approve\" v-if=\"(roleId === 1 || roleId === 2) && tableData.length > 0 && !isApproved\" :disabled=\"roleId === 2 && tableData.length > 0 && !isApproved\">待审批</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-check\" v-if=\"(roleId === 1 || roleId === 2) && tableData.length > 0 && isApproved\" disabled>已审批</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-download\" @click=\"exportVisible = true\" v-if=\"isExportable\" class=\"pull_right\">导出</el-button>\r\n      </el-col>\r\n      <el-table :data=tableData stripe border highlight-current-row style=\"width: 100%\" v-loading=\"loading\" ref=\"table\">\r\n        <el-table-column prop=\"date\" label=\"日期\" align=\"center\" width=\"110px\"></el-table-column>\r\n        <el-table-column prop=\"castId\" label=\"机组\" align=\"center\" width=\"60px\"></el-table-column>\r\n        <el-table-column prop=\"team\" label=\"班组\" align=\"center\" width=\"50px\"></el-table-column>\r\n        <el-table-column prop=\"ribbonTypeName\" label=\"材质\" align=\"center\" width=\"80px\"></el-table-column>\r\n        <el-table-column prop=\"ribbonWidth\" label=\"规格(mm)\" align=\"center\" width=\"90px\"></el-table-column>\r\n        <el-table-column prop=\"furnace\" label=\"制带炉号\" align=\"center\" width=\"150px\"></el-table-column>\r\n        <el-table-column label=\"订单要求\">\r\n          <el-table-column label=\"带厚(μm)\" align=\"center\" width=\"90px\">\r\n            <template slot-scope=\"scope\">\r\n              <span class=\"text_danger\">{{scope.row.orderThickness}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"叠片\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span class=\"text_danger\">{{scope.row.orderLaminationFactor}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"韧性\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span class=\"text_danger\">{{scope.row.orderRibbonToughnessLevels.toString()}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"外观\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span class=\"text_danger\">{{scope.row.orderAppearenceLevels.toString()}}</span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table-column>\r\n        <el-table-column label=\"计划外入库要求\" v-if=\"roleId == 1 || roleId == 2 || roleId == 3\">\r\n          <el-table-column label=\"带厚(μm)\" align=\"center\" width=\"90px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedThickness}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"叠片\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedLaminationFactor}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"韧性\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedRibbonToughnessLevels.toString()}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"外观\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedAppearenceLevels.toString()}}</span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"计划外入库要求\" v-if=\"roleId == 1 || roleId == 2 || roleId == 3\">\r\n          <el-table-column label=\"带厚(μm)\" align=\"center\" width=\"90px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedThickness}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"叠片\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedLaminationFactor}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"韧性\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedRibbonToughnessLevels.toString()}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"外观\" align=\"center\" width=\"80px\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedAppearenceLevels.toString()}}</span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"taskOrder\" label=\"任务单号\" align=\"center\" width=\"100px\"></el-table-column>\r\n        <el-table-column prop=\"client\" label=\"客户\" align=\"center\" width=\"100px\"></el-table-column>\r\n        <el-table-column prop=\"alloyWeight\" label=\"单炉投入\" align=\"center\" width=\"80px\"></el-table-column>\r\n        <el-table-column prop=\"castTime\" label=\"制带时间\" align=\"center\" width=\"110px\"></el-table-column>\r\n        <el-table-column prop=\"rawWeight\" label=\"大盘毛重\" align=\"center\" width=\"80px\"></el-table-column>\r\n        <el-table-column label=\"实际规格(mm)\" align=\"center\" width=\"80px\">\r\n          <template slot-scope=\"scope\">\r\n            <span :class=\"{text_danger: scope.row.realRibbonWidth !== scope.row.ribbonWidth}\">{{scope.row.realRibbonWidth}}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\" width=\"150px\">\r\n          <template slot-scope=\"scope\" v-if=\"roleId === 2\">\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"editPlan(scope.row)\">修改</el-button>\r\n            <el-button size=\"mini\" type=\"danger\" @click=\"delPlan(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"table_tip\">\r\n        <p>1. 文件编号：{{tableData[0] && tableData[0].fileNumber}}</p>\r\n        <p>2. {{tableData[0] && tableData[0].remark}}</p>\r\n      </div>\r\n    </div>\r\n    <dialog-form v-if=\"dialogVisible\" :dialogData=\"{ formType, dialogVisible, rowData}\" @close=\"closeHandler\" @submit=\"submitHandler\"></dialog-form>\r\n    <excel-form v-if=\"exportVisible\" :exportData=\"{ exportVisible, castId }\" @closeExport=\" exportVisible = false\" @submitExport=\"exportVisible = false\"></excel-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { dateFormat, dateTimeFormat, debounce } from '@/utils/common';\r\nimport urlmap from '@/utils/urlmap';\r\nimport dialogForm from './components/dialogForm';\r\nimport excelForm from './components/excelForm';\r\n\r\nexport default {\r\n  name: 'plan',\r\n  components: { dialogForm, excelForm },\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        date: dateFormat(new Date())\r\n      },\r\n      isApproved: false,\r\n      isExportable: false,\r\n      dialogVisible: false,\r\n      exportVisible: false,\r\n      formType: 'create',\r\n      rowData: {},\r\n      tableData: [],\r\n      loading: true,\r\n      castId: 6,\r\n      roleId: null\r\n    }\r\n  },\r\n  // 动态路由匹配\r\n  beforeRouteUpdate(to, from, next) {\r\n    this.castId = to.params.castId;\r\n    this.getTableData();\r\n    this.isExportable = this.setExportable();\r\n    next();\r\n  },\r\n  created() {\r\n    this.castId = this.$route.params.castId;\r\n    this.getTableData();\r\n    this.roleId = JSON.parse(localStorage.getItem('userinfo')).roleId;\r\n    // 必须在获取了 roleId 之后，再判断权限\r\n    this.isExportable = this.setExportable();\r\n  },\r\n  computed: {\r\n    pickerOptions() {\r\n      const self = this;\r\n      return {\r\n        disabledDate(time) {\r\n          let date = new Date();\r\n          date.setDate(date.getDate() + 1);\r\n          return [1, 2, 3].includes(Number(self.roleId)) ? false : time.getTime() >= date.getTime();\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    closeHandler() {\r\n      this.dialogVisible = false;\r\n    },\r\n    submitHandler(data) {\r\n      if (this.formType === 'edit') {\r\n        this.dialogVisible = false;\r\n      }\r\n      this.getTableData();\r\n    },\r\n    clickSearch() {\r\n      this.getTableData();\r\n    },\r\n    setExportable() {\r\n      if ([1, 2, 3].includes(this.roleId)) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    getTableData() {\r\n      const params = {\r\n        castId: this.castId,\r\n        date: this.searchForm.date\r\n      };\r\n      this.$http('get', urlmap.queryPlan, params).then(data => {\r\n        let _list = data.list;\r\n        _list.forEach(row => {\r\n          row.orderRibbonToughnessLevels = row.orderRibbonToughnessLevels.split(',');\r\n          row.orderAppearenceLevels = row.orderAppearenceLevels.split(',');\r\n          // row.qualifiedRibbonToughnessLevels = row.qualifiedRibbonToughnessLevels.split(',');\r\n          // row.qualifiedAppearenceLevels = row.qualifiedAppearenceLevels.split(',');\r\n          row.qualifiedDemands = JSON.parse(row.qualifiedDemands);\r\n        });\r\n        // 如果数组中每一条数据的 approved === 1 都成立，则表示该计划已经审批过\r\n        this.isApproved = _list.every(item => item.approved === 1);\r\n\r\n        // 如果计划没有审批，则除了厂长和生产计划以外，其他角色无法看到该张计划单\r\n        if (!this.isApproved) {\r\n          if (this.roleId === 1 || this.roleId === 2) {\r\n            this.tableData = _list;            \r\n          } else {\r\n            this.tableData = [];\r\n          }\r\n        } else { // 计划审核通过，则所有角色都能够看到计划单\r\n          this.tableData = _list;\r\n        }\r\n      }).catch((err) => {\r\n        console.log(err);\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n    createPlan() {\r\n      this.formType = 'create';\r\n      this.dialogVisible = true;\r\n    },\r\n    editPlan(row) {\r\n      this.dialogVisible = true;\r\n      this.rowData = row;\r\n      this.formType = 'edit';\r\n    },\r\n    delPlan(row) {\r\n      const { planId, furnace } = row;\r\n      this.$confirm(`删除后数据无法恢复，确定要删除 ${furnace} 吗？`, '提示', { confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning'})\r\n      .then(() => {\r\n        this.$http('delete', urlmap.delPlan, {planId}).then(data => {\r\n          this.getTableData();\r\n        }).catch(err => {\r\n          console.log(err);\r\n        });\r\n      })\r\n      .catch(() => {});\r\n    },\r\n    approve() {\r\n      this.$confirm('确定要审批吗？', '提示', { confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning'})\r\n      .then(() => {\r\n        const params = {\r\n          date: this.searchForm.date,\r\n          castId: this.castId,\r\n          roleId: this.roleId\r\n        };\r\n        this.$http('PUT', urlmap.updatePlan, params).then(data => {\r\n          this.getTableData();\r\n        }).catch(err => {\r\n          console.log(err);\r\n        });\r\n      })\r\n      .catch(() => {});\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  \r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/plan/plan.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./excelForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./excelForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f052a39a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./excelForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/plan/components/excelForm.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{staticClass:\"crumb\",attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"生产计划\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.castId)+\"号机组\")])],1),_vm._v(\" \"),_c('el-form',{staticClass:\"search_bar\",attrs:{\"model\":_vm.searchForm,\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"排产日期：\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"value-format\":\"yyyy-MM-dd\",\"placeholder\":\"选择日期\",\"editable\":false,\"clearable\":false,\"picker-options\":_vm.pickerOptions},model:{value:(_vm.searchForm.date),callback:function ($$v) {_vm.$set(_vm.searchForm, \"date\", $$v)},expression:\"searchForm.date\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.clickSearch}},[_vm._v(\"搜索\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"main_bd\"},[_c('el-col',{staticClass:\"table_hd\"},[(_vm.roleId === 1 || _vm.roleId === 2)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.createPlan}},[_vm._v(\"新增生产计划\")]):_vm._e(),_vm._v(\" \"),((_vm.roleId === 1 || _vm.roleId === 2) && _vm.tableData.length > 0 && !_vm.isApproved)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\",\"disabled\":_vm.roleId === 2 && _vm.tableData.length > 0 && !_vm.isApproved},on:{\"click\":_vm.approve}},[_vm._v(\"待审批\")]):_vm._e(),_vm._v(\" \"),((_vm.roleId === 1 || _vm.roleId === 2) && _vm.tableData.length > 0 && _vm.isApproved)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\",\"disabled\":\"\"}},[_vm._v(\"已审批\")]):_vm._e(),_vm._v(\" \"),(_vm.isExportable)?_c('el-button',{staticClass:\"pull_right\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-download\"},on:{\"click\":function($event){_vm.exportVisible = true}}},[_vm._v(\"导出\")]):_vm._e()],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"border\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"日期\",\"align\":\"center\",\"width\":\"110px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"castId\",\"label\":\"机组\",\"align\":\"center\",\"width\":\"60px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"team\",\"label\":\"班组\",\"align\":\"center\",\"width\":\"50px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"ribbonTypeName\",\"label\":\"材质\",\"align\":\"center\",\"width\":\"80px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"ribbonWidth\",\"label\":\"规格(mm)\",\"align\":\"center\",\"width\":\"90px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"furnace\",\"label\":\"制带炉号\",\"align\":\"center\",\"width\":\"150px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"订单要求\"}},[_c('el-table-column',{attrs:{\"label\":\"带厚(μm)\",\"align\":\"center\",\"width\":\"90px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"text_danger\"},[_vm._v(_vm._s(scope.row.orderThickness))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"叠片\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"text_danger\"},[_vm._v(_vm._s(scope.row.orderLaminationFactor))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"韧性\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"text_danger\"},[_vm._v(_vm._s(scope.row.orderRibbonToughnessLevels.toString()))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"外观\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"text_danger\"},[_vm._v(_vm._s(scope.row.orderAppearenceLevels.toString()))])]}}])})],1),_vm._v(\" \"),(_vm.roleId == 1 || _vm.roleId == 2 || _vm.roleId == 3)?_c('el-table-column',{attrs:{\"label\":\"计划外入库要求\"}},[_c('el-table-column',{attrs:{\"label\":\"带厚(μm)\",\"align\":\"center\",\"width\":\"90px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedThickness))])]}}],null,false,206788358)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"叠片\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedLaminationFactor))])]}}],null,false,1074984679)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"韧性\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedRibbonToughnessLevels.toString()))])]}}],null,false,3894480132)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"外观\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[0].qualifiedAppearenceLevels.toString()))])]}}],null,false,1909284558)})],1):_vm._e(),_vm._v(\" \"),(_vm.roleId == 1 || _vm.roleId == 2 || _vm.roleId == 3)?_c('el-table-column',{attrs:{\"label\":\"计划外入库要求\"}},[_c('el-table-column',{attrs:{\"label\":\"带厚(μm)\",\"align\":\"center\",\"width\":\"90px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedThickness))])]}}],null,false,3330752234)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"叠片\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedLaminationFactor))])]}}],null,false,1509679275)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"韧性\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedRibbonToughnessLevels.toString()))])]}}],null,false,1992660648)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"外观\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.qualifiedDemands && scope.row.qualifiedDemands[1] && scope.row.qualifiedDemands[1].qualifiedAppearenceLevels.toString()))])]}}],null,false,934052002)})],1):_vm._e(),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"taskOrder\",\"label\":\"任务单号\",\"align\":\"center\",\"width\":\"100px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"client\",\"label\":\"客户\",\"align\":\"center\",\"width\":\"100px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"alloyWeight\",\"label\":\"单炉投入\",\"align\":\"center\",\"width\":\"80px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"castTime\",\"label\":\"制带时间\",\"align\":\"center\",\"width\":\"110px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"rawWeight\",\"label\":\"大盘毛重\",\"align\":\"center\",\"width\":\"80px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"实际规格(mm)\",\"align\":\"center\",\"width\":\"80px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{class:{text_danger: scope.row.realRibbonWidth !== scope.row.ribbonWidth}},[_vm._v(_vm._s(scope.row.realRibbonWidth))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return (_vm.roleId === 2)?[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editPlan(scope.row)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.delPlan(scope.row)}}},[_vm._v(\"删除\")])]:undefined}}],null,true)})],1),_vm._v(\" \"),_c('div',{staticClass:\"table_tip\"},[_c('p',[_vm._v(\"1. 文件编号：\"+_vm._s(_vm.tableData[0] && _vm.tableData[0].fileNumber))]),_vm._v(\" \"),_c('p',[_vm._v(\"2. \"+_vm._s(_vm.tableData[0] && _vm.tableData[0].remark))])])],1),_vm._v(\" \"),(_vm.dialogVisible)?_c('dialog-form',{attrs:{\"dialogData\":{ formType: _vm.formType, dialogVisible: _vm.dialogVisible, rowData: _vm.rowData}},on:{\"close\":_vm.closeHandler,\"submit\":_vm.submitHandler}}):_vm._e(),_vm._v(\" \"),(_vm.exportVisible)?_c('excel-form',{attrs:{\"exportData\":{ exportVisible: _vm.exportVisible, castId: _vm.castId }},on:{\"closeExport\":function($event){_vm.exportVisible = false},\"submitExport\":function($event){_vm.exportVisible = false}}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5edb3303\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/plan/plan.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5edb3303\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./plan.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./plan.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./plan.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5edb3303\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./plan.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5edb3303\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/plan/plan.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}