webpackJsonp([6],{"2AnY":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("woOf"),n=t.n(r),l=t("g7mi"),o={roleId:"",username:"",adminname:""},i=[{id:2,name:"生产计划"},{id:3,name:"普通管理员"},{id:15,name:"重卷组长"},{id:4,name:"重卷"},{id:5,name:"检测"},{id:6,name:"库房"},{id:7,name:"6号机组-喷带"},{id:8,name:"6号机组-化钢"},{id:9,name:"7号机组-喷带"},{id:10,name:"7号机组-化钢"},{id:11,name:"8号机组-喷带"},{id:12,name:"8号机组-化钢"},{id:13,name:"9号机组-喷带"},{id:14,name:"9号机组-化钢"}],s={props:{dialogData:{type:Object,required:!0}},data:function(){return{formData:{roleId:"",username:"",adminname:""},roleList:i,rules:{roleId:[{required:!0,message:"请选择角色",trigger:"blur"}],username:[{required:!0,message:"请填写账号",trigger:"blur"},{max:20,message:"账号长度在6-20位之间",trigger:"blur"},{min:6,message:"账号长度在6-20位之间",trigger:"blur"}],adminname:[{required:!0,message:"请填写姓名",trigger:"blur"},{max:10,message:"姓名长度在2-10位之间",trigger:"blur"},{min:2,message:"姓名长度在2-10位之间",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]+$/,message:"只能输入中文汉字",trigger:"blur"}]},loading:!1}},created:function(){"create"===this.dialogData.formType?this.formData=n()({},o):this.formData=n()(this.formData,this.dialogData.rowData)},methods:{closeDialog:function(){this.$emit("close")},submitForm:function(){var e=this;this.$refs.form.validate(function(a){if(!a)return!1;e.loading=!0,e.$http("POST",l.a.addUser,e.formData).then(function(a){e.$emit("submit")}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})}}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"create"===e.dialogData.formType?"新增用户":"修改用户",visible:e.dialogData.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,center:!0,width:"30%","element-loading-text":"拼命加载中"},on:{"update:visible":function(a){e.$set(e.dialogData,"dialogVisible",a)},close:e.closeDialog}},[t("el-form",{ref:"form",staticStyle:{width:"100%"},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.submitForm(a):null}}},[t("el-form-item",{attrs:{label:"角色：",prop:"roleId"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.roleId,callback:function(a){e.$set(e.formData,"roleId",a)},expression:"formData.roleId"}},e._l(e.roleList,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"账号：",prop:"username"}},[t("el-input",{model:{value:e.formData.username,callback:function(a){e.$set(e.formData,"username",a)},expression:"formData.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名：",prop:"adminname"}},[t("el-input",{model:{value:e.formData.adminname,callback:function(a){e.$set(e.formData,"adminname",a)},expression:"formData.adminname"}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var m={name:"user",components:{dialogForm:t("VU/8")(s,d,!1,function(e){t("8mCT")},"data-v-51dbf877",null).exports},data:function(){return{dialogVisible:!1,formType:"create",rowData:{},tableData:[],loading:!0}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;this.$http("GET",l.a.queryUser,{roleId:1}).then(function(a){e.tableData=a.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},createUser:function(){this.dialogVisible=!0,this.formType="create"},delUser:function(e){var a=this,t=e.username,r=e.adminname;this.$confirm("删除后数据无法恢复，确定要删除 "+r+"-"+t+" 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http("delete",l.a.delUser,{username:t}).then(function(e){a.getUserList()}).catch(function(e){console.log(e)})}).catch(function(){})},closeHandler:function(){this.dialogVisible=!1},submitHandler:function(){this.dialogVisible=!1,this.getUserList()}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("账号管理")])],1),e._v(" "),t("div",{staticClass:"main_bd"},[t("el-col",{staticClass:"table_hd"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.createUser}},[e._v("新增用户")])],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"username",label:"账号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"password",label:"密码",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"roleId",label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.roleId?t("span",[e._v("厂长")]):e._e(),e._v(" "),2===a.row.roleId?t("span",[e._v("生产计划")]):e._e(),e._v(" "),3===a.row.roleId?t("span",[e._v("普通管理员")]):e._e(),e._v(" "),15===a.row.roleId?t("span",[e._v("重卷组长")]):e._e(),e._v(" "),4===a.row.roleId?t("span",[e._v("重卷")]):e._e(),e._v(" "),5===a.row.roleId?t("span",[e._v("检测")]):e._e(),e._v(" "),6===a.row.roleId?t("span",[e._v("库房")]):e._e(),e._v(" "),7===a.row.roleId?t("span",[e._v("6号机组-喷带")]):e._e(),e._v(" "),8===a.row.roleId?t("span",[e._v("6号机组-化钢")]):e._e(),e._v(" "),9===a.row.roleId?t("span",[e._v("7号机组-喷带")]):e._e(),e._v(" "),10===a.row.roleId?t("span",[e._v("7号机组-化钢")]):e._e(),e._v(" "),11===a.row.roleId?t("span",[e._v("8号机组-喷带")]):e._e(),e._v(" "),12===a.row.roleId?t("span",[e._v("8号机组-化钢")]):e._e(),e._v(" "),13===a.row.roleId?t("span",[e._v("9号机组-喷带")]):e._e(),e._v(" "),14===a.row.roleId?t("span",[e._v("9号机组-化钢")]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"adminname",label:"姓名",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createTime",label:"注册时间",align:"center",width:"170px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"loginTime",label:"最后登录时间",align:"center",width:"170px"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.delUser(a.row)}}},[e._v("删除账户")])]}}])})],1)],1),e._v(" "),e.dialogVisible?t("dialog-form",{attrs:{dialogData:{formType:e.formType,dialogVisible:e.dialogVisible,rowData:e.rowData}},on:{close:e.closeHandler,submit:e.submitHandler}}):e._e()],1)},staticRenderFns:[]};var u=t("VU/8")(m,c,!1,function(e){t("veqG")},"data-v-7007559d",null);a.default=u.exports},"8mCT":function(e,a){},veqG:function(e,a){}});
//# sourceMappingURL=user.b0c0e4cb91ada9699311.js.map