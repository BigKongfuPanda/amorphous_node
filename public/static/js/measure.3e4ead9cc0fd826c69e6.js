webpackJsonp([1],{"6xz9":function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=i("BO1k"),r=i.n(t),s=i("fZjL"),o=i.n(s),a=i("woOf"),l=i.n(a),c=i("mvHQ"),b=i.n(c),u=i("Dd8w"),h=i.n(u),d=i("mw3O"),p=i.n(d),v=i("M4fF"),f=i("g7mi"),m=i("X2Oc"),T=i("NYxO"),k={name:"melt",components:{Collapse:i("IC2r").a},data:function(){return{userinfo:{},castId:6,searchForm:{caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[],thicknessDivation:""},loading:!1,tableData:[],pageConfig:{total:1,current:1,pageSize:10},isExportable:!1,isEditable:!1,isDeleteable:!1,tableHeight:550,multipleSelection:[],isBatchInStored:!1}},computed:h()({},Object(T.c)(["ribbonToughnessLevelList","ribbonTypeList","ribbonWidthList","ribbonThicknessLevelList","laminationLevelList","clientsList","appearenceList"]),{uniqueAppearenceLevelList:function(){return this.appearenceList.reduce(function(e,n){return e.includes(n.appearenceLevel)||e.push(n.appearenceLevel),e},[])}}),beforeRouteUpdate:function(e,n,i){this.castId=e.params.castId,this.getTableData(),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isBatchInStored=this.setBatchInStored(),i()},created:function(){this.castId=this.$route.params.castId,this.userinfo=JSON.parse(localStorage.getItem("userinfo")),this.isExportable=this.setExportable(),this.isEditable=this.setEditable(),this.isDeleteable=this.setDeleteable(),this.isBatchInStored=this.setBatchInStored(),this.getTableData(),this.getRibbonToughnessLevelList(),this.getRibbonTypeList(),this.getRibbonWidthList(),this.getRibbonThicknessLevelList(),this.getLaminationLevelList(),this.getClientsList(),this.getAppearenceLevelList()},mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-80}),window.onresize=Object(m.c)(function(){e.tableHeight=window.innerHeight-80},1e3)},methods:h()({thicknessChangeHandler:function(e,n){var i=[n.ribbonThickness1,n.ribbonThickness2,n.ribbonThickness3,n.ribbonThickness4,n.ribbonThickness5,n.ribbonThickness6,n.ribbonThickness7,n.ribbonThickness8,n.ribbonThickness9];i=i.map(function(e){if(""!==e)return Number(e)}).filter(function(e){return void 0!==e}),n.ribbonThicknessDeviation=this.calcMaxDeviation(i),n.ribbonThickness=i.length>0?(i.reduce(function(e,n){return e+n},0)/i.length).toFixed(2):0,n.ribbonThicknessLevel=this.calcribbonThicknessLevel(n.ribbonThickness)}},Object(T.b)(["getRibbonToughnessLevelList","getRibbonTypeList","getRibbonWidthList","getRibbonThicknessLevelList","getLaminationLevelList","getClientsList","getAppearenceLevelList"]),{dateFormat:function(e,n){return Object(m.a)(e.castDate)},dateTimeFormat:function(e,n){return e.measureDate?Object(m.b)(e.measureDate):""},setEditable:function(){return 5==this.userinfo.roleId},setDeleteable:function(){return 1==this.userinfo.roleId},setExportable:function(){return!![1,2,3,5].includes(this.userinfo.roleId)},setBatchInStored:function(){return 5==this.userinfo.roleId},calcLinerWeight:function(e){var n=0;return(e=Number(e))<25?n=.05:e>=25&&e<30?n=.06:e>=30&&e<40?n=.08:e>=40&&e<50?n=.12:e>=50&&e<58?n=.12:e>=58&&(n=.16),n},clickSearch:function(){this.pageConfig.current=1,this.getTableData({current:1})},reset:function(){this.searchForm={caster:"",furnace:"",date:[],ribbonTypeNames:[],ribbonWidths:[],ribbonThicknessLevels:[],laminationLevels:[],ribbonToughnessLevels:[],appearenceLevels:[]};this.pageConfig.current=1,this.getTableData({current:1})},getTableData:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:b()(this.searchForm.ribbonTypeNames),ribbonWidthJson:b()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:b()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:b()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:b()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:b()(this.searchForm.appearenceLevels),thicknessDivation:this.searchForm.thicknessDivation};l()(n,i),this.$http("get",f.a.queryMeasure,n).then(function(n){e.pageConfig.total=n.count,e.pageConfig.pageSize=n.limit,n.list&&n.list.forEach(function(n){5==e.userinfo.roleId?n.isEditing=!0:n.isEditing=!1,n.storageRule={orderThickness:n.orderThickness,orderLaminationFactor:n.orderLaminationFactor,orderRibbonToughnessLevels:n.orderRibbonToughnessLevels,orderAppearenceLevels:n.orderAppearenceLevels,qualifiedDemands:[1,2,3,5,6,15].includes(Number(e.userinfo.roleId))?JSON.parse(n.qualifiedDemands):[]},n.clients=n.clients?n.clients.split(","):[],n.coilNetWeight=n.coilWeight-e.calcLinerWeight(n.ribbonWidth),n.remainWeight=n.coilNetWeight}),e.tableData=n.list}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})},edit:function(e){if((1==e.isStored||2==e.isStored)&&1==e.isMeasureConfirmed)return this.$message({message:"该带材已经入库，您无权限操作，请联系库房主管人员！",type:"error"})},del:function(e){var n=this,i=e.measureId,t=e.furnace,r=e.coilNumber;this.$confirm("删除后数据无法恢复，确定删除 "+t+" 的第 "+r+" 盘吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$http("delete",f.a.delMeasure,{measureId:i}).then(function(e){n.getTableData()}).catch(function(e){console.log(e)})}).catch(function(){})},save:function(e){if(e.laminationFactor=this.calcLaminationFactor(e.coilWeight,e.diameter,e.realRibbonWidth),e.laminationLevel=this.calcLaminationLevel(e.laminationFactor),e.ribbonToughnessLevel=this.ribbonToughnessLevelList.reduce(function(e,n){return e[n.ribbonToughness]=n.ribbonToughnessLevel,e},{})[e.ribbonToughness],e.appearenceLevel=this.appearenceList.reduce(function(e,n){return e[n.appearence]=n.appearenceLevel,e},{})[e.appearence],e.ribbonThickness1="string"==typeof e.ribbonThickness1?Number(e.ribbonThickness1.trim()):e.ribbonThickness1,e.ribbonThickness2="string"==typeof e.ribbonThickness2?Number(e.ribbonThickness2.trim()):e.ribbonThickness2,e.ribbonThickness3="string"==typeof e.ribbonThickness3?Number(e.ribbonThickness3.trim()):e.ribbonThickness3,e.ribbonThickness4="string"==typeof e.ribbonThickness4?Number(e.ribbonThickness4.trim()):e.ribbonThickness4,e.ribbonThickness5="string"==typeof e.ribbonThickness5?Number(e.ribbonThickness5.trim()):e.ribbonThickness5,e.ribbonThickness6="string"==typeof e.ribbonThickness6?Number(e.ribbonThickness6.trim()):e.ribbonThickness6,e.ribbonThickness7="string"==typeof e.ribbonThickness7?Number(e.ribbonThickness7.trim()):e.ribbonThickness7,e.ribbonThickness8="string"==typeof e.ribbonThickness8?Number(e.ribbonThickness8.trim()):e.ribbonThickness8,e.ribbonThickness9="string"==typeof e.ribbonThickness9?Number(e.ribbonThickness9.trim()):e.ribbonThickness9,e.ribbonThicknessDeviation=this.calcMaxDeviation([e.ribbonThickness1,e.ribbonThickness2,e.ribbonThickness3,e.ribbonThickness4,e.ribbonThickness5,e.ribbonThickness6,e.ribbonThickness7,e.ribbonThickness8,e.ribbonThickness9]),e.ribbonThickness=((e.ribbonThickness1+e.ribbonThickness2+e.ribbonThickness3+e.ribbonThickness4+e.ribbonThickness5+e.ribbonThickness6+e.ribbonThickness7+e.ribbonThickness8+e.ribbonThickness9)/9).toFixed(2),e.ribbonThicknessLevel=this.calcribbonThicknessLevel(e.ribbonThickness),e.ribbonTotalLevel="不合格"===e.laminationLevel||"不合格"===e.appearenceLevel?"不合格":e.ribbonThicknessLevel+e.laminationLevel+e.ribbonToughnessLevel+e.appearenceLevel,[32,42].includes(e.ribbonWidth)&&"1K107B"==e.ribbonTypeName&&["D","E"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel="不合格"),e.ribbonThicknessDeviation>3&&["D","E"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel="不合格"),e.ribbonWidth<50?["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.2&&(e.ribbonTotalLevel="不合格"):e.ribbonWidth>=50&&["D","E"].includes(e.ribbonToughnessLevel)&&Math.abs(e.realRibbonWidth-e.ribbonWidth)>.3&&(e.ribbonTotalLevel="不合格"),["AD25","ND25"].includes(e.ribbonTypeName)){var n=e.realRibbonWidth-e.ribbonWidth;((n=n.toFixed(1))>=.1||n<=-.2)&&(e.ribbonTotalLevel="不合格")}if("不合格"!==e.ribbonTotalLevel){e.ribbonThickness>=20&&e.ribbonThickness<22&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"G"),e.ribbonThickness>=23&&e.ribbonThickness<24&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"L"),e.ribbonThicknessDeviation>3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"F");var i=e.realRibbonWidth-e.ribbonWidth;i=i.toFixed(1),e.ribbonWidth<50?Math.abs(i)>.2&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(i<-.2?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":i>.2&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E")):e.ribbonWidth>=50&&Math.abs(i)>.3&&["A","B","C"].includes(e.ribbonToughnessLevel)&&(i<-.3?e.ribbonTotalLevel=e.ribbonTotalLevel+"-E":i>.3&&(e.ribbonTotalLevel=e.ribbonTotalLevel+"+E"))}(["",void 0,null].includes(e.ribbonThicknessLevel)||["",void 0,null].includes(e.laminationLevel)||["",void 0,null].includes(e.ribbonToughnessLevel)||["",void 0,null].includes(e.appearenceLevel))&&(e.ribbonTotalLevel=""),"不合格"===e.ribbonTotalLevel?e.isStored=3:(e.isStored=this.setStoredType(e),1===e.isStored?(e.inPlanStoredWeight=e.coilNetWeight,2===e.ribbonThicknessLevel&&(e.inPlanThickRibbonWeight=e.coilNetWeight)):2===e.isStored&&(e.outPlanStoredWeight=e.coilNetWeight),e.totalStoredWeight=(e.inPlanStoredWeight+e.outPlanStoredWeight).toFixed(2),this.calcQualityOfABCDE(e),this.calcThinRibbonWeight(e),e.qualityOfGood=e.inPlanStoredWeight,2===e.isStored&&(/^[3-8][1-4][A-E][A-C]G?([+-]E)?F?$/.test(e.ribbonTotalLevel)||/^2[2-3][A-C]BL?([+-]E)?F?$/.test(e.ribbonTotalLevel)?e.qualityOfFine=e.coilNetWeight:e.qualityOfNormal=e.coilNetWeight));var t=Object(v.cloneDeep)(e);t.clients=t.clients.join(),o()(t).forEach(function(e){null==t[e]&&delete t[e]}),this.$http("PUT",f.a.updateMeasure,t).then(function(e){}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var n={current:e};this.getTableData(n)},calcThinRibbonWeight:function(e){if(!(e.ribbonThickness>23))return e.laminationFactor>=.78?e.highFactorThinRibbonWeight=e.coilNetWeight:void(e.laminationFactor>=.75&&(e.thinRibbonWeight=e.coilNetWeight))},calcQualityOfABCDE:function(e){var n=e.ribbonTotalLevel;/^[3-8][2-4][A-E][A-C]G?([+-]E)?F?$/.test(n)?e.qualityOfA=e.coilNetWeight:/^[3-8]1[A-E][A-C]G?([+-]E)?F?$/.test(n)?e.qualityOfB=e.coilNetWeight:/^[3-8]0[A-E][A-C]G?([+-]E)?F?$/.test(n)?e.qualityOfC=e.coilNetWeight:/^2[1-4][A-E][A-C]L?([+-]E)?F?$/.test(n)?e.qualityOfD=e.coilNetWeight:/^1[1-4][A-E][A-C]([+-]E)?F?$/.test(n)&&(e.qualityOfE=e.coilNetWeight)},calcLaminationFactor:function(e,n,i){return((e-.09)/(Math.PI*(n*n/4-9025/4)*7.2)*Math.pow(10,6)/i).toFixed(2)||0},calcLaminationLevel:function(e){return e?e>=.84?"4":e>=.82&&e<.84?"3":e>=.8&&e<.82?"2":e>=.78&&e<.8?"1":e>=.75&&e<.78?"0":e>=.72&&e<.75?"8":"不合格":""},calcMaxDeviation:function(e){return e.sort(function(e,n){return e-n}),e[e.length-1]-e[0]},calcribbonThicknessLevel:function(e){if(e)return e>26?1:e>23&&e<=26?2:e>20&&e<=23?3:e>18&&e<=20?4:e>16&&e<=18?5:e>14&&e<=16?6:e>12&&e<=14?7:e<=12?8:void 0},setStoredType:function(e){var n=!0,i=e.ribbonThickness,t=e.orderThickness;if(t.indexOf("≤")>-1)i>parseInt(t.substr(1))&&(n=!1);else if(t.indexOf("-")>-1){var s=t.split("-")[1];(i<t.split("-")[0]||i>s)&&(n=!1)}var o=e.laminationFactor,a=e.orderLaminationFactor;if(a.indexOf("≥")>-1)o<parseInt(a.substr(1))&&(n=!1);else if(a.indexOf("-")>-1){var l=a.split("-")[1];(o<a.split("-")[0]||o>l)&&(n=!1)}var c=e.ribbonToughnessLevel;e.orderRibbonToughnessLevels.split(",").includes(c)||(n=!1);var b=e.appearenceLevel;if(e.orderAppearenceLevels.split(",").includes(b)||(n=!1),n)return 1;var u=JSON.parse(e.qualifiedDemands)||[],h=!0,d=!1,p=void 0;try{for(var v,f=r()(u);!(h=(v=f.next()).done);h=!0){var m=v.value,T=!0,k=m.qualifiedThickness;if(k.indexOf("≤")>-1)i>parseInt(k.substr(1))&&(T=!1);else if(k.indexOf("-")>-1){var g=k.split("-")[1];(i<k.split("-")[0]||i>g)&&(T=!1)}var L=m.qualifiedLaminationFactor;if(L.indexOf("≥")>-1)o<parseInt(L.substr(1))&&(T=!1);else if(L.indexOf("-")>-1){var _=L.split("-")[1];(o<L.split("-")[0]||o>_)&&(T=!1)}if(m.qualifiedRibbonToughnessLevels.includes(c)||(T=!1),m.qualifiedAppearenceLevels.includes(b)||(T=!1),T)return 2}}catch(e){d=!0,p=e}finally{try{!h&&f.return&&f.return()}finally{if(d)throw p}}return 3},exportExcel:function(){var e={castId:this.castId,startTime:this.searchForm.date[0],endTime:this.searchForm.date[1],caster:this.searchForm.caster,furnace:this.searchForm.furnace,ribbonTypeNameJson:b()(this.searchForm.ribbonTypeNames),ribbonWidthJson:b()(this.searchForm.ribbonWidths),ribbonThicknessLevelJson:b()(this.searchForm.ribbonThicknessLevels),laminationLevelJson:b()(this.searchForm.laminationLevels),ribbonToughnessLevelJson:b()(this.searchForm.ribbonToughnessLevels),appearenceLevelJson:b()(this.searchForm.appearenceLevels)},n=f.a.exportMeasure+"?"+p.a.stringify(e);window.open(n)},setSelectable:function(e,n){return!(![1,2].includes(e.isStored)||e.isMeasureConfirmed)},handleSelectionChange:function(e){this.multipleSelection=e},measureConfirm:function(){var e=this,n=Object(v.cloneDeep)(this.multipleSelection);if(0===n.length)return this.$alert("请选择要入库的带材","提示",{type:"warning"});n.forEach(function(e){e.isMeasureConfirmed=1,e.clients=e.clients.join()}),this.$http("PUT",f.a.updateMeasure,{dataJson:b()(n)}).then(function(n){e.getTableData()}).catch(function(e){console.log(e)})}})},g={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("el-breadcrumb",{staticClass:"crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[e._v("检测记录")]),e._v(" "),i("el-breadcrumb-item",[e._v(e._s(e.castId)+"号机组")])],1),e._v(" "),i("Collapse",[i("el-form",{staticClass:"search_bar",attrs:{model:e.searchForm,inline:!0}},[i("el-form-item",{attrs:{label:"生产日期："}},[i("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.date,callback:function(n){e.$set(e.searchForm,"date",n)},expression:"searchForm.date"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"喷带手："}},[i("el-input",{attrs:{placeholder:"请输入喷带手姓名"},model:{value:e.searchForm.caster,callback:function(n){e.$set(e.searchForm,"caster",n)},expression:"searchForm.caster"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"炉号："}},[i("el-input",{attrs:{placeholder:"请输入炉号"},model:{value:e.searchForm.furnace,callback:function(n){e.$set(e.searchForm,"furnace",n)},expression:"searchForm.furnace"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"材质："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonTypeNames,callback:function(n){e.$set(e.searchForm,"ribbonTypeNames",n)},expression:"searchForm.ribbonTypeNames"}},e._l(e.ribbonTypeList,function(e){return i("el-option",{key:e.ribbonTypeId,attrs:{value:e.ribbonTypeName,label:e.ribbonTypeName}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"规格："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonWidths,callback:function(n){e.$set(e.searchForm,"ribbonWidths",n)},expression:"searchForm.ribbonWidths"}},e._l(e.ribbonWidthList,function(e){return i("el-option",{key:e.ribbonWidthId,attrs:{label:e.ribbonWidth,value:e.ribbonWidth}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"厚度级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonThicknessLevels,callback:function(n){e.$set(e.searchForm,"ribbonThicknessLevels",n)},expression:"searchForm.ribbonThicknessLevels"}},e._l(e.ribbonThicknessLevelList,function(e){return i("el-option",{key:e.ribbonThicknessLevelId,attrs:{label:e.ribbonThicknessLevel,value:e.ribbonThicknessLevel}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"叠片级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.laminationLevels,callback:function(n){e.$set(e.searchForm,"laminationLevels",n)},expression:"searchForm.laminationLevels"}},e._l(e.laminationLevelList,function(e){return i("el-option",{key:e.laminationLevelId,attrs:{label:e.laminationLevel,value:e.laminationLevel}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"韧性级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.ribbonToughnessLevels,callback:function(n){e.$set(e.searchForm,"ribbonToughnessLevels",n)},expression:"searchForm.ribbonToughnessLevels"}},e._l(e.ribbonToughnessLevelList,function(e){return i("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughnessLevel,value:e.ribbonToughnessLevel}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"外观级别："}},[i("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.searchForm.appearenceLevels,callback:function(n){e.$set(e.searchForm,"appearenceLevels",n)},expression:"searchForm.appearenceLevels"}},e._l(e.uniqueAppearenceLevelList,function(e,n){return i("el-option",{key:n,attrs:{label:e,value:e}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"厚度偏差："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.thicknessDivation,callback:function(n){e.$set(e.searchForm,"thicknessDivation",n)},expression:"searchForm.thicknessDivation"}},[i("el-option",{attrs:{label:"<=1",value:1}}),e._v(" "),i("el-option",{attrs:{label:"<=2",value:2}}),e._v(" "),i("el-option",{attrs:{label:"<=3",value:3}}),e._v(" "),i("el-option",{attrs:{label:"<=4",value:4}}),e._v(" "),i("el-option",{attrs:{label:"<=5",value:5}})],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clickSearch}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),i("div",{staticClass:"main_bd"},[i("el-col",{staticClass:"table_hd"},[e.isBatchInStored?i("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.measureConfirm}},[e._v("确认入库")]):e._e(),e._v(" "),e.isExportable?i("el-button",{staticClass:"pull_right",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")]):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"20",selectable:e.setSelectable}}),e._v(" "),i("el-table-column",{attrs:{prop:"furnace",label:"炉号",align:"center",width:"130px",fixed:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"coilNumber",label:"盘号",align:"center",width:"35px",fixed:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonTypeName",label:"材质",align:"center","min-width":"50px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonWidth",label:"规格",align:"center",width:"40px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"castDate",label:"生产日期",align:"center",formatter:e.dateFormat,width:"80px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"caster",label:"喷带手",align:"center",width:"50px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"diameter",label:"外径(mm)",align:"center",width:"70px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"coilWeight",label:"重量(kg)",align:"center",width:"70px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"laminationFactor",label:"叠片系数",align:"center",width:"70px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"laminationLevel",label:"叠片等级",align:"center",width:"70px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"realRibbonWidth",label:"实际带宽",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.realRibbonWidth))]):i("div",[i("el-input",{attrs:{size:"mini"},model:{value:n.row.realRibbonWidth,callback:function(i){e.$set(n.row,"realRibbonWidth",i)},expression:"scope.row.realRibbonWidth"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness1",label:"带厚1(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness1))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness1,callback:function(i){e.$set(n.row,"ribbonThickness1",i)},expression:"scope.row.ribbonThickness1"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness2",label:"带厚2(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness2))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness2,callback:function(i){e.$set(n.row,"ribbonThickness2",i)},expression:"scope.row.ribbonThickness2"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness3",label:"带厚3(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness3))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness3,callback:function(i){e.$set(n.row,"ribbonThickness3",i)},expression:"scope.row.ribbonThickness3"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness4",label:"带厚4(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness4))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness4,callback:function(i){e.$set(n.row,"ribbonThickness4",i)},expression:"scope.row.ribbonThickness4"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness5",label:"带厚5(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness5))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness5,callback:function(i){e.$set(n.row,"ribbonThickness5",i)},expression:"scope.row.ribbonThickness5"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness6",label:"带厚6(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness6))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness6,callback:function(i){e.$set(n.row,"ribbonThickness6",i)},expression:"scope.row.ribbonThickness6"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness7",label:"带厚7(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness7))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness7,callback:function(i){e.$set(n.row,"ribbonThickness7",i)},expression:"scope.row.ribbonThickness7"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness8",label:"带厚8(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness8))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness8,callback:function(i){e.$set(n.row,"ribbonThickness8",i)},expression:"scope.row.ribbonThickness8"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness9",label:"带厚9(μm)",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonThickness9))]):i("div",[i("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(i){return function(i){return e.thicknessChangeHandler(i,n.row)}(i)}},model:{value:n.row.ribbonThickness9,callback:function(i){e.$set(n.row,"ribbonThickness9",i)},expression:"scope.row.ribbonThickness9"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThicknessDeviation",label:"厚度偏差(μm)",align:"center",width:"90px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThickness",label:"平均厚度(μm)",align:"center",width:"90px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonThicknessLevel",label:"厚度级别",align:"center",width:"70px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonToughness",label:"韧性",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.ribbonToughness))]):i("div",[i("el-select",{attrs:{size:"mini",placeholder:""},model:{value:n.row.ribbonToughness,callback:function(i){e.$set(n.row,"ribbonToughness",i)},expression:"scope.row.ribbonToughness"}},e._l(e.ribbonToughnessLevelList,function(e){return i("el-option",{key:e.ribbonToughnessLevelId,attrs:{label:e.ribbonToughness,value:e.ribbonToughness}})}),1)],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonToughnessLevel",label:"韧性等级",align:"center",width:"60px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"appearence",label:"外观",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.appearence))]):i("div",[i("el-select",{attrs:{size:"mini",placeholder:""},model:{value:n.row.appearence,callback:function(i){e.$set(n.row,"appearence",i)},expression:"scope.row.appearence"}},e._l(e.appearenceList,function(e){return i("el-option",{key:e.appearenceLevelId,attrs:{label:e.appearence,value:e.appearence}})}),1)],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"appearenceLevel",label:"外观等级",align:"center",width:"60px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ribbonTotalLevel",label:"综合级别",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(n){return[i("span",{class:"不合格"===n.row.ribbonTotalLevel?"text_danger":""},[e._v(e._s(n.row.ribbonTotalLevel))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"入库规则",align:"center",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(n){return[i("el-popover",{attrs:{placement:"right",trigger:"hover"}},[i("table",{staticClass:"popover_table",attrs:{cellpadding:"0",cellspacing:"0"}},[i("thead",[i("th",[e._v("类别")]),e._v(" "),i("th",[e._v("带厚")]),e._v(" "),i("th",[e._v("叠片")]),e._v(" "),i("th",[e._v("韧性")]),e._v(" "),i("th",[e._v("外观")])]),e._v(" "),i("tbody",[i("tr",[i("td",[e._v("计划内入库要求")]),e._v(" "),i("td",[e._v(e._s(n.row.storageRule.orderThickness))]),e._v(" "),i("td",[e._v(e._s(n.row.storageRule.orderLaminationFactor))]),e._v(" "),i("td",[e._v(e._s(n.row.storageRule.orderRibbonToughnessLevels))]),e._v(" "),i("td",[e._v(e._s(n.row.storageRule.orderAppearenceLevels))])]),e._v(" "),e._l(n.row.storageRule.qualifiedDemands,function(n,t){return i("tr",{key:t},[i("td",[e._v("计划外入库要求")]),e._v(" "),i("td",[e._v(e._s(n.qualifiedThickness))]),e._v(" "),i("td",[e._v(e._s(n.qualifiedLaminationFactor))]),e._v(" "),i("td",[e._v(e._s(n.qualifiedRibbonToughnessLevels.join()))]),e._v(" "),i("td",[e._v(e._s(n.qualifiedAppearenceLevels.join()))])])})],2)]),e._v(" "),i("el-button",{attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[e._v("详情")])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"isStored",label:"是否入库",align:"center",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed?i("div",[1===n.row.isStored?i("span",[e._v("计划内")]):e._e(),e._v(" "),2===n.row.isStored?i("span",[e._v("计划外")]):e._e(),e._v(" "),3===n.row.isStored?i("span",{staticClass:"text_danger"},[e._v("否")]):e._e()]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"unStoreReason",label:"不入库原因",align:"center","min-width":"70px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",{staticClass:"text_danger"},[e._v(e._s(n.row.unStoreReason))]):i("div",[i("el-input",{attrs:{size:"mini"},model:{value:n.row.unStoreReason,callback:function(i){e.$set(n.row,"unStoreReason",i)},expression:"scope.row.unStoreReason"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"clients",label:"判定去向",align:"center",width:"80px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return[1===n.row.isMeasureConfirmed||5!=e.userinfo.roleId?i("div",[e._v(e._s(n.row.clients?n.row.clients.toString():""))]):i("div",[i("el-select",{attrs:{size:"mini",placeholder:"",multiple:"","collapse-tags":""},model:{value:n.row.clients,callback:function(i){e.$set(n.row,"clients",i)},expression:"scope.row.clients"}},e._l(e.clientsList,function(e){return i("el-option",{key:e.clientsId,attrs:{label:e.client,value:e.client,disabled:0===e.isFlat&&1===n.row.isFlat}})}),1)],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"measureDate",label:"检测时间",align:"center",width:"100px",formatter:e.dateTimeFormat,"show-overflow-tooltip":!0}}),e._v(" "),5==e.userinfo.roleId||1==e.userinfo.roleId?i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[1!==n.row.isMeasureConfirmed?i("el-button",{attrs:{size:"mini",type:"success",disabled:!e.isEditable},on:{click:function(i){e.save(n.row)}}},[e._v("保存")]):e._e()]}}])}):e._e()],1),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"total,prev,pager,next",total:e.pageConfig.total,"current-page":e.pageConfig.current,"page-size":e.pageConfig.pageSize},on:{"update:currentPage":function(n){e.$set(e.pageConfig,"current",n)},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var L=i("VU/8")(k,g,!1,function(e){i("aW3w")},"data-v-8ad2f2a6",null);n.default=L.exports},BO1k:function(e,n,i){e.exports={default:i("fxRn"),__esModule:!0}},Cdx3:function(e,n,i){var t=i("sB3e"),r=i("lktj");i("uqUo")("keys",function(){return function(e){return r(t(e))}})},aW3w:function(e,n){},fZjL:function(e,n,i){e.exports={default:i("jFbC"),__esModule:!0}},fxRn:function(e,n,i){i("+tPU"),i("zQR9"),e.exports=i("g8Ux")},g8Ux:function(e,n,i){var t=i("77Pl"),r=i("3fs2");e.exports=i("FeBl").getIterator=function(e){var n=r(e);if("function"!=typeof n)throw TypeError(e+" is not iterable!");return t(n.call(e))}},jFbC:function(e,n,i){i("Cdx3"),e.exports=i("FeBl").Object.keys},uqUo:function(e,n,i){var t=i("kM2E"),r=i("FeBl"),s=i("S82l");e.exports=function(e,n){var i=(r.Object||{})[e]||Object[e],o={};o[e]=n(i),t(t.S+t.F*s(function(){i(1)}),"Object",o)}}});
//# sourceMappingURL=measure.3e4ead9cc0fd826c69e6.js.map