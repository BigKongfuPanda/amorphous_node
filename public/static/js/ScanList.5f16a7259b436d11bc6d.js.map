{"version":3,"sources":["webpack:///src/pages/scanList/scanList.vue","webpack:///./src/pages/scanList/scanList.vue?4de3","webpack:///./src/pages/scanList/scanList.vue"],"names":["scanList","name","data","isDisabled","sheetVisible","adminname","roleId","text","actions","info","disabled","tableData","totalCoilNum","totalWeight","created","userinfo","JSON","parse","localStorage","getItem","this","method","signout","getData","methods","handleMore","_this","$http","urlmap","then","removeItem","returnUrl","encodeURIComponent","window","location","href","$router","push","path","query","catch","err","console","log","finally","_this2","queryScanList","list","handleDelete","selected","_this3","furnace","coilNumber","mint_ui_common","confirm","action","delScanConfirm","setTimeout","reload","handleScanListWithPlace","_this4","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","value","params","wrap","_context","prev","next","prompt","sent","Object","ids","map","item","storageId","place","batchUpdateRibbonWithPlace","t0","stop","handleOutStore","_this5","_callee2","_ref2","_context2","takeBy","batchOutStoreByScan","scanList_scanList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","title","slot","icon","on","click","_v","span","_s","_l","key","right","content","style","background","color","handler","coilWeight","plain","type","_e","model","callback","$$v","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/ScanList.5f16a7259b436d11bc6d.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- header -->\n    <mt-header fixed title=\"带材信息\">\n      <mt-button icon=\"more\" slot=\"right\" @click=\"handleMore\"></mt-button>\n    </mt-header>\n    <!-- 带材信息 -->\n\n    <div class=\"content\">\n      <el-row class=\"total_data\">\n        <el-col :span=\"12\"\n          ><p class=\"text_center\">总盘数：{{ totalCoilNum }}</p></el-col\n        >\n        <el-col :span=\"12\"\n          ><p class=\"text_center\">总重量(kg)：{{ totalWeight }}</p></el-col\n        >\n      </el-row>\n      <el-row class=\"table-hd\">\n        <el-col :span=\"12\"><p class=\"text_center\">炉号</p> </el-col>\n        <el-col :span=\"6\"><p class=\"text_center\">盘号</p></el-col>\n        <el-col :span=\"6\"><p class=\"text_center\">重量</p></el-col>\n      </el-row>\n      <mt-cell-swipe\n        v-for=\"item in tableData\"\n        :key=\"item.storageId\"\n        :right=\"[\n          {\n            content: '删除',\n            style: { background: 'red', color: '#fff' },\n            handler: () => handleDelete(item),\n          },\n        ]\"\n      >\n        <el-row class=\"slot\">\n          <el-col :span=\"12\"\n            ><p class=\"text_center\">{{ item.furnace }}</p>\n          </el-col>\n          <el-col :span=\"6\"\n            ><p class=\"text_center\">{{ item.coilNumber }}</p></el-col\n          >\n          <el-col :span=\"6\"\n            ><p class=\"text_center\">{{ item.coilWeight }}</p></el-col\n          >\n        </el-row>\n      </mt-cell-swipe>\n    </div>\n    <!-- 按钮 -->\n    <div class=\"btn-wrapp\" v-if=\"roleId === 6\">\n      <mt-button plain @click=\"handleOutStore\">出库</mt-button>\n      <mt-button\n        type=\"primary\"\n        @click=\"handleScanListWithPlace\"\n        :disabled=\"disabled\"\n        >入仓</mt-button\n      >\n    </div>\n\n    <!-- 退出登录 -->\n    <mt-actionsheet :actions=\"actions\" v-model=\"sheetVisible\"></mt-actionsheet>\n  </div>\n</template>\n\n<script>\nimport urlmap from \"@/utils/urlmap\";\nimport { MessageBox, Toast } from \"mint-ui\";\nexport default {\n  name: \"ribbonInfo\",\n  data() {\n    return {\n      isDisabled: false,\n      sheetVisible: false,\n      adminname: \"\",\n      roleId: 0,\n      text: \"\",\n      actions: [],\n      info: {},\n      disabled: false,\n      tableData: [],\n      totalCoilNum: 0,\n      totalWeight: 0,\n    };\n  },\n  created() {\n    const that = this;\n    const userinfo = JSON.parse(localStorage.getItem(\"userinfo\")) || {};\n    this.adminname = userinfo.adminname;\n    this.roleId = userinfo.roleId;\n    this.actions = [\n      { name: `当前登录：${this.adminname}` },\n      { name: \"退出登录\", method: this.signout },\n    ];\n    this.getData();\n  },\n  methods: {\n    handleMore() {\n      this.sheetVisible = true;\n    },\n    signout() {\n      this.isDisabled = true;\n      this.$http(\"POST\", urlmap.signout, {})\n        .then((data) => {\n          localStorage.removeItem(\"userinfo\");\n          const returnUrl = encodeURIComponent(window.location.href);\n          this.$router.push({ path: \"/login\", query: { returnUrl } });\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n        .finally(() => {\n          this.isDisabled = false;\n        });\n    },\n    getData() {\n      this.$http(\"GET\", urlmap.queryScanList)\n        .then((data) => {\n          (this.totalCoilNum = data.totalCoilNum),\n            (this.totalWeight = data.totalWeight);\n          this.tableData = data.list;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    handleDelete(selected) {\n      const { furnace, coilNumber } = selected;\n      MessageBox.confirm(`确定删除 ${furnace}，第${coilNumber}盘吗?`).then(\n        (action) => {\n          this.$http(\"POST\", urlmap.delScanConfirm, { furnace, coilNumber })\n            .then((data) => {\n              setTimeout(() => {\n                window.location.reload();\n              }, 2000);\n            })\n            .catch((err) => {\n              console.log(err);\n            });\n        }\n      );\n    },\n    async handleScanListWithPlace() {\n      try {\n        const { value, action } = await MessageBox.prompt(\"请输入仓位\");\n        if (!value) {\n          Toast(\"仓位不能为空，请重新输入仓位\");\n        }\n\n        const params = {\n          ids: this.tableData.map((item) => item.storageId) || [],\n          place: value,\n        };\n        await this.$http(\"POST\", urlmap.batchUpdateRibbonWithPlace, params);\n        this.getData();\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    async handleOutStore() {\n      try {\n        const { value, action } = await MessageBox.prompt(\"请输入实际去向\");\n        if (!value) {\n          Toast(\"去向不能为空，请重新输入\");\n        }\n\n        const params = {\n          ids: this.tableData.map((item) => item.storageId) || [],\n          takeBy: value,\n        };\n        await this.$http(\"POST\", urlmap.batchOutStoreByScan, params);\n        this.getData();\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/deep/ .mint-header-title {\n  font-size: 16px;\n  font-weight: bold;\n}\n/deep/ .mint-button {\n  width: 100%;\n  &:last-child {\n    margin-left: 30px;\n  }\n}\n/deep/ .mint-button--default.is-plain {\n  border: 1px solid #26a2ff;\n  color: #26a2ff;\n}\n.container {\n  padding: 0 5px;\n}\n.content {\n  margin-top: 40px;\n  font-size: 16px;\n}\n.btn-wrapp {\n  display: flex;\n  margin-top: 50px;\n  justify-content: space-between;\n}\n.tip {\n  margin-top: 10px;\n  line-height: 16px;\n}\n.scan-item {\n  display: flex;\n  justify-content: space-between;\n}\n.total_data {\n  line-height: 40px;\n  font-size: 18px;\n  font-weight: bold;\n  border-bottom: 5px solid rgba($color: #c0c4cc, $alpha: 0.1);\n}\n.table-hd {\n  line-height: 40px;\n  height: 40px;\n}\n.slot {\n  width: 100%;\n}\n/deep/ .mint-cell-value {\n  width: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/scanList/scanList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('mt-header',{attrs:{\"fixed\":\"\",\"title\":\"带材信息\"}},[_c('mt-button',{attrs:{\"slot\":\"right\",\"icon\":\"more\"},on:{\"click\":_vm.handleMore},slot:\"right\"})],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('el-row',{staticClass:\"total_data\"},[_c('el-col',{attrs:{\"span\":12}},[_c('p',{staticClass:\"text_center\"},[_vm._v(\"总盘数：\"+_vm._s(_vm.totalCoilNum))])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('p',{staticClass:\"text_center\"},[_vm._v(\"总重量(kg)：\"+_vm._s(_vm.totalWeight))])])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"table-hd\"},[_c('el-col',{attrs:{\"span\":12}},[_c('p',{staticClass:\"text_center\"},[_vm._v(\"炉号\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('p',{staticClass:\"text_center\"},[_vm._v(\"盘号\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('p',{staticClass:\"text_center\"},[_vm._v(\"重量\")])])],1),_vm._v(\" \"),_vm._l((_vm.tableData),function(item){return _c('mt-cell-swipe',{key:item.storageId,attrs:{\"right\":[\n        {\n          content: '删除',\n          style: { background: 'red', color: '#fff' },\n          handler: function () { return _vm.handleDelete(item); },\n        } ]}},[_c('el-row',{staticClass:\"slot\"},[_c('el-col',{attrs:{\"span\":12}},[_c('p',{staticClass:\"text_center\"},[_vm._v(_vm._s(item.furnace))])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('p',{staticClass:\"text_center\"},[_vm._v(_vm._s(item.coilNumber))])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('p',{staticClass:\"text_center\"},[_vm._v(_vm._s(item.coilWeight))])])],1)],1)})],2),_vm._v(\" \"),(_vm.roleId === 6)?_c('div',{staticClass:\"btn-wrapp\"},[_c('mt-button',{attrs:{\"plain\":\"\"},on:{\"click\":_vm.handleOutStore}},[_vm._v(\"出库\")]),_vm._v(\" \"),_c('mt-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.disabled},on:{\"click\":_vm.handleScanListWithPlace}},[_vm._v(\"入仓\")])],1):_vm._e(),_vm._v(\" \"),_c('mt-actionsheet',{attrs:{\"actions\":_vm.actions},model:{value:(_vm.sheetVisible),callback:function ($$v) {_vm.sheetVisible=$$v},expression:\"sheetVisible\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8ce49446\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/scanList/scanList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8ce49446\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./scanList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scanList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scanList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8ce49446\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./scanList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8ce49446\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/scanList/scanList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}