{"version":3,"sources":["webpack:///src/pages/ribbonInfo/ribbonInfo.vue","webpack:///./src/pages/ribbonInfo/ribbonInfo.vue?328d","webpack:///./src/pages/ribbonInfo/ribbonInfo.vue"],"names":["ribbonInfo","name","data","isDisabled","sheetVisible","adminname","roleId","text","actions","info","furnace","this","$route","query","f","coilNumber","c","disabled","computed","status","_info","isRollConfirmed","isMeasureConfirmed","isStorageConfirmed","isStored","storeType","type","created","userinfo","JSON","parse","localStorage","getItem","error","$message","message","method","signout","getData","methods","handleMore","_this","$http","urlmap","then","removeItem","returnUrl","encodeURIComponent","window","location","href","$router","push","path","catch","err","console","log","finally","_this2","parseInt","queryRibbonInfo","list","scanConfirm","_this3","params","addStorage","_this4","handleFinish","ribbonInfo_ribbonInfo","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","title","slot","icon","on","click","_v","value","ribbonTypeName","ribbonTotalLevel","_e","place","model","callback","$$v","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/ribbonInfo.c3be135ea922fc83f14f.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- header -->\n    <mt-header fixed title=\"带材信息\">\n      <mt-button icon=\"more\" slot=\"right\" @click=\"handleMore\"></mt-button>\n    </mt-header>\n    <!-- 带材信息 -->\n    <div class=\"content\">\n      <mt-cell title=\"炉号\" :value=\"info.furnace\"></mt-cell>\n      <mt-cell title=\"盘号\" :value=\"info.coilNumber\"></mt-cell>\n      <mt-cell title=\"材质\" :value=\"info.ribbonTypeName\"></mt-cell>\n      <mt-cell title=\"规格\" :value=\"`${info.ribbonWidth} mm`\"></mt-cell>\n      <mt-cell title=\"重量\" :value=\"`${info.coilWeight} kg`\"></mt-cell>\n      <mt-cell title=\"级别\" :value=\"info.ribbonTotalLevel\"></mt-cell>\n      <mt-cell title=\"状态\" :value=\"status\"></mt-cell>\n      <mt-cell\n        title=\"入库类型\"\n        :value=\"storeType\"\n        v-if=\"info.isStorageConfirmed === 1\"\n      ></mt-cell>\n      <p class=\"text_danger tip\" v-if=\"roleId === 6\">\n        备注： 1. 如果要入库，则点击【确认入库】； 2.\n        如果要继续扫下一盘，则点击【下一盘】；\n      </p>\n    </div>\n    <!-- 按钮 -->\n    <div class=\"btn-wrapp\" v-if=\"roleId === 6\">\n      <!-- <mt-button plain @click=\"handleFinish\">结束了</mt-button> -->\n      <mt-button\n        type=\"primary\"\n        @click=\"addStorage\"\n        :disabled=\"disabled\"\n        v-if=\"\n          info.isMeasureConfirmed === 1 &&\n            info.isStorageConfirmed === 0 &&\n            info.isRollConfirmed === 1\n        \"\n        >确认入库</mt-button\n      >\n      <mt-button\n        type=\"primary\"\n        @click=\"scanConfirm\"\n        :disabled=\"disabled\"\n        v-if=\"info.isStorageConfirmed === 1 && !info.place\"\n        >下一盘</mt-button\n      >\n    </div>\n\n    <!-- 退出登录 -->\n    <mt-actionsheet :actions=\"actions\" v-model=\"sheetVisible\"></mt-actionsheet>\n  </div>\n</template>\n\n<script>\nimport urlmap from \"@/utils/urlmap\";\nexport default {\n  name: \"ribbonInfo\",\n  data() {\n    return {\n      isDisabled: false,\n      sheetVisible: false,\n      adminname: \"\",\n      roleId: 0,\n      text: \"\",\n      actions: [],\n      info: {},\n      furnace: this.$route.query.f,\n      coilNumber: this.$route.query.c,\n      disabled: false\n    };\n  },\n  computed: {\n    status() {\n      let text = \"重卷完\";\n      const {\n        isRollConfirmed,\n        isMeasureConfirmed,\n        isStorageConfirmed,\n        isStored\n      } = this.info;\n      if (isRollConfirmed === 1) {\n        text = \"已送检\";\n      }\n      if (isMeasureConfirmed === 1) {\n        text = \"申请入库\";\n      }\n      if (isStorageConfirmed === 1) {\n        text = \"已入库\";\n      }\n      return text;\n    },\n    storeType() {\n      let type = \"\";\n      const { isStored } = this.info;\n      if (isStored === 1) {\n        type = \"计划内入库\";\n      }\n      if (isStored === 2) {\n        type = \"计划外入库\";\n      }\n      return type;\n    }\n  },\n  created() {\n    const that = this;\n    let userinfo = {};\n    try {\n      userinfo = JSON.parse(localStorage.getItem(\"userinfo\")) || {};\n    } catch (error) {\n      this.$message({\n        message: error.message || \"JSON parse 错误\",\n        type: \"error\"\n      });\n    }\n    this.adminname = userinfo.adminname;\n    this.roleId = userinfo.roleId;\n    this.actions = [\n      { name: `当前登录：${this.adminname}` },\n      { name: \"退出登录\", method: this.signout }\n    ];\n    this.getData();\n  },\n  methods: {\n    handleMore() {\n      this.sheetVisible = true;\n    },\n    signout() {\n      this.isDisabled = true;\n      this.$http(\"POST\", urlmap.signout, {})\n        .then(data => {\n          try {\n            localStorage.removeItem(\"userinfo\");\n          } catch (error) {\n            this.$message({\n              message: error.message || \"localStorage 错误\",\n              type: \"error\"\n            });\n          }\n          const returnUrl = encodeURIComponent(window.location.href);\n          this.$router.push({ path: \"/login\", query: { returnUrl } });\n        })\n        .catch(err => {\n          console.log(err);\n        })\n        .finally(() => {\n          this.isDisabled = false;\n        });\n    },\n    getData() {\n      const furnace = this.furnace;\n      const coilNumber = parseInt(this.coilNumber);\n      this.$http(\"GET\", urlmap.queryRibbonInfo, { furnace, coilNumber })\n        .then(data => {\n          const info = (data.list && data.list[0]) || {};\n          this.info = info;\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    scanConfirm() {\n      const params = {\n        furnace: this.furnace,\n        coilNumber: this.coilNumber\n      };\n      this.$http(\"POST\", urlmap.scanConfirm, params)\n        .then(data => {\n          data.status ? (this.disabled = false) : (this.disabled = true);\n        })\n        .catch(err => {\n          console.log(err);\n          this.disabled = false;\n        });\n    },\n    addStorage() {\n      this.$http(\"POST\", urlmap.addStorage, { data: this.info })\n        .then(data => {\n          data.status ? (this.disabled = false) : (this.disabled = true);\n        })\n        .catch(err => {\n          console.log(err);\n          this.disabled = false;\n        });\n    },\n    handleFinish() {\n      this.$router.push({ path: \"/scanList\" });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/deep/ .mint-header-title {\n  font-size: 16px;\n  font-weight: bold;\n}\n/deep/ .mint-button {\n  width: 100%;\n  // &:last-child {\n  //   margin-left: 30px;\n  // }\n}\n/deep/ .mint-button--default.is-plain {\n  border: 1px solid #26a2ff;\n  color: #26a2ff;\n}\n.container {\n  padding: 0 5px;\n}\n.content {\n  margin-top: 40px;\n}\n.btn-wrapp {\n  display: flex;\n  margin-top: 50px;\n  justify-content: space-between;\n}\n.tip {\n  margin-top: 10px;\n  line-height: 16px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/ribbonInfo/ribbonInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('mt-header',{attrs:{\"fixed\":\"\",\"title\":\"带材信息\"}},[_c('mt-button',{attrs:{\"slot\":\"right\",\"icon\":\"more\"},on:{\"click\":_vm.handleMore},slot:\"right\"})],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('mt-cell',{attrs:{\"title\":\"炉号\",\"value\":_vm.info.furnace}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"盘号\",\"value\":_vm.info.coilNumber}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"材质\",\"value\":_vm.info.ribbonTypeName}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"规格\",\"value\":((_vm.info.ribbonWidth) + \" mm\")}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"重量\",\"value\":((_vm.info.coilWeight) + \" kg\")}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"级别\",\"value\":_vm.info.ribbonTotalLevel}}),_vm._v(\" \"),_c('mt-cell',{attrs:{\"title\":\"状态\",\"value\":_vm.status}}),_vm._v(\" \"),(_vm.info.isStorageConfirmed === 1)?_c('mt-cell',{attrs:{\"title\":\"入库类型\",\"value\":_vm.storeType}}):_vm._e(),_vm._v(\" \"),(_vm.roleId === 6)?_c('p',{staticClass:\"text_danger tip\"},[_vm._v(\"\\n      备注： 1. 如果要入库，则点击【确认入库】； 2.\\n      如果要继续扫下一盘，则点击【下一盘】；\\n    \")]):_vm._e()],1),_vm._v(\" \"),(_vm.roleId === 6)?_c('div',{staticClass:\"btn-wrapp\"},[(\n        _vm.info.isMeasureConfirmed === 1 &&\n          _vm.info.isStorageConfirmed === 0 &&\n          _vm.info.isRollConfirmed === 1\n      )?_c('mt-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.disabled},on:{\"click\":_vm.addStorage}},[_vm._v(\"确认入库\")]):_vm._e(),_vm._v(\" \"),(_vm.info.isStorageConfirmed === 1 && !_vm.info.place)?_c('mt-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.disabled},on:{\"click\":_vm.scanConfirm}},[_vm._v(\"下一盘\")]):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('mt-actionsheet',{attrs:{\"actions\":_vm.actions},model:{value:(_vm.sheetVisible),callback:function ($$v) {_vm.sheetVisible=$$v},expression:\"sheetVisible\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e72eca2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/ribbonInfo/ribbonInfo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e72eca2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ribbonInfo.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ribbonInfo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ribbonInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e72eca2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ribbonInfo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6e72eca2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/ribbonInfo/ribbonInfo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}